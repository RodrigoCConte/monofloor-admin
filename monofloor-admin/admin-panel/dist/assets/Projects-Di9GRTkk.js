import{d as Ce,u as Me,j as Pe,r as v,D as te,E as Ee,k as _e,l as Be,c as r,e as m,b as e,m as c,n as p,p as Te,g as w,t as u,q as i,s as le,f as g,x as Ve,a as N,F as Ae,y as Se,i as Le,z as se,w as P,v as y,C,o as d,G as Ne,_ as Re}from"./index-Nc6DbBpt.js";import{_ as ae}from"./logo-CxXS7KxG.js";const Ue={class:"page"},je={class:"mobile-nav"},ze={class:"mobile-sidebar-footer"},De={class:"mobile-user-info"},He={class:"user-avatar"},Ie=["src"],Oe={key:1},Fe={class:"user-name"},$e={class:"header"},Ge={class:"nav desktop-nav"},qe={class:"header-right"},We={class:"user-info"},Xe={class:"user-avatar"},Ke=["src"],Ye={key:1},Ze={class:"user-name"},Je={class:"main"},Qe={class:"page-header"},eo={class:"header-actions"},oo=["disabled"],to={key:0,class:"btn-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},lo={key:1,class:"btn-spinner"},so={key:0,class:"loading"},ao={key:1,class:"empty"},no={key:2,class:"projects-grid"},io=["onClick"],ro={class:"status-text"},uo={class:"project-header"},vo={class:"project-title-row"},co={key:0,class:"current-stage-badge-mini"},po={key:1,class:"current-stage-badge-mini no-stages"},mo={class:"project-actions"},go=["onClick"],yo=["onClick"],fo={class:"project-content"},ko={class:"project-client"},bo={class:"project-address"},wo={class:"project-stats"},xo={class:"stat"},ho={class:"stat-content"},Co={class:"stat-value"},Mo={class:"stat"},Po={class:"stat-content"},Eo={class:"stat-value"},_o={class:"stat"},Bo={class:"stat-content"},To={class:"stat-value"},Vo={class:"modal-body"},Ao={class:"modal-footer"},So=["disabled"],Lo={key:0,class:"btn-spinner"},No={class:"modal-body"},Ro={class:"modal-footer"},Uo=["disabled"],jo={key:0,class:"btn-spinner"},zo={class:"modal-body"},Do={class:"form-grid"},Ho={class:"form-group full-width"},Io={class:"form-group"},Oo={class:"form-group full-width"},Fo={key:0,class:"location-found"},$o={class:"form-group"},Go=["value"],qo={class:"form-group"},Wo={class:"form-group"},Xo={class:"form-group"},Ko={class:"form-group"},Yo={key:0,class:"form-group full-width"},Zo={class:"coordinates-display"},Jo={class:"coordinate"},Qo={class:"coord-value"},et={class:"coordinate"},ot={class:"coord-value"},tt=["href"],lt={class:"modal-footer"},st=["disabled"],at={key:0,class:"btn-spinner"},nt={class:"modal-body"},it={class:"form-grid"},rt={class:"form-group full-width"},dt={class:"form-group"},ut={class:"form-group full-width"},vt={class:"form-group"},ct=["value"],pt={class:"form-group"},mt={class:"form-group"},gt={class:"form-group"},yt={class:"form-group"},ft={key:0,class:"form-group full-width"},kt={class:"coordinates-display"},bt={class:"coordinate"},wt={class:"coord-value"},xt={class:"coordinate"},ht={class:"coord-value"},Ct=["href"],Mt={class:"modal-footer"},Pt=["disabled"],Et={key:0,class:"btn-spinner"},_t=Ce({__name:"Projects",setup(Bt){const q=Le(),k=Me(),x=Pe(),M=v(!1),ne=()=>{M.value=!M.value},f=()=>{M.value=!1},W=()=>{window.innerWidth>=768&&(M.value=!1)},ie="https://devoted-wholeness-production.up.railway.app",re="AIzaSyAGl3uuilMmSmSiGWdiV9ySwKq70nNEX-E",R=t=>t?t.startsWith("http")?t:`${ie}${t}`:null,X=t=>t?t.split(" ").map(o=>o[0]).join("").substring(0,2).toUpperCase():"?",E=v([]),D=v(!0),U=v("EM_EXECUCAO"),_=v(!1),K=v(null),B=v(null),H=v(!1),b=v(null),T=v(!1),V=v(!1),I=v(!1),A=v(!1),a=v({id:"",title:"",cliente:"",endereco:"",m2Total:0,m2Piso:0,m2Parede:0,m2Teto:0,mRodape:0,latitude:null,longitude:null}),j=v(!1),S=v(!1),s=v({title:"",cliente:"",endereco:"",m2Total:0,m2Piso:0,m2Parede:0,m2Teto:0,mRodape:0,latitude:null,longitude:null}),O=v(null),z=v(null),L=v(!1),Y=te(()=>{const t=Number(s.value.m2Piso)||0,o=Number(s.value.m2Parede)||0,n=Number(s.value.m2Teto)||0;return t+o+n}),Z=te(()=>{const t=Number(a.value.m2Piso)||0,o=Number(a.value.m2Parede)||0,n=Number(a.value.m2Teto)||0;return t+o+n}),de=t=>{const o=Number(t.m2Piso)||0,n=Number(t.m2Parede)||0,l=Number(t.m2Teto)||0;return o+n+l},ue=()=>new Promise((t,o)=>{if(window.google?.maps?.places){t();return}const n=document.querySelector('script[src*="maps.googleapis.com"]');if(n){n.addEventListener("load",()=>t()),n.addEventListener("error",()=>o(new Error("Failed to load Google Maps")));return}const l=document.createElement("script");l.src=`https://maps.googleapis.com/maps/api/js?key=${re}&libraries=places`,l.async=!0,l.defer=!0,l.onload=()=>t(),l.onerror=()=>o(new Error("Failed to load Google Maps")),document.head.appendChild(l)}),ve=async()=>{if(O.value)try{await ue();const t=new google.maps.LatLngBounds(new google.maps.LatLng(-25.8,-47.5),new google.maps.LatLng(-22,-43));z.value=new google.maps.places.Autocomplete(O.value,{componentRestrictions:{country:"br"},fields:["formatted_address","geometry","name"],types:["address"],bounds:t}),navigator.geolocation&&navigator.geolocation.getCurrentPosition(o=>{const n=new google.maps.LatLngBounds(new google.maps.LatLng(o.coords.latitude-.9,o.coords.longitude-.9),new google.maps.LatLng(o.coords.latitude+.9,o.coords.longitude+.9));z.value?.setBounds(n)},()=>{console.log("Geolocation not available, using default bounds")}),z.value.addListener("place_changed",()=>{const o=z.value?.getPlace();o?.geometry?.location&&(s.value.endereco=o.formatted_address||"",s.value.latitude=o.geometry.location.lat(),s.value.longitude=o.geometry.location.lng(),L.value=!0)})}catch(t){console.error("Failed to initialize autocomplete:",t)}};Ee(j,async t=>{t?(await Ne(),ve()):L.value=!1});const J=()=>{k.logout(),q.push("/login")},h=async()=>{D.value=!0;try{const t={limit:100};U.value!=="all"&&(t.status=U.value);const o=await C.getAll(t);E.value=o.data.data||[]}catch(t){console.error("Error loading projects:",t)}finally{D.value=!1}},ce=async()=>{try{const t=await C.getTemplate(),o=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=o,n.setAttribute("download","template_projetos.xlsx"),document.body.appendChild(n),n.click(),n.remove()}catch(t){console.error("Error downloading template:",t)}},pe=()=>{K.value?.click()},me=async t=>{const o=t.target,n=o.files?.[0];if(n){_.value=!0;try{const l=await C.importExcel(n);x.success(`Importacao concluida! ${l.data.data?.imported||0} projetos importados.`),await h()}catch(l){x.error("Erro ao importar: "+(l.response?.data?.error?.message||"Erro desconhecido"))}finally{_.value=!1,o.value=""}}},Q=t=>t>0?"#22c55e":"#ef4444",ge=t=>t>0?"Em execucao":"Ninguem por aqui ainda :(",ye=t=>{b.value=t,H.value=!0},F=()=>{H.value=!1,b.value=null},fe=async()=>{if(b.value){B.value=b.value.id;try{await C.delete(b.value.id),await h(),F()}catch(t){x.error("Erro ao deletar: "+(t.response?.data?.error||"Erro desconhecido"))}finally{B.value=null}}},ke=async()=>{T.value=!0;try{await C.deleteAll(),await h(),V.value=!1}catch(t){x.error("Erro ao deletar: "+(t.response?.data?.error||"Erro desconhecido"))}finally{T.value=!1}},ee=()=>{s.value={title:"",cliente:"",endereco:"",m2Total:0,m2Piso:0,m2Parede:0,m2Teto:0,mRodape:0,latitude:null,longitude:null}},be=()=>{ee(),j.value=!0},$=()=>{j.value=!1,ee()},we=async()=>{if(!s.value.title.trim()){x.warning("O nome do projeto e obrigatorio");return}S.value=!0;try{const t={title:s.value.title,m2Total:Y.value,m2Piso:s.value.m2Piso,m2Parede:s.value.m2Parede,m2Teto:s.value.m2Teto,mRodape:s.value.mRodape};s.value.cliente&&(t.cliente=s.value.cliente),s.value.endereco&&(t.endereco=s.value.endereco),s.value.latitude!==null&&s.value.longitude!==null&&(t.latitude=s.value.latitude,t.longitude=s.value.longitude),await C.create(t),await h(),$()}catch(t){x.error("Erro ao criar projeto: "+(t.response?.data?.error?.message||"Erro desconhecido"))}finally{S.value=!1}},xe=t=>{a.value={id:t.id,title:t.title||"",cliente:t.cliente||"",endereco:t.endereco||"",m2Total:t.m2Total||0,m2Piso:t.m2Piso||0,m2Parede:t.m2Parede||0,m2Teto:t.m2Teto||0,mRodape:t.mRodape||0,latitude:t.latitude||null,longitude:t.longitude||null},I.value=!0},G=()=>{I.value=!1,a.value={id:"",title:"",cliente:"",endereco:"",m2Total:0,m2Piso:0,m2Parede:0,m2Teto:0,mRodape:0,latitude:null,longitude:null}},he=async()=>{if(!a.value.title.trim()){x.warning("O nome do projeto e obrigatorio");return}A.value=!0;try{const t={title:a.value.title,m2Total:Z.value,m2Piso:a.value.m2Piso,m2Parede:a.value.m2Parede,m2Teto:a.value.m2Teto,mRodape:a.value.mRodape};t.cliente=a.value.cliente||"",t.endereco=a.value.endereco||"",a.value.latitude!==null&&a.value.longitude!==null&&(t.latitude=a.value.latitude,t.longitude=a.value.longitude),await C.update(a.value.id,t),await h(),G()}catch(t){x.error("Erro ao atualizar projeto: "+(t.response?.data?.error?.message||"Erro desconhecido"))}finally{A.value=!1}};return _e(()=>{h(),window.addEventListener("resize",W)}),Be(()=>{window.removeEventListener("resize",W)}),(t,o)=>{const n=Te("router-link");return d(),r("div",Ue,[M.value?(d(),r("div",{key:0,class:"mobile-overlay",onClick:f})):m("",!0),e("aside",{class:le(["mobile-sidebar",{open:M.value}])},[e("div",{class:"mobile-sidebar-header"},[o[23]||(o[23]=e("img",{src:ae,alt:"Monofloor",class:"header-logo"},null,-1)),e("button",{class:"close-menu-btn",onClick:f},[...o[22]||(o[22]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),e("nav",je,[c(n,{to:"/",class:"mobile-nav-link",onClick:f},{default:p(()=>[...o[24]||(o[24]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("rect",{x:"3",y:"3",width:"7",height:"9"}),e("rect",{x:"14",y:"3",width:"7",height:"5"}),e("rect",{x:"14",y:"12",width:"7",height:"9"}),e("rect",{x:"3",y:"16",width:"7",height:"5"})],-1),i("Dashboard",-1)])]),_:1}),c(n,{to:"/applicators",class:"mobile-nav-link",onClick:f},{default:p(()=>[...o[25]||(o[25]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e("circle",{cx:"9",cy:"7",r:"4"}),e("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),e("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})],-1),i("Aplicadores",-1)])]),_:1}),c(n,{to:"/projects",class:"mobile-nav-link",onClick:f},{default:p(()=>[...o[26]||(o[26]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e("polyline",{points:"9 22 9 12 15 12 15 22"})],-1),i("Projetos",-1)])]),_:1}),c(n,{to:"/reports",class:"mobile-nav-link",onClick:f},{default:p(()=>[...o[27]||(o[27]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"})],-1),i("Relatorios",-1)])]),_:1}),c(n,{to:"/requests",class:"mobile-nav-link",onClick:f},{default:p(()=>[...o[28]||(o[28]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"}),e("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),e("line",{x1:"9",y1:"15",x2:"15",y2:"15"})],-1),i("Solicitacoes",-1)])]),_:1}),c(n,{to:"/campaigns",class:"mobile-nav-link",onClick:f},{default:p(()=>[...o[29]||(o[29]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"}),e("line",{x1:"4",y1:"22",x2:"4",y2:"15"})],-1),i("Campanhas",-1)])]),_:1}),c(n,{to:"/academy",class:"mobile-nav-link",onClick:f},{default:p(()=>[...o[30]||(o[30]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),e("polyline",{points:"2 17 12 22 22 17"}),e("polyline",{points:"2 12 12 17 22 12"})],-1),i("Academia",-1)])]),_:1}),c(n,{to:"/map",class:"mobile-nav-link",onClick:f},{default:p(()=>[...o[31]||(o[31]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polygon",{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"}),e("line",{x1:"8",y1:"2",x2:"8",y2:"18"}),e("line",{x1:"16",y1:"6",x2:"16",y2:"22"})],-1),i("Mapa",-1)])]),_:1})]),e("div",ze,[e("div",De,[e("div",He,[R(w(k).user?.photoUrl)?(d(),r("img",{key:0,src:R(w(k).user?.photoUrl),alt:"Avatar",class:"avatar-img"},null,8,Ie)):(d(),r("span",Oe,u(X(w(k).user?.name)),1))]),e("span",Fe,u(w(k).user?.name),1)]),e("button",{onClick:J,class:"mobile-logout-btn"},[...o[32]||(o[32]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e("polyline",{points:"16 17 21 12 16 7"}),e("line",{x1:"21",y1:"12",x2:"9",y2:"12"})],-1),i("Sair",-1)])])])],2),e("header",$e,[e("div",{class:"header-left"},[e("button",{class:"hamburger-btn",onClick:ne},[...o[33]||(o[33]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),e("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),e("line",{x1:"3",y1:"18",x2:"21",y2:"18"})],-1)])]),o[34]||(o[34]=e("img",{src:ae,alt:"Monofloor",class:"header-logo"},null,-1)),o[35]||(o[35]=e("span",{class:"logo-badge"},"ADMIN",-1))]),e("nav",Ge,[c(n,{to:"/",class:"nav-link"},{default:p(()=>[...o[36]||(o[36]=[e("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e("polyline",{points:"9 22 9 12 15 12 15 22"})],-1),i(" Dashboard ",-1)])]),_:1}),c(n,{to:"/applicators",class:"nav-link"},{default:p(()=>[...o[37]||(o[37]=[e("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e("circle",{cx:"9",cy:"7",r:"4"}),e("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),e("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})],-1),i(" Aplicadores ",-1)])]),_:1}),c(n,{to:"/projects",class:"nav-link"},{default:p(()=>[...o[38]||(o[38]=[e("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})],-1),i(" Projetos ",-1)])]),_:1}),c(n,{to:"/reports",class:"nav-link"},{default:p(()=>[...o[39]||(o[39]=[e("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"}),e("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),e("polyline",{points:"10 9 9 9 8 9"})],-1),i(" Relatorios ",-1)])]),_:1}),c(n,{to:"/requests",class:"nav-link"},{default:p(()=>[...o[40]||(o[40]=[e("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),e("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})],-1),i(" Solicitacoes ",-1)])]),_:1}),c(n,{to:"/campaigns",class:"nav-link"},{default:p(()=>[...o[41]||(o[41]=[e("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"}),e("line",{x1:"4",y1:"22",x2:"4",y2:"15"})],-1),i(" Campanhas ",-1)])]),_:1}),c(n,{to:"/academy",class:"nav-link"},{default:p(()=>[...o[42]||(o[42]=[e("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),e("polyline",{points:"2 17 12 22 22 17"}),e("polyline",{points:"2 12 12 17 22 12"})],-1),i(" Academia ",-1)])]),_:1}),c(n,{to:"/map",class:"nav-link"},{default:p(()=>[...o[43]||(o[43]=[e("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polygon",{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"}),e("line",{x1:"8",y1:"2",x2:"8",y2:"18"}),e("line",{x1:"16",y1:"6",x2:"16",y2:"22"})],-1),i(" Mapa ",-1)])]),_:1}),c(n,{to:"/scheduling",class:"nav-link"},{default:p(()=>[...o[44]||(o[44]=[e("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e("line",{x1:"3",y1:"10",x2:"21",y2:"10"})],-1),i(" Agenda ",-1)])]),_:1})]),e("div",qe,[e("div",We,[e("div",Xe,[R(w(k).user?.photoUrl)?(d(),r("img",{key:0,src:R(w(k).user?.photoUrl),alt:"Avatar",class:"avatar-img"},null,8,Ke)):(d(),r("span",Ye,u(X(w(k).user?.name)),1))]),e("span",Ze,u(w(k).user?.name),1)]),e("button",{onClick:J,class:"logout-btn"},[...o[45]||(o[45]=[e("svg",{class:"btn-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e("polyline",{points:"16 17 21 12 16 7"}),e("line",{x1:"21",y1:"12",x2:"9",y2:"12"})],-1),i(" Sair ",-1)])])])]),e("main",Je,[e("div",Qe,[o[51]||(o[51]=e("div",{class:"page-title"},[e("h2",null,"Projetos"),e("p",{class:"page-subtitle"},"Gerencie seus projetos e obras")],-1)),e("div",eo,[g(e("select",{"onUpdate:modelValue":o[0]||(o[0]=l=>U.value=l),onChange:h,class:"filter-select"},[...o[46]||(o[46]=[N('<option value="all" data-v-e9c77810>Todos os status</option><option value="EM_EXECUCAO" data-v-e9c77810>Em Execucao</option><option value="AGUARDANDO_INICIO" data-v-e9c77810>Aguardando</option><option value="PAUSADO" data-v-e9c77810>Pausado</option><option value="FINALIZADO" data-v-e9c77810>Finalizado</option>',5)])],544),[[Ve,U.value]]),e("button",{onClick:be,class:"btn btn-primary"},[...o[47]||(o[47]=[e("svg",{class:"btn-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),i(" Criar Projeto ",-1)])]),e("button",{onClick:ce,class:"btn btn-secondary"},[...o[48]||(o[48]=[e("svg",{class:"btn-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"7 10 12 15 17 10"}),e("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),i(" Baixar Template ",-1)])]),E.value.length>0?(d(),r("button",{key:0,onClick:o[1]||(o[1]=l=>V.value=!0),class:"btn btn-danger-outline"},[...o[49]||(o[49]=[e("svg",{class:"btn-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),i(" Deletar Todos ",-1)])])):m("",!0),e("button",{onClick:pe,class:"btn btn-primary",disabled:_.value},[_.value?(d(),r("div",lo)):(d(),r("svg",to,[...o[50]||(o[50]=[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},null,-1),e("polyline",{points:"17 8 12 3 7 8"},null,-1),e("line",{x1:"12",y1:"3",x2:"12",y2:"15"},null,-1)])])),i(" "+u(_.value?"Importando...":"Importar Excel"),1)],8,oo),e("input",{ref_key:"fileInput",ref:K,type:"file",accept:".xlsx,.xls",onChange:me,style:{display:"none"}},null,544)])]),D.value?(d(),r("div",so,[...o[52]||(o[52]=[e("div",{class:"loading-spinner"},null,-1),e("span",null,"Carregando projetos...",-1)])])):E.value.length===0?(d(),r("div",ao,[...o[53]||(o[53]=[e("svg",{class:"empty-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})],-1),e("p",null,"Nenhum projeto encontrado",-1),e("span",{class:"empty-hint"},"Importe projetos usando o botao acima",-1)])])):(d(),r("div",no,[(d(!0),r(Ae,null,Se(E.value,l=>(d(),r("div",{key:l.id,class:"project-card",onClick:oe=>w(q).push(`/projects/${l.id}`)},[e("span",{class:"status-badge",style:se({borderColor:Q(l.activeCheckinsCount||0)+"40"})},[e("span",{class:"status-dot",style:se({background:Q(l.activeCheckinsCount||0)})},null,4),e("span",ro,u(ge(l.activeCheckinsCount||0))+" • "+u(l.activeCheckinsCount||0)+"/"+u(l._count?.assignments||0),1)],4),e("div",uo,[e("div",vo,[e("h3",null,u(l.title),1),l.currentStage?(d(),r("span",co,u(l.currentStage.name)+" ("+u(l.currentStage.completedCount)+"/"+u(l.currentStage.totalCount)+") ",1)):(d(),r("span",po," Sem etapas "))]),e("div",mo,[e("button",{class:"edit-btn",onClick:P(oe=>xe(l),["stop"]),title:"Editar projeto"},[...o[54]||(o[54]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,go),e("button",{class:"delete-btn",onClick:P(oe=>ye(l),["stop"]),title:"Deletar projeto"},[...o[55]||(o[55]=[N('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-e9c77810><polyline points="3 6 5 6 21 6" data-v-e9c77810></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" data-v-e9c77810></path><line x1="10" y1="11" x2="10" y2="17" data-v-e9c77810></line><line x1="14" y1="11" x2="14" y2="17" data-v-e9c77810></line></svg>',1)])],8,yo)])]),e("div",fo,[e("div",ko,[o[56]||(o[56]=e("svg",{class:"info-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1)),i(" "+u(l.cliente||"Cliente nao informado"),1)]),e("div",bo,[o[57]||(o[57]=e("svg",{class:"info-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e("circle",{cx:"12",cy:"10",r:"3"})],-1)),i(" "+u(l.endereco||"Endereco nao informado"),1)])]),e("div",wo,[e("div",xo,[o[59]||(o[59]=e("div",{class:"stat-icon stat-icon-m2"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"})])],-1)),e("div",ho,[e("span",Co,u(de(l)?.toLocaleString()||0),1),o[58]||(o[58]=e("span",{class:"stat-label"},"m² Total",-1))])]),e("div",Mo,[o[61]||(o[61]=e("div",{class:"stat-icon stat-icon-hours"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("polyline",{points:"12 6 12 12 16 14"})])],-1)),e("div",Po,[e("span",Eo,u(l.workedHours?.toFixed(1)||0)+"h",1),o[60]||(o[60]=e("span",{class:"stat-label"},"Trabalhadas",-1))])]),e("div",_o,[o[63]||(o[63]=N('<div class="stat-icon stat-icon-team" data-v-e9c77810><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-e9c77810><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" data-v-e9c77810></path><circle cx="9" cy="7" r="4" data-v-e9c77810></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87" data-v-e9c77810></path><path d="M16 3.13a4 4 0 0 1 0 7.75" data-v-e9c77810></path></svg></div>',1)),e("div",Bo,[e("span",To,u(l._count?.assignments||0),1),o[62]||(o[62]=e("span",{class:"stat-label"},"Equipe",-1))])])])],8,io))),128))]))]),H.value?(d(),r("div",{key:1,class:"modal-overlay",onClick:F},[e("div",{class:"modal",onClick:o[2]||(o[2]=P(()=>{},["stop"]))},[o[67]||(o[67]=N('<div class="modal-header" data-v-e9c77810><svg class="modal-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-e9c77810><circle cx="12" cy="12" r="10" data-v-e9c77810></circle><line x1="12" y1="8" x2="12" y2="12" data-v-e9c77810></line><line x1="12" y1="16" x2="12.01" y2="16" data-v-e9c77810></line></svg><h3 data-v-e9c77810>Confirmar Exclusao</h3></div>',1)),e("div",Vo,[e("p",null,[o[64]||(o[64]=i("Tem certeza que deseja excluir o projeto ",-1)),e("strong",null,u(b.value?.title),1),o[65]||(o[65]=i("?",-1))]),o[66]||(o[66]=e("p",{class:"modal-warning"},"Esta acao nao pode ser desfeita. Todos os dados relacionados (check-ins, relatorios, documentos) serao removidos.",-1))]),e("div",Ao,[e("button",{class:"btn btn-secondary",onClick:F},"Cancelar"),e("button",{class:"btn btn-danger",onClick:fe,disabled:B.value===b.value?.id},[B.value===b.value?.id?(d(),r("div",Lo)):m("",!0),i(" "+u(B.value===b.value?.id?"Excluindo...":"Excluir Projeto"),1)],8,So)])])])):m("",!0),V.value?(d(),r("div",{key:2,class:"modal-overlay",onClick:o[5]||(o[5]=l=>V.value=!1)},[e("div",{class:"modal",onClick:o[4]||(o[4]=P(()=>{},["stop"]))},[o[71]||(o[71]=N('<div class="modal-header" data-v-e9c77810><svg class="modal-icon modal-icon-danger" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-e9c77810><circle cx="12" cy="12" r="10" data-v-e9c77810></circle><line x1="12" y1="8" x2="12" y2="12" data-v-e9c77810></line><line x1="12" y1="16" x2="12.01" y2="16" data-v-e9c77810></line></svg><h3 data-v-e9c77810>Deletar TODOS os Projetos</h3></div>',1)),e("div",No,[e("p",null,[o[68]||(o[68]=i("Voce esta prestes a excluir ",-1)),e("strong",null,u(E.value.length)+" projetos",1),o[69]||(o[69]=i(".",-1))]),o[70]||(o[70]=e("p",{class:"modal-warning"},"ATENCAO: Esta acao ira remover TODOS os projetos e seus dados relacionados (check-ins, relatorios, documentos). Esta acao NAO pode ser desfeita!",-1))]),e("div",Ro,[e("button",{class:"btn btn-secondary",onClick:o[3]||(o[3]=l=>V.value=!1)},"Cancelar"),e("button",{class:"btn btn-danger",onClick:ke,disabled:T.value},[T.value?(d(),r("div",jo)):m("",!0),i(" "+u(T.value?"Excluindo...":"Sim, Deletar Todos"),1)],8,Uo)])])])):m("",!0),j.value?(d(),r("div",{key:3,class:"modal-overlay",onClick:$},[e("div",{class:"modal modal-large",onClick:o[13]||(o[13]=P(()=>{},["stop"]))},[o[85]||(o[85]=e("div",{class:"modal-header"},[e("svg",{class:"modal-icon modal-icon-success",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]),e("h3",null,"Criar Novo Projeto")],-1)),e("div",zo,[e("div",Do,[e("div",Ho,[o[72]||(o[72]=e("label",null,"Nome do Projeto *",-1)),g(e("input",{"onUpdate:modelValue":o[6]||(o[6]=l=>s.value.title=l),type:"text",placeholder:"Ex: Residencia Silva",class:"form-input"},null,512),[[y,s.value.title]])]),e("div",Io,[o[73]||(o[73]=e("label",null,"Cliente",-1)),g(e("input",{"onUpdate:modelValue":o[7]||(o[7]=l=>s.value.cliente=l),type:"text",placeholder:"Nome do cliente",class:"form-input"},null,512),[[y,s.value.cliente]])]),e("div",Oo,[e("label",null,[o[75]||(o[75]=i(" Endereco ",-1)),L.value?(d(),r("span",Fo,[...o[74]||(o[74]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e("circle",{cx:"12",cy:"10",r:"3"})],-1),i(" Localizacao encontrada ",-1)])])):m("",!0)]),g(e("input",{ref_key:"enderecoInput",ref:O,"onUpdate:modelValue":o[8]||(o[8]=l=>s.value.endereco=l),type:"text",placeholder:"Digite o endereco e selecione da lista",class:le(["form-input",{"has-location":L.value}])},null,2),[[y,s.value.endereco]])]),e("div",$o,[o[76]||(o[76]=e("label",null,"m² Total (Calculado)",-1)),e("input",{value:Y.value,type:"number",class:"form-input calculated-field",readonly:"",disabled:""},null,8,Go)]),e("div",qo,[o[77]||(o[77]=e("label",null,"m² Piso",-1)),g(e("input",{"onUpdate:modelValue":o[9]||(o[9]=l=>s.value.m2Piso=l),type:"number",min:"0",step:"0.01",class:"form-input"},null,512),[[y,s.value.m2Piso,void 0,{number:!0}]])]),e("div",Wo,[o[78]||(o[78]=e("label",null,"m² Parede",-1)),g(e("input",{"onUpdate:modelValue":o[10]||(o[10]=l=>s.value.m2Parede=l),type:"number",min:"0",step:"0.01",class:"form-input"},null,512),[[y,s.value.m2Parede,void 0,{number:!0}]])]),e("div",Xo,[o[79]||(o[79]=e("label",null,"m² Teto",-1)),g(e("input",{"onUpdate:modelValue":o[11]||(o[11]=l=>s.value.m2Teto=l),type:"number",min:"0",step:"0.01",class:"form-input"},null,512),[[y,s.value.m2Teto,void 0,{number:!0}]])]),e("div",Ko,[o[80]||(o[80]=e("label",null,"Metros Rodape",-1)),g(e("input",{"onUpdate:modelValue":o[12]||(o[12]=l=>s.value.mRodape=l),type:"number",min:"0",step:"0.01",class:"form-input"},null,512),[[y,s.value.mRodape,void 0,{number:!0}]])]),L.value||s.value.latitude||s.value.longitude?(d(),r("div",Yo,[o[84]||(o[84]=e("label",null,"Coordenadas (preenchidas automaticamente)",-1)),e("div",Zo,[e("div",Jo,[o[81]||(o[81]=e("span",{class:"coord-label"},"Lat:",-1)),e("span",Qo,u(s.value.latitude?.toFixed(6)||"-"),1)]),e("div",et,[o[82]||(o[82]=e("span",{class:"coord-label"},"Lng:",-1)),e("span",ot,u(s.value.longitude?.toFixed(6)||"-"),1)]),s.value.latitude&&s.value.longitude?(d(),r("a",{key:0,href:`https://www.google.com/maps?q=${s.value.latitude},${s.value.longitude}`,target:"_blank",class:"map-link"},[...o[83]||(o[83]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),e("polyline",{points:"15 3 21 3 21 9"}),e("line",{x1:"10",y1:"14",x2:"21",y2:"3"})],-1),i(" Ver no mapa ",-1)])],8,tt)):m("",!0)])])):m("",!0)])]),e("div",lt,[e("button",{class:"btn btn-secondary",onClick:$},"Cancelar"),e("button",{class:"btn btn-primary",onClick:we,disabled:S.value},[S.value?(d(),r("div",at)):m("",!0),i(" "+u(S.value?"Criando...":"Criar Projeto"),1)],8,st)])])])):m("",!0),I.value?(d(),r("div",{key:4,class:"modal-overlay",onClick:G},[e("div",{class:"modal modal-large",onClick:o[21]||(o[21]=P(()=>{},["stop"]))},[o[98]||(o[98]=e("div",{class:"modal-header"},[e("svg",{class:"modal-icon modal-icon-edit",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]),e("h3",null,"Editar Projeto")],-1)),e("div",nt,[e("div",it,[e("div",rt,[o[86]||(o[86]=e("label",null,"Nome do Projeto *",-1)),g(e("input",{"onUpdate:modelValue":o[14]||(o[14]=l=>a.value.title=l),type:"text",placeholder:"Ex: Residencia Silva",class:"form-input"},null,512),[[y,a.value.title]])]),e("div",dt,[o[87]||(o[87]=e("label",null,"Cliente",-1)),g(e("input",{"onUpdate:modelValue":o[15]||(o[15]=l=>a.value.cliente=l),type:"text",placeholder:"Nome do cliente",class:"form-input"},null,512),[[y,a.value.cliente]])]),e("div",ut,[o[88]||(o[88]=e("label",null,"Endereco",-1)),g(e("input",{"onUpdate:modelValue":o[16]||(o[16]=l=>a.value.endereco=l),type:"text",placeholder:"Digite o endereco",class:"form-input"},null,512),[[y,a.value.endereco]])]),e("div",vt,[o[89]||(o[89]=e("label",null,"m² Total (Calculado)",-1)),e("input",{value:Z.value,type:"number",class:"form-input calculated-field",readonly:"",disabled:""},null,8,ct)]),e("div",pt,[o[90]||(o[90]=e("label",null,"m² Piso",-1)),g(e("input",{"onUpdate:modelValue":o[17]||(o[17]=l=>a.value.m2Piso=l),type:"number",min:"0",step:"0.01",class:"form-input"},null,512),[[y,a.value.m2Piso,void 0,{number:!0}]])]),e("div",mt,[o[91]||(o[91]=e("label",null,"m² Parede",-1)),g(e("input",{"onUpdate:modelValue":o[18]||(o[18]=l=>a.value.m2Parede=l),type:"number",min:"0",step:"0.01",class:"form-input"},null,512),[[y,a.value.m2Parede,void 0,{number:!0}]])]),e("div",gt,[o[92]||(o[92]=e("label",null,"m² Teto",-1)),g(e("input",{"onUpdate:modelValue":o[19]||(o[19]=l=>a.value.m2Teto=l),type:"number",min:"0",step:"0.01",class:"form-input"},null,512),[[y,a.value.m2Teto,void 0,{number:!0}]])]),e("div",yt,[o[93]||(o[93]=e("label",null,"Metros Rodape",-1)),g(e("input",{"onUpdate:modelValue":o[20]||(o[20]=l=>a.value.mRodape=l),type:"number",min:"0",step:"0.01",class:"form-input"},null,512),[[y,a.value.mRodape,void 0,{number:!0}]])]),a.value.latitude||a.value.longitude?(d(),r("div",ft,[o[97]||(o[97]=e("label",null,"Coordenadas",-1)),e("div",kt,[e("div",bt,[o[94]||(o[94]=e("span",{class:"coord-label"},"Lat:",-1)),e("span",wt,u(a.value.latitude?.toFixed(6)||"-"),1)]),e("div",xt,[o[95]||(o[95]=e("span",{class:"coord-label"},"Lng:",-1)),e("span",ht,u(a.value.longitude?.toFixed(6)||"-"),1)]),a.value.latitude&&a.value.longitude?(d(),r("a",{key:0,href:`https://www.google.com/maps?q=${a.value.latitude},${a.value.longitude}`,target:"_blank",class:"map-link"},[...o[96]||(o[96]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),e("polyline",{points:"15 3 21 3 21 9"}),e("line",{x1:"10",y1:"14",x2:"21",y2:"3"})],-1),i(" Ver no mapa ",-1)])],8,Ct)):m("",!0)])])):m("",!0)])]),e("div",Mt,[e("button",{class:"btn btn-secondary",onClick:G},"Cancelar"),e("button",{class:"btn btn-primary",onClick:he,disabled:A.value},[A.value?(d(),r("div",Et)):m("",!0),i(" "+u(A.value?"Salvando...":"Salvar Alteracoes"),1)],8,Pt)])])])):m("",!0)])}}}),At=Re(_t,[["__scopeId","data-v-e9c77810"]]);export{At as default};

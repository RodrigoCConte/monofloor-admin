import{d as Ye,r as c,D as be,k as ea,E as Ee,c as l,b as a,e as d,q as y,t as n,a as W,F as g,y as f,f as v,v as m,w as M,s as b,z as $,x as Y,a2 as p,G as le,C as ge,o as i,_ as aa}from"./index-BRoi_Bt8.js";const ta={class:"pre-obra"},oa={class:"kpi-section"},sa={class:"kpi-row"},la={class:"kpi-content"},na={class:"kpi-value"},ia={class:"kpi-content"},ra={class:"kpi-value"},da={class:"kpi-content"},ca={class:"kpi-value"},ua={class:"kpi-content"},va={class:"kpi-value"},pa={class:"capacity-section"},ma={key:0,class:"unallocated-projects"},_a={class:"unallocated-list"},Aa=["onDragstart"],ba={class:"unallocated-card__name"},Ea={class:"unallocated-card__hours"},ga=["onUpdate:modelValue","onChange"],fa={class:"capacity-grid"},Ca=["onDrop"],ya={class:"month-header"},ka={class:"month-label"},Ia={class:"month-stats"},Ta={class:"month-bar"},Oa={class:"month-percentage"},ha={key:0,class:"month-projects"},Na=["onClick"],Ra={class:"month-project__name"},Pa={class:"month-project__hours"},wa={class:"pre-obra-content"},Da={class:"list-panel"},Ma={class:"list-header"},Sa={key:0,class:"list-items"},Va=["onClick"],Ua={class:"list-item__content"},xa={class:"list-item__cliente"},La={class:"list-item__endereco"},Fa={class:"list-item__progress"},ja={class:"progress-bar"},$a={class:"progress-text"},Ba={key:0,class:"list-empty"},Ga={key:1,class:"list-loading"},za={key:0,class:"detail-panel"},qa={class:"project-info"},Ha={class:"project-info__header"},Qa={class:"project-info__title"},Xa={class:"project-info__address"},Za={class:"project-info__meta"},Ka={class:"meta-item"},Ja={class:"meta-item"},Wa={class:"meta-item"},Ya={class:"tabs-nav"},et=["onClick"],at={class:"tab-icon"},tt={class:"tab-content"},ot={key:0,class:"tab-visao-geral"},st={class:"checklist"},lt=["onClick"],nt={class:"checklist-item__checkbox"},it={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},rt={class:"checklist-item__content"},dt={class:"checklist-item__title"},ct={key:0,class:"checklist-item__date"},ut={class:"checklist-item__icon"},vt={class:"progress-overview"},pt={class:"progress-bar progress-bar--large"},mt={class:"progress-percentage"},_t={key:1,class:"tab-cronograma"},At={class:"cronograma-header"},bt={class:"cronograma-actions"},Et={class:"tarefas-list"},gt={class:"tarefa-card__number"},ft={class:"tarefa-card__content"},Ct={class:"tarefa-card__header"},yt=["value","onChange"],kt={class:"tarefa-card__title"},It={class:"tarefa-card__meta"},Tt={key:0,class:"tarefa-card__date"},Ot={key:0},ht={key:1,class:"tarefa-card__responsavel"},Nt={class:"tarefa-card__actions"},Rt=["onClick"],Pt=["onClick"],wt={key:0,class:"empty-state"},Dt={key:2,class:"tab-materiais"},Mt={class:"calculator-widget"},St={class:"calculator-widget__info"},Vt={class:"calculator-info-item"},Ut={class:"value"},xt={class:"calculator-info-item"},Lt={class:"value"},Ft={class:"calculator-info-item"},jt={class:"value"},$t=["disabled"],Bt={class:"materiais-header"},Gt={class:"materiais-tabs"},zt=["onClick"],qt={class:"materiais-tab__count"},Ht={class:"provisionamentos-list"},Qt={class:"prov-card__icon"},Xt={class:"prov-card__content"},Zt={class:"prov-card__nome"},Kt={class:"prov-card__quantidade"},Jt={key:0,class:"prov-card__badge"},Wt={class:"prov-card__status"},Yt=["value","onChange"],eo=["onClick"],ao={key:0,class:"empty-state"},to={key:3,class:"tab-cores"},oo={class:"cores-header"},so={key:0,class:"cor-selecionada"},lo={class:"cor-selecionada__info"},no={key:0},io={class:"amostras-grid"},ro={class:"amostra-card__content"},co={class:"amostra-card__nome"},uo={key:0,class:"amostra-card__codigo"},vo={class:"amostra-card__workflow"},po={class:"amostra-card__actions"},mo=["value","onChange","disabled"],_o=["onClick"],Ao=["onClick"],bo={key:0,class:"empty-state"},Eo={key:1,class:"detail-panel detail-panel--empty"},go={class:"modal modal--wide"},fo={class:"modal__header"},Co={class:"modal__body"},yo={class:"mode-tabs"},ko={key:0,class:"manual-form"},Io={class:"form-group"},To={class:"form-group"},Oo={class:"form-row"},ho={class:"form-group"},No={class:"form-group"},Ro={class:"form-group"},Po={class:"form-group"},wo={key:1,class:"select-form"},Do={class:"form-group"},Mo=["disabled"],So={value:""},Vo=["value"],Uo={key:0,class:"form-hint"},xo={class:"modal__footer"},Lo=["disabled"],Fo={class:"modal"},jo={class:"modal__header"},$o={class:"modal__body"},Bo={class:"form-group"},Go={class:"form-row"},zo={class:"form-group"},qo={class:"form-group"},Ho={class:"form-row"},Qo={class:"form-group"},Xo={class:"form-group"},Zo={class:"form-group"},Ko={class:"modal__footer"},Jo=["disabled"],Wo={class:"modal"},Yo={class:"modal__header"},es={class:"modal__body"},as={class:"form-row"},ts={class:"form-group"},os={class:"form-group"},ss={class:"form-row"},ls={class:"form-group"},ns={class:"form-group"},is={class:"form-group"},rs={class:"modal__footer"},ds=["disabled"],cs={class:"modal"},us={class:"modal__header"},vs={class:"modal__body"},ps={class:"form-group"},ms={class:"form-row"},_s={class:"form-group"},As={class:"form-group"},bs={class:"color-input-wrapper"},Es={class:"modal__footer"},gs=["disabled"],fs=Ye({__name:"PreObra",setup(Cs){const ne=()=>window.google?.maps,fe=o=>{window.initGoogleMaps=o},ee=c(!0),B=c([]),s=c(null),G=c(""),I=c("visao-geral"),z=c("ALL"),N=c({aguardandoOrientacoes:0,emAndamento:0,concluido:0,total:0}),S=c({monthlyCapacity:2e4,months:[],unallocated:[]});let V=null;const T=c(!1),q=c(!1),R=c(!1),O=c(!1),h=c(""),ae=c([]),U=c(!1),C=c("manual"),u=c({cliente:"",endereco:"",m2Total:0,m2Piso:0,m2Parede:0,cor:""}),te=c(null);let oe=null;const P=c([]),k=c([]),w=c([]),x=c("ALL"),H=c(!1),D=c(null),_=c({titulo:"",tipo:"CUSTOM",dataAgendada:"",horaAgendada:"",responsavelNome:"",observacoes:""}),A=c({tipo:"MATERIAL",nome:"",quantidade:0,unidade:"un",fornecedor:""}),E=c({corNome:"",corCodigo:"",corHex:"#c9a962"}),Ce=[{id:"visao-geral",label:"Visao Geral",icon:"ðŸ“Š"},{id:"cronograma",label:"Cronograma",icon:"ðŸ“…"},{id:"materiais",label:"Materiais",icon:"ðŸ“¦"},{id:"cores",label:"Cores",icon:"ðŸŽ¨"}],ye=[{field:"orientacoesEnviadas",dateField:"orientacoesEnviadasEm",label:"Orientacoes de preparacao enviadas",icon:"ðŸ“„"},{field:"visitaTecnicaAgendada",dateField:null,label:"Visita tecnica agendada",icon:"ðŸ“…"},{field:"visitaTecnicaRealizada",dateField:"visitaTecnicaRealizadaEm",label:"Visita tecnica realizada",icon:"ðŸ“"},{field:"reuniaoOrientativaRealizada",dateField:"reuniaoOrientativaEm",label:"Reuniao orientativa realizada",icon:"ðŸ‘¥"},{field:"materiaisEnviados",dateField:"materiaisEnviadosEm",label:"Materiais enviados",icon:"ðŸ“¦"},{field:"corDefinida",dateField:"corDefinidaEm",label:"Cor definida",icon:"ðŸŽ¨"}],ke=[{value:"ALL",label:"Todos"},{value:"MATERIAL",label:"Materiais"},{value:"RECURSO",label:"Recursos"},{value:"EQUIPAMENTO",label:"Equipamentos"},{value:"FERRAMENTA",label:"Ferramentas"}],Ie=[{status:"AMOSTRA_PENDENTE",label:"Pend"},{status:"ENVIADA",label:"Env"},{status:"RECEBIDA",label:"Rec"},{status:"EM_AVALIACAO",label:"Aval"},{status:"APROVADA",label:"OK"}],ie=be(()=>x.value==="ALL"?k.value:k.value.filter(o=>o.tipo===x.value)),L=be(()=>w.value.find(o=>o.selecionadaFinal)),Q=async()=>{try{ee.value=!0;const o={limit:50};z.value!=="ALL"&&(o.status=z.value),G.value&&(o.search=G.value);const e=await p.getAll(o);B.value=e.data.data||[]}catch(o){console.error("Error loading pre-obras:",o)}finally{ee.value=!1}},X=async()=>{try{const o=await p.getStats();N.value=o.data.stats||N.value}catch(o){console.error("Error loading stats:",o)}},se=async()=>{try{const o=await p.getCapacity();S.value=o.data.data||S.value}catch(o){console.error("Error loading capacity:",o)}},re=o=>o.toLocaleString("pt-BR"),Te=(o,e)=>{V=e,o.dataTransfer&&(o.dataTransfer.effectAllowed="move",o.dataTransfer.setData("text/plain",e.id))},Oe=async(o,e)=>{if(o.preventDefault(),!!V){try{await p.allocate(V.id,e,V.horasEstimadas),await se()}catch(t){console.error("Error allocating project:",t),alert("Erro ao alocar projeto")}V=null}},he=async o=>{if(confirm("Remover projeto deste mes?"))try{await p.allocate(o.id,null),await se()}catch(e){console.error("Error removing from month:",e),alert("Erro ao remover projeto")}},Ne=async o=>{try{await p.allocate(o.id,null,o.horasEstimadas)}catch(e){console.error("Error updating hours:",e)}},F=async o=>{try{const e=await p.getById(o.id);s.value=e.data.data,P.value=s.value?.tarefas||[],k.value=s.value?.provisionamentos||[],w.value=s.value?.amostras||[]}catch(e){console.error("Error loading pre-obra:",e)}},Re=async()=>{try{U.value=!0;const o=await ge.getAll({limit:200}),e=B.value.map(t=>t.projectId);ae.value=(o.data.data||[]).filter(t=>!e.includes(t.id))}catch(o){console.error("Error loading projects:",o)}finally{U.value=!1}},de=()=>{if(ne()?.places){ce();return}const o="AIzaSyAGl3uuilMmSmSiGWdiV9ySwKq70nNEX-E",e=document.createElement("script");e.src=`https://maps.googleapis.com/maps/api/js?key=${o}&libraries=places&callback=initGoogleMaps`,e.async=!0,e.defer=!0,fe(()=>{ce()}),document.head.appendChild(e)},ce=()=>{le(()=>{const o=ne();!te.value||!o?.places||(oe=new o.places.Autocomplete(te.value,{types:["address"],componentRestrictions:{country:"br"},fields:["formatted_address","geometry","address_components"]}),oe.addListener("place_changed",()=>{const e=oe.getPlace();e?.formatted_address&&(u.value.endereco=e.formatted_address)}))})},Pe=async()=>{T.value=!0,C.value="manual",u.value={cliente:"",endereco:"",m2Total:0,m2Piso:0,m2Parede:0,cor:""},h.value="",await Re(),le(()=>{de()})},we=async()=>{try{if(C.value==="select"){if(!h.value)return;await p.create(h.value)}else{if(!u.value.cliente){alert("Preencha o nome do cliente");return}const o=await ge.create({title:u.value.cliente,cliente:u.value.cliente,endereco:u.value.endereco,m2Total:u.value.m2Total||0,m2Piso:u.value.m2Piso||0,m2Parede:u.value.m2Parede||0,cor:u.value.cor,status:"EM_EXECUCAO"}),e=o.data.data?.id||o.data.id;if(!e){alert("Erro ao criar projeto: ID nÃ£o retornado");return}await p.create(e)}T.value=!1,h.value="",u.value={cliente:"",endereco:"",m2Total:0,m2Piso:0,m2Parede:0,cor:""},await Q(),await X()}catch(o){alert(o.response?.data?.error||"Erro ao criar pre-obra")}},De=async o=>{if(!s.value)return;const e=s.value[o];try{await p.updateChecklist(s.value.id,o,!e),s.value[o]=!e,await X()}catch(t){console.error("Error updating checklist:",t)}},Z=o=>{o==="EM_ANDAMENTO"?z.value="ALL":z.value=o,Q()},ue=async()=>{if(s.value)try{const o=await p.generateTarefas(s.value.id);P.value=o.data.data||[]}catch(o){console.error("Error generating tarefas:",o)}},Me=o=>{D.value=o,_.value={titulo:o.titulo,tipo:o.tipo,dataAgendada:o.dataAgendada?o.dataAgendada.split("T")[0]:"",horaAgendada:o.horaAgendada||"",responsavelNome:o.responsavelNome||"",observacoes:o.observacoes||""},q.value=!0},K=()=>{q.value=!1,D.value=null,_.value={titulo:"",tipo:"CUSTOM",dataAgendada:"",horaAgendada:"",responsavelNome:"",observacoes:""}},Se=async()=>{if(!(!s.value||!_.value.titulo))try{D.value?await p.updateTarefa(s.value.id,D.value.id,_.value):await p.createTarefa(s.value.id,_.value),K(),await F(s.value)}catch(o){console.error("Error saving tarefa:",o)}},Ve=async(o,e)=>{if(s.value)try{await p.updateTarefa(s.value.id,o.id,{status:e}),o.status=e}catch(t){console.error("Error updating tarefa status:",t)}},Ue=async o=>{if(!(!s.value||!confirm("Excluir esta tarefa?")))try{await p.deleteTarefa(s.value.id,o.id),P.value=P.value.filter(e=>e.id!==o.id)}catch(e){console.error("Error deleting tarefa:",e)}},xe=async()=>{if(s.value)try{H.value=!0;const o=await p.calculateProvisionamentos(s.value.id);k.value=o.data.data||[]}catch(o){console.error("Error calculating materials:",o)}finally{H.value=!1}},Le=async()=>{if(!(!s.value||!A.value.nome))try{await p.createProvisionamento(s.value.id,A.value),R.value=!1,A.value={tipo:"MATERIAL",nome:"",quantidade:0,unidade:"un",fornecedor:""},await F(s.value)}catch(o){console.error("Error creating provisionamento:",o)}},Fe=async(o,e)=>{if(s.value)try{await p.updateProvisionamento(s.value.id,o.id,{status:e}),o.status=e}catch(t){console.error("Error updating prov status:",t)}},je=async o=>{if(!(!s.value||!confirm("Excluir este item?")))try{await p.deleteProvisionamento(s.value.id,o.id),k.value=k.value.filter(e=>e.id!==o.id)}catch(e){console.error("Error deleting provisionamento:",e)}},$e=o=>o==="ALL"?k.value.length:k.value.filter(e=>e.tipo===o).length,Be=async()=>{if(!(!s.value||!E.value.corNome))try{await p.createAmostra(s.value.id,E.value),O.value=!1,E.value={corNome:"",corCodigo:"",corHex:"#c9a962"},await F(s.value)}catch(o){console.error("Error creating amostra:",o)}},Ge=async(o,e)=>{if(s.value)try{await p.updateAmostra(s.value.id,o.id,{status:e}),o.status=e}catch(t){console.error("Error updating amostra status:",t)}},ze=async o=>{if(s.value)try{await p.selectAmostra(s.value.id,o.id),await F(s.value),await X()}catch(e){console.error("Error selecting amostra:",e)}},qe=async o=>{if(!(!s.value||!confirm("Excluir esta amostra?")))try{await p.deleteAmostra(s.value.id,o.id),w.value=w.value.filter(e=>e.id!==o.id)}catch(e){console.error("Error deleting amostra:",e)}},He=(o,e)=>{const t=["AMOSTRA_PENDENTE","ENVIADA","RECEBIDA","EM_AVALIACAO","APROVADA"],r=t.indexOf(o.status);return t.indexOf(e)<r||o.status==="APROVADA"&&e==="APROVADA"},J=o=>{let e=0;return o.orientacoesEnviadas&&e++,o.visitaTecnicaAgendada&&e++,o.visitaTecnicaRealizada&&e++,o.reuniaoOrientativaRealizada&&e++,o.materiaisEnviados&&e++,o.corDefinida&&e++,Math.round(e/6*100)},ve=o=>({AGUARDANDO_ORIENTACOES:"status--aguardando",ORIENTACOES_ENVIADAS:"status--andamento",AGEND_VISITA_TECNICA:"status--andamento",VISITA_AGENDADA:"status--andamento",VISITA_REALIZADA:"status--andamento",REUNIAO_ORIENTATIVA_PEND:"status--andamento",REUNIAO_REALIZADA:"status--andamento",AGUARDANDO_COR:"status--andamento",COR_DEFINIDA:"status--andamento",MATERIAIS_SOLICITADOS:"status--andamento",MATERIAIS_EM_TRANSITO:"status--andamento",MATERIAIS_RECEBIDOS:"status--concluido",PRONTO_EXECUCAO:"status--concluido"})[o]||"status--aguardando",Qe=o=>({AGUARDANDO_ORIENTACOES:"Aguardando Orientacoes",ORIENTACOES_ENVIADAS:"Orientacoes Enviadas",AGEND_VISITA_TECNICA:"Agendando VT",VISITA_AGENDADA:"VT Agendada",VISITA_REALIZADA:"VT Realizada",REUNIAO_ORIENTATIVA_PEND:"Reuniao Pendente",REUNIAO_REALIZADA:"Reuniao Realizada",AGUARDANDO_COR:"Aguardando Cor",COR_DEFINIDA:"Cor Definida",MATERIAIS_SOLICITADOS:"Materiais Solicitados",MATERIAIS_EM_TRANSITO:"Materiais em Transito",MATERIAIS_RECEBIDOS:"Materiais Recebidos",PRONTO_EXECUCAO:"Pronto para Execucao"})[o]||o,pe=o=>s.value&&s.value[o]||!1,me=o=>s.value&&s.value[o]||"",_e=o=>o?new Date(o).toLocaleDateString("pt-BR"):"",Xe=o=>({VISITA_TECNICA_AFERICAO:"VT",REUNIAO_ORIENTATIVA:"Reuniao",ENVIO_AMOSTRAS:"Amostras",DEFINICAO_COR:"Cor",PREPARACAO_CLIENTE:"Preparacao",ENVIO_MATERIAIS:"Materiais",CONFIRMACAO_RECEBIMENTO:"Recebimento",CUSTOM:"Outro"})[o]||o,Ze=o=>({VISITA_TECNICA_AFERICAO:"tipo--vt",REUNIAO_ORIENTATIVA:"tipo--reuniao",ENVIO_AMOSTRAS:"tipo--amostras",DEFINICAO_COR:"tipo--cor",PREPARACAO_CLIENTE:"tipo--preparacao",ENVIO_MATERIAIS:"tipo--materiais",CONFIRMACAO_RECEBIMENTO:"tipo--recebimento",CUSTOM:"tipo--custom"})[o]||"tipo--custom",Ke=o=>({MATERIAL:"ðŸ“¦",RECURSO:"ðŸ‘¥",EQUIPAMENTO:"ðŸ”§",FERRAMENTA:"ðŸ› ï¸"})[o]||"ðŸ“¦",Je=o=>`prov-card--${o.toLowerCase().replace("_","-")}`;let Ae;const We=()=>{clearTimeout(Ae),Ae=window.setTimeout(()=>{Q()},300)};return ea(async()=>{await Promise.all([Q(),X(),se()])}),Ee(I,()=>{}),Ee(C,o=>{o==="manual"&&T.value&&le(()=>{de()})}),(o,e)=>(i(),l("div",ta,[a("header",{class:"pre-obra-header"},[a("div",{class:"header-content"},[e[45]||(e[45]=a("div",{class:"header-title-section"},[a("h1",{class:"page-title"},[a("span",{class:"title-icon"},"âš™ï¸"),y(" Pre-Obra ")]),a("p",{class:"page-subtitle"},"Planejamento pos-contrato")],-1)),a("div",{class:"header-actions"},[a("button",{class:"btn btn--outline",onClick:Pe},[...e[44]||(e[44]=[a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),y(" Nova Pre-Obra ",-1)])])])])]),a("section",oa,[a("div",sa,[a("div",{class:"kpi-card kpi-card--aguardando",onClick:e[0]||(e[0]=t=>Z("AGUARDANDO_ORIENTACOES"))},[e[47]||(e[47]=a("div",{class:"kpi-icon"},"âš ï¸",-1)),a("div",la,[a("span",na,n(N.value.aguardandoOrientacoes),1),e[46]||(e[46]=a("span",{class:"kpi-label"},"Aguardando",-1))])]),a("div",{class:"kpi-card kpi-card--andamento",onClick:e[1]||(e[1]=t=>Z("EM_ANDAMENTO"))},[e[49]||(e[49]=a("div",{class:"kpi-icon"},"â³",-1)),a("div",ia,[a("span",ra,n(N.value.emAndamento),1),e[48]||(e[48]=a("span",{class:"kpi-label"},"Em Andamento",-1))])]),a("div",{class:"kpi-card kpi-card--concluido",onClick:e[2]||(e[2]=t=>Z("PRONTO_EXECUCAO"))},[e[51]||(e[51]=a("div",{class:"kpi-icon"},"âœ…",-1)),a("div",da,[a("span",ca,n(N.value.concluido),1),e[50]||(e[50]=a("span",{class:"kpi-label"},"Concluido",-1))])]),a("div",{class:"kpi-card kpi-card--total",onClick:e[3]||(e[3]=t=>Z("ALL"))},[e[53]||(e[53]=a("div",{class:"kpi-icon"},"ðŸ“Š",-1)),a("div",ua,[a("span",va,n(N.value.total),1),e[52]||(e[52]=a("span",{class:"kpi-label"},"Total",-1))])])])]),a("section",pa,[e[56]||(e[56]=W('<div class="capacity-header" data-v-033d88ea><h2 class="capacity-title" data-v-033d88ea>ðŸ“… Planejamento de Capacidade</h2><div class="capacity-legend" data-v-033d88ea><span class="legend-item" data-v-033d88ea><span class="legend-color legend-color--available" data-v-033d88ea></span> Disponivel</span><span class="legend-item" data-v-033d88ea><span class="legend-color legend-color--allocated" data-v-033d88ea></span> Alocado</span><span class="legend-item" data-v-033d88ea><span class="legend-color legend-color--over" data-v-033d88ea></span> Excedido</span></div></div>',1)),S.value.unallocated.length>0?(i(),l("div",ma,[e[55]||(e[55]=a("h3",{class:"unallocated-title"},"Projetos sem alocacao (arraste para um mes):",-1)),a("div",_a,[(i(!0),l(g,null,f(S.value.unallocated,t=>(i(),l("div",{key:t.id,class:"unallocated-card",draggable:"true",onDragstart:r=>Te(r,t)},[a("div",ba,n(t.cliente),1),a("div",Ea,[v(a("input",{type:"number","onUpdate:modelValue":r=>t.horasEstimadas=r,onChange:r=>Ne(t),onClick:e[4]||(e[4]=M(()=>{},["stop"])),class:"hours-input",min:"0",step:"10"},null,40,ga),[[m,t.horasEstimadas,void 0,{number:!0}]]),e[54]||(e[54]=a("span",null,"h",-1))])],40,Aa))),128))])])):d("",!0),a("div",fa,[(i(!0),l(g,null,f(S.value.months,t=>(i(),l("div",{key:t.month,class:b(["capacity-month",{"capacity-month--over":t.allocated>t.capacity}]),onDragover:e[5]||(e[5]=M(()=>{},["prevent"])),onDrop:r=>Oe(r,t.month)},[a("div",ya,[a("span",ka,n(t.label),1),a("span",Ia,n(re(t.allocated))+" / "+n(re(t.capacity))+"h",1)]),a("div",Ta,[a("div",{class:b(["month-bar__fill",{"month-bar__fill--low":t.allocated/t.capacity<=.5,"month-bar__fill--medium":t.allocated/t.capacity>.5&&t.allocated/t.capacity<=.8,"month-bar__fill--high":t.allocated/t.capacity>.8&&t.allocated<=t.capacity,"month-bar__fill--over":t.allocated>t.capacity}]),style:$({width:Math.min(t.allocated/t.capacity*100,100)+"%"})},null,6)]),a("div",Oa,n(Math.round(t.allocated/t.capacity*100))+"%",1),t.projects.length>0?(i(),l("div",ha,[(i(!0),l(g,null,f(t.projects,r=>(i(),l("div",{key:r.id,class:"month-project",onClick:j=>he(r),title:"Clique para remover"},[a("span",Ra,n(r.cliente),1),a("span",Pa,n(r.horasEstimadas)+"h",1)],8,Na))),128))])):d("",!0)],42,Ca))),128))])]),a("div",wa,[a("aside",Da,[a("div",Ma,[v(a("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=t=>G.value=t),placeholder:"Buscar cliente ou endereco...",class:"search-input",onInput:We},null,544),[[m,G.value]])]),ee.value?(i(),l("div",Ga," Carregando... ")):(i(),l("div",Sa,[(i(!0),l(g,null,f(B.value,t=>(i(),l("div",{key:t.id,class:b(["list-item",{"list-item--active":s.value?.id===t.id}]),onClick:r=>F(t)},[a("div",{class:b(["list-item__status",ve(t.status)])},null,2),a("div",Ua,[a("span",xa,n(t.project?.cliente||"Sem cliente"),1),a("span",La,n(t.project?.endereco||"Sem endereco"),1)]),a("div",Fa,[a("div",ja,[a("div",{class:"progress-bar__fill",style:$({width:J(t)+"%"})},null,4)]),a("span",$a,n(J(t))+"%",1)])],10,Va))),128)),B.value.length===0?(i(),l("div",Ba," Nenhuma pre-obra encontrada ")):d("",!0)]))]),s.value?(i(),l("main",za,[a("div",qa,[a("div",Ha,[a("h2",Qa,n(s.value.project?.cliente),1),a("span",{class:b(["status-badge",ve(s.value.status)])},n(Qe(s.value.status)),3)]),a("p",Xa,n(s.value.project?.endereco),1),a("div",Za,[a("span",Ka,[a("strong",null,n(s.value.project?.m2Total||0),1),e[57]||(e[57]=y(" m2 total ",-1))]),a("span",Ja,[a("strong",null,n(s.value.project?.m2Piso||0),1),e[58]||(e[58]=y(" m2 piso ",-1))]),a("span",Wa,[a("strong",null,n(s.value.project?.m2Parede||0),1),e[59]||(e[59]=y(" m2 parede ",-1))])])]),a("div",Ya,[(i(),l(g,null,f(Ce,t=>a("button",{key:t.id,class:b(["tab-btn",{"tab-btn--active":I.value===t.id}]),onClick:r=>I.value=t.id},[a("span",at,n(t.icon),1),y(" "+n(t.label),1)],10,et)),64))]),a("div",tt,[I.value==="visao-geral"?(i(),l("div",ot,[e[61]||(e[61]=a("h3",{class:"section-title"},"Checklist de Preparacao",-1)),a("div",st,[(i(),l(g,null,f(ye,t=>a("div",{key:t.field,class:b(["checklist-item",{"checklist-item--completed":pe(t.field)}]),onClick:r=>De(t.field)},[a("div",nt,[pe(t.field)?(i(),l("svg",it,[...e[60]||(e[60]=[a("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):d("",!0)]),a("div",rt,[a("span",dt,n(t.label),1),t.dateField&&me(t.dateField)?(i(),l("span",ct,n(_e(me(t.dateField))),1)):d("",!0)]),a("div",ut,n(t.icon),1)],10,lt)),64))]),e[62]||(e[62]=a("h3",{class:"section-title"},"Progresso Geral",-1)),a("div",vt,[a("div",pt,[a("div",{class:"progress-bar__fill",style:$({width:J(s.value)+"%"})},null,4)]),a("span",mt,n(J(s.value))+"% completo",1)])])):d("",!0),I.value==="cronograma"?(i(),l("div",_t,[a("div",At,[e[63]||(e[63]=a("h3",{class:"section-title"},"Tarefas",-1)),a("div",bt,[a("button",{class:"btn btn--small btn--outline",onClick:ue}," âš™ï¸ Gerar Padrao "),a("button",{class:"btn btn--small btn--primary",onClick:e[7]||(e[7]=t=>q.value=!0)}," + Nova Tarefa ")])]),a("div",Et,[(i(!0),l(g,null,f(P.value,(t,r)=>(i(),l("div",{key:t.id,class:b(["tarefa-card",{"tarefa-card--completed":t.status==="CONCLUIDA"}])},[a("div",gt,n(r+1),1),a("div",ft,[a("div",Ct,[a("span",{class:b(["tarefa-card__tipo",Ze(t.tipo)])},n(Xe(t.tipo)),3),a("select",{class:"tarefa-card__status-select",value:t.status,onChange:j=>Ve(t,j.target.value)},[...e[64]||(e[64]=[a("option",{value:"PENDENTE"},"Pendente",-1),a("option",{value:"EM_ANDAMENTO"},"Em Andamento",-1),a("option",{value:"CONCLUIDA"},"Concluida",-1),a("option",{value:"BLOQUEADA"},"Bloqueada",-1)])],40,yt)]),a("h4",kt,n(t.titulo),1),a("div",It,[t.dataAgendada?(i(),l("span",Tt,[y(" ðŸ“… "+n(_e(t.dataAgendada))+" ",1),t.horaAgendada?(i(),l("span",Ot," - "+n(t.horaAgendada),1)):d("",!0)])):d("",!0),t.responsavelNome?(i(),l("span",ht," ðŸ‘¤ "+n(t.responsavelNome),1)):d("",!0)])]),a("div",Nt,[a("button",{class:"btn-icon",onClick:j=>Me(t),title:"Editar"}," âœï¸ ",8,Rt),a("button",{class:"btn-icon btn-icon--danger",onClick:j=>Ue(t),title:"Excluir"}," ðŸ—‘ï¸ ",8,Pt)])],2))),128)),P.value.length===0?(i(),l("div",wt,[e[65]||(e[65]=a("span",{class:"empty-state__icon"},"ðŸ“‹",-1)),e[66]||(e[66]=a("p",null,"Nenhuma tarefa cadastrada",-1)),a("button",{class:"btn btn--primary",onClick:ue}," Gerar Tarefas Padrao ")])):d("",!0)])])):d("",!0),I.value==="materiais"?(i(),l("div",Dt,[a("div",Mt,[e[70]||(e[70]=a("h3",{class:"calculator-widget__title"},"Calculadora de Materiais",-1)),a("div",St,[a("div",Vt,[e[67]||(e[67]=a("span",{class:"label"},"m2 Piso",-1)),a("span",Ut,n(s.value.project?.m2Piso||0),1)]),a("div",xt,[e[68]||(e[68]=a("span",{class:"label"},"m2 Parede",-1)),a("span",Lt,n(s.value.project?.m2Parede||0),1)]),a("div",Ft,[e[69]||(e[69]=a("span",{class:"label"},"m2 Total",-1)),a("span",jt,n(s.value.project?.m2Total||0),1)])]),a("button",{class:"btn btn--gold",onClick:xe,disabled:H.value},n(H.value?"Calculando...":"âš™ï¸ Calcular Materiais"),9,$t)]),a("div",Bt,[e[71]||(e[71]=a("h3",{class:"section-title"},"Provisionamentos",-1)),a("button",{class:"btn btn--small btn--primary",onClick:e[8]||(e[8]=t=>R.value=!0)}," + Adicionar Item ")]),a("div",Gt,[(i(),l(g,null,f(ke,t=>a("button",{key:t.value,class:b(["materiais-tab",{"materiais-tab--active":x.value===t.value}]),onClick:r=>x.value=t.value},[y(n(t.label)+" ",1),a("span",qt,n($e(t.value)),1)],10,zt)),64))]),a("div",Ht,[(i(!0),l(g,null,f(ie.value,t=>(i(),l("div",{key:t.id,class:b(["prov-card",Je(t.status)])},[a("div",Qt,n(Ke(t.tipo)),1),a("div",Xt,[a("h4",Zt,n(t.nome),1),a("div",Kt,[a("strong",null,n(t.quantidade),1),y(" "+n(t.unidade)+" ",1),t.baseadoEmM2?(i(),l("span",Jt,"Auto")):d("",!0)])]),a("div",Wt,[a("select",{class:"prov-status-select",value:t.status,onChange:r=>Fe(t,r.target.value)},[...e[72]||(e[72]=[a("option",{value:"PENDENTE"},"Pendente",-1),a("option",{value:"SOLICITADO"},"Solicitado",-1),a("option",{value:"EM_TRANSITO"},"Em Transito",-1),a("option",{value:"RECEBIDO"},"Recebido",-1)])],40,Yt)]),a("button",{class:"btn-icon btn-icon--danger",onClick:r=>je(t)}," ðŸ—‘ï¸ ",8,eo)],2))),128)),ie.value.length===0?(i(),l("div",ao,[e[73]||(e[73]=a("span",{class:"empty-state__icon"},"ðŸ“¦",-1)),a("p",null,"Nenhum item "+n(x.value!=="ALL"?"deste tipo":""),1)])):d("",!0)])])):d("",!0),I.value==="cores"?(i(),l("div",to,[a("div",oo,[e[74]||(e[74]=a("h3",{class:"section-title"},"Amostras de Cor",-1)),a("button",{class:"btn btn--small btn--primary",onClick:e[9]||(e[9]=t=>O.value=!0)}," + Nova Amostra ")]),L.value?(i(),l("div",so,[e[75]||(e[75]=a("div",{class:"cor-selecionada__badge"},"âœ… Cor Definida",-1)),a("div",{class:"cor-selecionada__swatch",style:$({backgroundColor:L.value.corHex||"#c9a962"})},null,4),a("div",lo,[a("h4",null,n(L.value.corNome),1),L.value.corCodigo?(i(),l("span",no,"Codigo: "+n(L.value.corCodigo),1)):d("",!0)])])):d("",!0),a("div",io,[(i(!0),l(g,null,f(w.value,t=>(i(),l("div",{key:t.id,class:b(["amostra-card",{"amostra-card--selected":t.selecionadaFinal}])},[a("div",{class:"amostra-card__swatch",style:$({backgroundColor:t.corHex||"#ccc"})},null,4),a("div",ro,[a("h4",co,n(t.corNome),1),t.corCodigo?(i(),l("span",uo,n(t.corCodigo),1)):d("",!0)]),a("div",vo,[(i(),l(g,null,f(Ie,r=>a("span",{key:r.status,class:b(["workflow-step",{"workflow-step--completed":He(t,r.status),"workflow-step--current":t.status===r.status}])},n(r.label),3)),64))]),a("div",po,[a("select",{class:"amostra-status-select",value:t.status,onChange:r=>Ge(t,r.target.value),disabled:t.selecionadaFinal},[...e[76]||(e[76]=[W('<option value="AMOSTRA_PENDENTE" data-v-033d88ea>Pendente</option><option value="ENVIADA" data-v-033d88ea>Enviada</option><option value="RECEBIDA" data-v-033d88ea>Recebida</option><option value="EM_AVALIACAO" data-v-033d88ea>Em Avaliacao</option><option value="APROVADA" data-v-033d88ea>Aprovada</option><option value="REJEITADA" data-v-033d88ea>Rejeitada</option>',6)])],40,mo),!t.selecionadaFinal&&t.status==="APROVADA"?(i(),l("button",{key:0,class:"btn btn--small btn--gold",onClick:r=>ze(t)}," Selecionar ",8,_o)):d("",!0),t.selecionadaFinal?d("",!0):(i(),l("button",{key:1,class:"btn-icon btn-icon--danger",onClick:r=>qe(t)}," ðŸ—‘ï¸ ",8,Ao))])],2))),128)),w.value.length===0?(i(),l("div",bo,[e[77]||(e[77]=a("span",{class:"empty-state__icon"},"ðŸŽ¨",-1)),e[78]||(e[78]=a("p",null,"Nenhuma amostra cadastrada",-1)),a("button",{class:"btn btn--primary",onClick:e[10]||(e[10]=t=>O.value=!0)}," Adicionar Amostra ")])):d("",!0)])])):d("",!0)])])):(i(),l("main",Eo,[...e[79]||(e[79]=[a("div",{class:"empty-detail"},[a("span",{class:"empty-detail__icon"},"ðŸ“‹"),a("h3",null,"Selecione uma Pre-Obra"),a("p",null,"Escolha um item da lista para ver os detalhes")],-1)])]))]),T.value?(i(),l("div",{key:0,class:"modal-overlay",onClick:e[22]||(e[22]=M(t=>T.value=!1,["self"]))},[a("div",go,[a("div",fo,[e[80]||(e[80]=a("h3",null,"Nova Pre-Obra",-1)),a("button",{class:"modal__close",onClick:e[11]||(e[11]=t=>T.value=!1)},"Ã—")]),a("div",Co,[a("div",yo,[a("button",{class:b(["mode-tab",{"mode-tab--active":C.value==="manual"}]),onClick:e[12]||(e[12]=t=>C.value="manual")}," Criar Manualmente ",2),a("button",{class:b(["mode-tab",{"mode-tab--active":C.value==="select"}]),onClick:e[13]||(e[13]=t=>C.value="select")}," Selecionar Projeto ",2)]),C.value==="manual"?(i(),l("div",ko,[a("div",Io,[e[81]||(e[81]=a("label",null,"Cliente *",-1)),v(a("input",{type:"text","onUpdate:modelValue":e[14]||(e[14]=t=>u.value.cliente=t),placeholder:"Nome do cliente"},null,512),[[m,u.value.cliente]])]),a("div",To,[e[82]||(e[82]=a("label",null,"Endereco",-1)),v(a("input",{ref_key:"addressInput",ref:te,type:"text","onUpdate:modelValue":e[15]||(e[15]=t=>u.value.endereco=t),placeholder:"Digite o endereco...",autocomplete:"off"},null,512),[[m,u.value.endereco]])]),a("div",Oo,[a("div",ho,[e[83]||(e[83]=a("label",null,"m2 Total",-1)),v(a("input",{type:"number","onUpdate:modelValue":e[16]||(e[16]=t=>u.value.m2Total=t),min:"0",step:"0.01"},null,512),[[m,u.value.m2Total]])]),a("div",No,[e[84]||(e[84]=a("label",null,"m2 Piso",-1)),v(a("input",{type:"number","onUpdate:modelValue":e[17]||(e[17]=t=>u.value.m2Piso=t),min:"0",step:"0.01"},null,512),[[m,u.value.m2Piso]])]),a("div",Ro,[e[85]||(e[85]=a("label",null,"m2 Parede",-1)),v(a("input",{type:"number","onUpdate:modelValue":e[18]||(e[18]=t=>u.value.m2Parede=t),min:"0",step:"0.01"},null,512),[[m,u.value.m2Parede]])])]),a("div",Po,[e[86]||(e[86]=a("label",null,"Cor (opcional)",-1)),v(a("input",{type:"text","onUpdate:modelValue":e[19]||(e[19]=t=>u.value.cor=t),placeholder:"Ex: Cinza Urbano"},null,512),[[m,u.value.cor]])])])):d("",!0),C.value==="select"?(i(),l("div",wo,[a("div",Do,[e[87]||(e[87]=a("label",null,"Selecione o Projeto",-1)),v(a("select",{"onUpdate:modelValue":e[20]||(e[20]=t=>h.value=t),disabled:U.value},[a("option",So,n(U.value?"Carregando...":"Selecione um projeto"),1),(i(!0),l(g,null,f(ae.value,t=>(i(),l("option",{key:t.id,value:t.id},n(t.cliente)+" - "+n(t.endereco),9,Vo))),128))],8,Mo),[[Y,h.value]]),ae.value.length===0&&!U.value?(i(),l("p",Uo,' Nenhum projeto disponivel. Use "Criar Manualmente". ')):d("",!0)])])):d("",!0)]),a("div",xo,[a("button",{class:"btn btn--outline",onClick:e[21]||(e[21]=t=>T.value=!1)},"Cancelar"),a("button",{class:"btn btn--primary",onClick:we,disabled:C.value==="select"&&!h.value||C.value==="manual"&&!u.value.cliente}," Criar Pre-Obra ",8,Lo)])])])):d("",!0),q.value?(i(),l("div",{key:1,class:"modal-overlay",onClick:M(K,["self"])},[a("div",Fo,[a("div",jo,[a("h3",null,n(D.value?"Editar Tarefa":"Nova Tarefa"),1),a("button",{class:"modal__close",onClick:K},"Ã—")]),a("div",$o,[a("div",Bo,[e[88]||(e[88]=a("label",null,"Titulo",-1)),v(a("input",{type:"text","onUpdate:modelValue":e[23]||(e[23]=t=>_.value.titulo=t),placeholder:"Titulo da tarefa"},null,512),[[m,_.value.titulo]])]),a("div",Go,[a("div",zo,[e[90]||(e[90]=a("label",null,"Tipo",-1)),v(a("select",{"onUpdate:modelValue":e[24]||(e[24]=t=>_.value.tipo=t)},[...e[89]||(e[89]=[W('<option value="CUSTOM" data-v-033d88ea>Personalizado</option><option value="VISITA_TECNICA_AFERICAO" data-v-033d88ea>Visita Tecnica</option><option value="REUNIAO_ORIENTATIVA" data-v-033d88ea>Reuniao Orientativa</option><option value="ENVIO_AMOSTRAS" data-v-033d88ea>Envio Amostras</option><option value="DEFINICAO_COR" data-v-033d88ea>Definicao de Cor</option><option value="PREPARACAO_CLIENTE" data-v-033d88ea>Preparacao Cliente</option><option value="ENVIO_MATERIAIS" data-v-033d88ea>Envio Materiais</option><option value="CONFIRMACAO_RECEBIMENTO" data-v-033d88ea>Confirmacao Recebimento</option>',8)])],512),[[Y,_.value.tipo]])]),a("div",qo,[e[91]||(e[91]=a("label",null,"Responsavel",-1)),v(a("input",{type:"text","onUpdate:modelValue":e[25]||(e[25]=t=>_.value.responsavelNome=t),placeholder:"Nome do responsavel"},null,512),[[m,_.value.responsavelNome]])])]),a("div",Ho,[a("div",Qo,[e[92]||(e[92]=a("label",null,"Data",-1)),v(a("input",{type:"date","onUpdate:modelValue":e[26]||(e[26]=t=>_.value.dataAgendada=t)},null,512),[[m,_.value.dataAgendada]])]),a("div",Xo,[e[93]||(e[93]=a("label",null,"Hora",-1)),v(a("input",{type:"time","onUpdate:modelValue":e[27]||(e[27]=t=>_.value.horaAgendada=t)},null,512),[[m,_.value.horaAgendada]])])]),a("div",Zo,[e[94]||(e[94]=a("label",null,"Observacoes",-1)),v(a("textarea",{"onUpdate:modelValue":e[28]||(e[28]=t=>_.value.observacoes=t),rows:"3",placeholder:"Observacoes..."},null,512),[[m,_.value.observacoes]])])]),a("div",Ko,[a("button",{class:"btn btn--outline",onClick:K},"Cancelar"),a("button",{class:"btn btn--primary",onClick:Se,disabled:!_.value.titulo},n(D.value?"Salvar":"Criar"),9,Jo)])])])):d("",!0),R.value?(i(),l("div",{key:2,class:"modal-overlay",onClick:e[36]||(e[36]=M(t=>R.value=!1,["self"]))},[a("div",Wo,[a("div",Yo,[e[95]||(e[95]=a("h3",null,"Novo Item",-1)),a("button",{class:"modal__close",onClick:e[29]||(e[29]=t=>R.value=!1)},"Ã—")]),a("div",es,[a("div",as,[a("div",ts,[e[97]||(e[97]=a("label",null,"Tipo",-1)),v(a("select",{"onUpdate:modelValue":e[30]||(e[30]=t=>A.value.tipo=t)},[...e[96]||(e[96]=[a("option",{value:"MATERIAL"},"Material",-1),a("option",{value:"RECURSO"},"Recurso",-1),a("option",{value:"EQUIPAMENTO"},"Equipamento",-1),a("option",{value:"FERRAMENTA"},"Ferramenta",-1)])],512),[[Y,A.value.tipo]])]),a("div",os,[e[98]||(e[98]=a("label",null,"Nome",-1)),v(a("input",{type:"text","onUpdate:modelValue":e[31]||(e[31]=t=>A.value.nome=t),placeholder:"Nome do item"},null,512),[[m,A.value.nome]])])]),a("div",ss,[a("div",ls,[e[99]||(e[99]=a("label",null,"Quantidade",-1)),v(a("input",{type:"number","onUpdate:modelValue":e[32]||(e[32]=t=>A.value.quantidade=t),min:"0",step:"0.01"},null,512),[[m,A.value.quantidade]])]),a("div",ns,[e[101]||(e[101]=a("label",null,"Unidade",-1)),v(a("select",{"onUpdate:modelValue":e[33]||(e[33]=t=>A.value.unidade=t)},[...e[100]||(e[100]=[W('<option value="un" data-v-033d88ea>Unidade</option><option value="kg" data-v-033d88ea>Quilograma</option><option value="litros" data-v-033d88ea>Litros</option><option value="m2" data-v-033d88ea>m2</option><option value="m" data-v-033d88ea>Metro</option>',5)])],512),[[Y,A.value.unidade]])])]),a("div",is,[e[102]||(e[102]=a("label",null,"Fornecedor (opcional)",-1)),v(a("input",{type:"text","onUpdate:modelValue":e[34]||(e[34]=t=>A.value.fornecedor=t),placeholder:"Nome do fornecedor"},null,512),[[m,A.value.fornecedor]])])]),a("div",rs,[a("button",{class:"btn btn--outline",onClick:e[35]||(e[35]=t=>R.value=!1)},"Cancelar"),a("button",{class:"btn btn--primary",onClick:Le,disabled:!A.value.nome||!A.value.quantidade}," Adicionar ",8,ds)])])])):d("",!0),O.value?(i(),l("div",{key:3,class:"modal-overlay",onClick:e[43]||(e[43]=M(t=>O.value=!1,["self"]))},[a("div",cs,[a("div",us,[e[103]||(e[103]=a("h3",null,"Nova Amostra de Cor",-1)),a("button",{class:"modal__close",onClick:e[37]||(e[37]=t=>O.value=!1)},"Ã—")]),a("div",vs,[a("div",ps,[e[104]||(e[104]=a("label",null,"Nome da Cor",-1)),v(a("input",{type:"text","onUpdate:modelValue":e[38]||(e[38]=t=>E.value.corNome=t),placeholder:"Ex: Cinza Urbano"},null,512),[[m,E.value.corNome]])]),a("div",ms,[a("div",_s,[e[105]||(e[105]=a("label",null,"Codigo (opcional)",-1)),v(a("input",{type:"text","onUpdate:modelValue":e[39]||(e[39]=t=>E.value.corCodigo=t),placeholder:"Ex: CZ-001"},null,512),[[m,E.value.corCodigo]])]),a("div",As,[e[106]||(e[106]=a("label",null,"Cor (hex)",-1)),a("div",bs,[v(a("input",{type:"color","onUpdate:modelValue":e[40]||(e[40]=t=>E.value.corHex=t),class:"color-picker"},null,512),[[m,E.value.corHex]]),v(a("input",{type:"text","onUpdate:modelValue":e[41]||(e[41]=t=>E.value.corHex=t),class:"color-text"},null,512),[[m,E.value.corHex]])])])])]),a("div",Es,[a("button",{class:"btn btn--outline",onClick:e[42]||(e[42]=t=>O.value=!1)},"Cancelar"),a("button",{class:"btn btn--primary",onClick:Be,disabled:!E.value.corNome}," Adicionar ",8,gs)])])])):d("",!0)]))}}),ks=aa(fs,[["__scopeId","data-v-033d88ea"]]);export{ks as default};

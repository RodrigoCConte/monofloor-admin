import{d as A,u as M,j as S,r as c,k as T,c as d,b as e,e as x,a as h,m as V,n as L,p as I,t as l,q as w,F as $,y as O,s as U,w as q,f as m,v as b,x as z,a1 as f,o as r,i as G,_ as R}from"./index-DSpoN4fH.js";const j={class:"scheduling-page"},P={class:"page-header"},Y={class:"header-right"},W={class:"toolbar"},J={class:"year-selector"},K={class:"year-display"},Q={class:"toolbar-actions"},X=["disabled"],Z={key:0,class:"loading-container"},ee={key:1,class:"holidays-grid"},te={key:0,class:"empty-state"},ae={class:"holiday-date"},oe={class:"day"},se={class:"month"},le={class:"holiday-info"},ie={class:"weekday"},ne={key:0,class:"description"},de={class:"holiday-type"},re={class:"holiday-actions"},ue=["onClick"],ve=["onClick"],ce={class:"modal"},pe={class:"modal-header"},ye={class:"modal-body"},fe={class:"form-group"},me={class:"form-group"},ge={class:"form-group"},ke={class:"form-group"},xe={class:"modal-footer"},we=["disabled"],be=A({__name:"Scheduling",setup(Ce){G(),M();const i=S(),g=c(!0),u=c(!1),k=c([]),n=c(new Date().getFullYear()),v=c(!1),y=c(null),s=c({date:"",name:"",description:"",type:"NATIONAL"}),p=async()=>{g.value=!0;try{const o=await f.getHolidays({year:n.value});k.value=o.data.data||[]}catch(o){console.error("Error loading holidays:",o),i.error("Erro ao carregar feriados")}finally{g.value=!1}},C=async()=>{u.value=!0;try{await f.seedHolidays(n.value),i.success(`Feriados de ${n.value} criados com sucesso`),await p()}catch(o){i.error(o.response?.data?.error?.message||"Erro ao criar feriados")}finally{u.value=!1}},_=()=>{y.value=null,s.value={date:"",name:"",description:"",type:"NATIONAL"},v.value=!0},N=o=>{y.value=o,s.value={date:new Date(o.date).toISOString().split("T")[0]||"",name:o.name,description:o.description||"",type:o.type},v.value=!0},B=async()=>{if(!s.value.date||!s.value.name){i.warning("Preencha a data e o nome do feriado");return}u.value=!0;try{y.value?(await f.updateHoliday(y.value.id,s.value),i.success("Feriado atualizado")):(await f.createHoliday(s.value),i.success("Feriado criado")),v.value=!1,await p()}catch(o){i.error(o.response?.data?.error?.message||"Erro ao salvar feriado")}finally{u.value=!1}},D=async o=>{if(confirm("Deseja excluir este feriado?"))try{await f.deleteHoliday(o),i.success("Feriado excluido"),await p()}catch{i.error("Erro ao excluir feriado")}},E=o=>new Date(o).toLocaleDateString("pt-BR",{weekday:"long"});return T(p),(o,t)=>{const F=I("router-link");return r(),d("div",j,[e("header",P,[t[10]||(t[10]=h('<div class="header-left" data-v-4538d9d2><div class="title-section" data-v-4538d9d2><div class="icon-wrapper" data-v-4538d9d2><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-4538d9d2><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-v-4538d9d2></rect><line x1="16" y1="2" x2="16" y2="6" data-v-4538d9d2></line><line x1="8" y1="2" x2="8" y2="6" data-v-4538d9d2></line><line x1="3" y1="10" x2="21" y2="10" data-v-4538d9d2></line></svg></div><div data-v-4538d9d2><h1 data-v-4538d9d2>Feriados</h1><p class="subtitle" data-v-4538d9d2>Gerencie os feriados em que as equipes nao trabalham</p></div></div></div>',1)),e("div",Y,[V(F,{to:"/",class:"btn-back"},{default:L(()=>[...t[9]||(t[9]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"15 18 9 12 15 6"})],-1),w(" Voltar ",-1)])]),_:1})])]),e("div",W,[e("div",J,[e("button",{onClick:t[0]||(t[0]=a=>{n.value--,p()}),class:"btn-year"},[...t[11]||(t[11]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"15 18 9 12 15 6"})],-1)])]),e("span",K,l(n.value),1),e("button",{onClick:t[1]||(t[1]=a=>{n.value++,p()}),class:"btn-year"},[...t[12]||(t[12]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"9 18 15 12 9 6"})],-1)])])]),e("div",Q,[e("button",{onClick:C,class:"btn-seed",disabled:u.value},[t[13]||(t[13]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 12a9 9 0 11-6.219-8.56"})],-1)),w(" Gerar Feriados "+l(n.value),1)],8,X),e("button",{onClick:_,class:"btn-add"},[...t[14]||(t[14]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),w(" Novo Feriado ",-1)])])])]),g.value?(r(),d("div",Z,[...t[15]||(t[15]=[e("div",{class:"spinner"},null,-1),e("p",null,"Carregando feriados...",-1)])])):(r(),d("div",ee,[k.value.length===0?(r(),d("div",te,[t[16]||(t[16]=h('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-4538d9d2><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-v-4538d9d2></rect><line x1="16" y1="2" x2="16" y2="6" data-v-4538d9d2></line><line x1="8" y1="2" x2="8" y2="6" data-v-4538d9d2></line><line x1="3" y1="10" x2="21" y2="10" data-v-4538d9d2></line></svg>',1)),e("p",null,"Nenhum feriado cadastrado para "+l(n.value),1),e("button",{onClick:C,class:"btn-seed-empty"}," Gerar Feriados Automaticamente ")])):x("",!0),(r(!0),d($,null,O(k.value,a=>(r(),d("div",{key:a.id,class:"holiday-card"},[e("div",ae,[e("span",oe,l(new Date(a.date).getDate()),1),e("span",se,l(new Date(a.date).toLocaleDateString("pt-BR",{month:"short"})),1)]),e("div",le,[e("h3",null,l(a.name),1),e("p",ie,l(E(a.date)),1),a.description?(r(),d("p",ne,l(a.description),1)):x("",!0)]),e("div",de,[e("span",{class:U(["badge",a.type.toLowerCase()])},l(a.type==="NATIONAL"?"Nacional":a.type==="STATE"?"Estadual":"Municipal"),3)]),e("div",re,[e("button",{onClick:H=>N(a),class:"btn-edit",title:"Editar"},[...t[17]||(t[17]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,ue),e("button",{onClick:H=>D(a.id),class:"btn-delete",title:"Excluir"},[...t[18]||(t[18]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])],8,ve)])]))),128))])),v.value?(r(),d("div",{key:2,class:"modal-overlay",onClick:t[8]||(t[8]=q(a=>v.value=!1,["self"]))},[e("div",ce,[e("div",pe,[e("h2",null,l(y.value?"Editar Feriado":"Novo Feriado"),1),e("button",{onClick:t[2]||(t[2]=a=>v.value=!1),class:"btn-close"},[...t[19]||(t[19]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),e("div",ye,[e("div",fe,[t[20]||(t[20]=e("label",null,"Data",-1)),m(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=a=>s.value.date=a),class:"form-input"},null,512),[[b,s.value.date]])]),e("div",me,[t[21]||(t[21]=e("label",null,"Nome do Feriado",-1)),m(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=a=>s.value.name=a),class:"form-input",placeholder:"Ex: Natal"},null,512),[[b,s.value.name]])]),e("div",ge,[t[22]||(t[22]=e("label",null,"Descricao (opcional)",-1)),m(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=a=>s.value.description=a),class:"form-input",placeholder:"Descricao adicional"},null,512),[[b,s.value.description]])]),e("div",ke,[t[24]||(t[24]=e("label",null,"Tipo",-1)),m(e("select",{"onUpdate:modelValue":t[6]||(t[6]=a=>s.value.type=a),class:"form-input"},[...t[23]||(t[23]=[e("option",{value:"NATIONAL"},"Nacional",-1),e("option",{value:"STATE"},"Estadual",-1),e("option",{value:"MUNICIPAL"},"Municipal",-1)])],512),[[z,s.value.type]])])]),e("div",xe,[e("button",{onClick:t[7]||(t[7]=a=>v.value=!1),class:"btn-cancel"},"Cancelar"),e("button",{onClick:B,class:"btn-save",disabled:u.value},l(u.value?"Salvando...":"Salvar"),9,we)])])])):x("",!0)])}}}),_e=R(be,[["__scopeId","data-v-4538d9d2"]]);export{_e as default};

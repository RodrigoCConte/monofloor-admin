import{d as ye,r as v,D as W,$ as f,k as be,c as n,b as e,U as L,m as N,s as u,a as Z,F as h,y as C,z as Q,a0 as ke,t as i,w as R,q as g,e as p,f as y,v as x,x as X,n as P,V as U,W as Y,o as l,J as me,_ as he}from"./index-DSpoN4fH.js";const Ce={class:"posvenda-module"},ge={class:"module-header"},xe={class:"header-content"},_e={class:"header-actions"},we={class:"stats-section"},Ve={class:"stats-grid"},Ae={class:"stat-content"},De={class:"stat-value"},Qe={class:"stat-label"},Ee={key:0,class:"kanban-section"},Se={class:"kanban-container"},Te=["onDrop"],$e={class:"column-header"},Be={class:"column-title"},Ne={class:"column-count"},Pe={class:"column-cards"},Ue=["onDragstart","onClick"],Me={class:"card-header"},Oe={class:"card-client"},je={class:"card-address"},Ie={class:"card-info"},Re={key:0,class:"info-item"},ze={key:1,class:"info-item"},Fe={key:0,class:"card-satisfaction"},Le={class:"satisfaction-stars"},Je={key:1,class:"list-section"},qe={class:"list-filters"},Ge={class:"search-box"},He=["value"],Ke={class:"list-table"},We=["onClick"],Ze={class:"client-cell"},Xe={class:"client-name"},Ye={class:"client-address"},et={key:0,class:"satisfaction-stars small"},tt={key:1,class:"no-rating"},st={class:"action-cell"},at=["onClick"],ot={class:"detail-panel"},lt={class:"panel-header"},nt={class:"panel-title"},it={class:"panel-tabs"},rt={class:"panel-content"},dt={key:0,class:"tab-content"},ut={class:"panel-section"},vt={class:"section-header"},ct={key:0,class:"add-form"},pt={class:"form-row"},ft={class:"form-group"},yt={class:"form-group"},bt={class:"form-group"},kt={class:"form-actions"},mt={class:"vq-list"},ht={class:"vq-date"},Ct={class:"day"},gt={class:"month"},xt={class:"vq-info"},_t={class:"vq-title"},wt={class:"vq-responsavel"},Vt={key:0,class:"vq-resultado"},At={class:"vq-status"},Dt=["onClick"],Qt={key:0,class:"empty-state"},Et={key:1,class:"tab-content"},St={class:"panel-section"},Tt={class:"section-header"},$t={key:0,class:"add-form"},Bt={class:"form-group"},Nt={class:"form-group"},Pt={class:"form-row"},Ut={class:"form-group"},Mt={class:"form-group"},Ot={class:"form-actions"},jt={class:"intervencao-list"},It={class:"intervencao-info"},Rt={class:"intervencao-motivo"},zt={class:"intervencao-date"},Ft={class:"intervencao-status"},Lt={key:0,class:"status-concluida"},Jt=["onClick"],qt={key:0,class:"empty-state"},Gt={key:2,class:"tab-content"},Ht={class:"panel-section"},Kt={class:"satisfaction-selector"},Wt={class:"star-selector"},Zt=["onClick"],Xt={class:"form-group"},Yt={class:"checkbox-group"},es={class:"checkbox-label"},ts={class:"form-group"},ss={class:"panel-section"},as={class:"status-flow"},os=["onClick"],ls={class:"modal-content"},ns={class:"modal-header"},is={class:"modal-body"},rs={class:"form-group"},ds={class:"result-buttons"},us={class:"form-group"},vs={class:"modal-footer"},cs={key:0,class:"loading-overlay"},ps=ye({__name:"PosVenda",setup(fs){const c=v(!1),E=v("kanban"),M=v(""),O=v(""),w=v([]),o=v(null),k=v("visitas"),S=v(null),T=v(!1),A=v(!1),D=v(!1),j=v(null),_=v({dataAgendada:"",responsavel:"",observacoes:""}),m=v({tipo:"RETOQUE",motivo:"",dataPrevista:"",responsavel:""}),b=v({aprovada:!0,resultado:""}),$=v({acompanhamento:0,visitas:0,intervencoes:0,concluidos:0}),B=[{id:"ACOMPANHAMENTO",label:"Acompanhamento",color:"#3b82f6"},{id:"VISITA_AGENDADA",label:"VQ Agendada",color:"#8b5cf6"},{id:"AGUARDANDO_INTERVENCAO",label:"Aguardando Intervencao",color:"#f59e0b"},{id:"EM_INTERVENCAO",label:"Em Intervencao",color:"#f97316"},{id:"CONCLUIDO",label:"Concluido",color:"#22c55e"}],ee=W(()=>[{label:"Em Acompanhamento",value:$.value.acompanhamento,icon:f("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[f("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),f("circle",{cx:"12",cy:"12",r:"3"})]),iconClass:"watching"},{label:"Visitas Agendadas",value:$.value.visitas,icon:f("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[f("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),f("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),f("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),f("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]),iconClass:"visits"},{label:"Em Intervencao",value:$.value.intervencoes,icon:f("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[f("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})]),iconClass:"intervening"},{label:"Concluidos",value:$.value.concluidos,icon:f("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[f("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),f("polyline",{points:"22 4 12 14.01 9 11.01"})]),iconClass:"completed"}]),te=W(()=>{let a=[...w.value];if(M.value){const t=M.value.toLowerCase();a=a.filter(s=>s.project?.cliente?.toLowerCase().includes(t))}return O.value&&(a=a.filter(t=>t.status===O.value)),a});function se(a){return a?new Date(a).toLocaleDateString("pt-BR"):"-"}function ae(a){return new Date(a).getDate().toString().padStart(2,"0")}function oe(a){return new Date(a).toLocaleDateString("pt-BR",{month:"short"}).replace(".","")}function J(a){return w.value.filter(t=>t.status===a)}function q(a){return B.find(t=>t.id===a)?.color||"#6b7280"}function G(a){return B.find(t=>t.id===a)?.label||a}function I(a){const t=new Date(a.updatedAt);return Math.floor((new Date().getTime()-t.getTime())/(1e3*60*60*24))}function le(a){o.value&&(o.value.satisfacaoCliente=a)}function ne(a,t){S.value=t,a.dataTransfer&&(a.dataTransfer.effectAllowed="move")}async function ie(a,t){a.preventDefault(),S.value&&S.value.status!==t&&await K(S.value.id,t),S.value=null}async function H(){try{const t=await(await fetch("/api/admin/posvenda/stats")).json();t.success&&($.value=t.stats)}catch(a){console.error("Error fetching stats:",a)}}async function re(){c.value=!0;try{const t=await(await fetch("/api/admin/posvenda")).json();t.success&&(w.value=t.data)}catch(a){console.error("Error fetching pos-venda:",a)}finally{c.value=!1}}async function K(a,t){c.value=!0;try{if((await(await fetch(`/api/admin/posvenda/${a}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})})).json()).success){const d=w.value.find(V=>V.id===a);d&&(d.status=t),o.value?.id===a&&(o.value.status=t),await H()}}catch(s){console.error("Error changing status:",s)}finally{c.value=!1}}async function de(){if(o.value){c.value=!0;try{const t=await(await fetch(`/api/admin/posvenda/${o.value.id}/vq`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_.value)})).json();t.success&&(o.value.visitasQualidade||(o.value.visitasQualidade=[]),o.value.visitasQualidade.push(t.data),T.value=!1,_.value={dataAgendada:"",responsavel:"",observacoes:""})}catch(a){console.error("Error creating VQ:",a)}finally{c.value=!1}}}function ue(a){j.value=a,b.value={aprovada:!0,resultado:""},D.value=!0}async function ve(){if(j.value){c.value=!0;try{if((await(await fetch(`/api/admin/posvenda/vq/${j.value.id}/complete`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b.value)})).json()).success&&o.value?.visitasQualidade){const s=o.value.visitasQualidade.find(r=>r.id===j.value.id);s&&(s.realizada=!0,s.aprovada=b.value.aprovada,s.resultado=b.value.resultado),D.value=!1,b.value.aprovada||(A.value=!0,m.value.motivo=`Reprovacao VQ: ${b.value.resultado}`,k.value="intervencoes")}}catch(a){console.error("Error completing VQ:",a)}finally{c.value=!1}}}async function ce(){if(o.value){c.value=!0;try{const t=await(await fetch(`/api/admin/posvenda/${o.value.id}/intervencao`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m.value)})).json();t.success&&(o.value.intervencoes||(o.value.intervencoes=[]),o.value.intervencoes.push(t.data),A.value=!1,m.value={tipo:"RETOQUE",motivo:"",dataPrevista:"",responsavel:""})}catch(a){console.error("Error creating intervencao:",a)}finally{c.value=!1}}}async function pe(a){c.value=!0;try{if((await(await fetch(`/api/admin/posvenda/intervencao/${a}/complete`,{method:"PUT"})).json()).success&&o.value?.intervencoes){const r=o.value.intervencoes.find(d=>d.id===a);r&&(r.concluida=!0,r.dataConclusao=new Date().toISOString())}}catch(t){console.error("Error completing intervencao:",t)}finally{c.value=!1}}async function fe(){if(o.value){c.value=!0;try{const t=await(await fetch(`/api/admin/posvenda/${o.value.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({satisfacaoCliente:o.value.satisfacaoCliente,feedbackCliente:o.value.feedbackCliente,indicariaEmpresa:o.value.indicariaEmpresa,dataFeedback:o.value.dataFeedback})})).json();if(t.success){const s=w.value.findIndex(r=>r.id===o.value.id);s!==-1&&(w.value[s]={...w.value[s],...t.data}),F()}}catch(a){console.error("Error saving pos-venda:",a)}finally{c.value=!1}}}function z(a){o.value={...a},k.value="visitas"}function F(){o.value=null,T.value=!1,A.value=!1}return be(()=>{H(),re()}),(a,t)=>(l(),n("div",Ce,[e("header",ge,[e("div",xe,[t[30]||(t[30]=e("div",{class:"title-section"},[e("h1",{class:"module-title"},"Pos-Venda"),e("p",{class:"module-subtitle"},"Qualidade e Intervencoes")],-1)),e("div",_e,[e("button",{class:u(["btn-view",{active:E.value==="kanban"}]),onClick:t[0]||(t[0]=s=>E.value="kanban")},[...t[28]||(t[28]=[Z('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-6b3115f2><rect x="3" y="3" width="7" height="7" rx="1" data-v-6b3115f2></rect><rect x="14" y="3" width="7" height="7" rx="1" data-v-6b3115f2></rect><rect x="3" y="14" width="7" height="7" rx="1" data-v-6b3115f2></rect><rect x="14" y="14" width="7" height="7" rx="1" data-v-6b3115f2></rect></svg> Kanban ',2)])],2),e("button",{class:u(["btn-view",{active:E.value==="list"}]),onClick:t[1]||(t[1]=s=>E.value="list")},[...t[29]||(t[29]=[Z('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-6b3115f2><line x1="8" y1="6" x2="21" y2="6" data-v-6b3115f2></line><line x1="8" y1="12" x2="21" y2="12" data-v-6b3115f2></line><line x1="8" y1="18" x2="21" y2="18" data-v-6b3115f2></line><line x1="3" y1="6" x2="3.01" y2="6" data-v-6b3115f2></line><line x1="3" y1="12" x2="3.01" y2="12" data-v-6b3115f2></line><line x1="3" y1="18" x2="3.01" y2="18" data-v-6b3115f2></line></svg> Lista ',2)])],2)])])]),e("section",we,[e("div",Ve,[(l(!0),n(h,null,C(ee.value,(s,r)=>(l(),n("div",{class:"stat-card",key:s.label,style:Q({"--delay":r*.1+"s"})},[e("div",{class:u(["stat-icon",s.iconClass])},[(l(),L(ke(s.icon)))],2),e("div",Ae,[e("span",De,i(s.value),1),e("span",Qe,i(s.label),1)])],4))),128))])]),E.value==="kanban"?(l(),n("section",Ee,[e("div",Se,[(l(),n(h,null,C(B,(s,r)=>e("div",{class:"kanban-column",key:s.id,style:Q({"--column-index":r}),onDragover:t[2]||(t[2]=R(()=>{},["prevent"])),onDrop:d=>ie(d,s.id)},[e("div",$e,[e("div",Be,[e("span",{class:"column-dot",style:Q({background:s.color})},null,4),g(" "+i(s.label),1)]),e("span",Ne,i(J(s.id).length),1)]),e("div",Pe,[(l(!0),n(h,null,C(J(s.id),d=>(l(),n("div",{class:"posvenda-card",key:d.id,draggable:"true",onDragstart:V=>ne(V,d),onClick:V=>z(d)},[e("div",Me,[e("span",Oe,i(d.project?.cliente),1),e("span",{class:u(["card-days",{urgent:I(d)>7}])},i(I(d))+"d ",3)]),e("div",je,[t[31]||(t[31]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e("circle",{cx:"12",cy:"10",r:"3"})],-1)),g(" "+i(d.project?.endereco||"Sem endereco"),1)]),e("div",Ie,[d.visitasQualidade?.length?(l(),n("div",Re,[t[32]||(t[32]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e("polyline",{points:"22 4 12 14.01 9 11.01"})],-1)),g(" "+i(d.visitasQualidade.length)+" VQs ",1)])):p("",!0),d.intervencoes?.length?(l(),n("div",ze,[t[33]||(t[33]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})],-1)),g(" "+i(d.intervencoes.length)+" INT ",1)])):p("",!0)]),d.satisfacaoCliente!==null?(l(),n("div",Fe,[e("div",Le,[(l(),n(h,null,C(5,V=>e("span",{key:V,class:u({filled:V<=(d.satisfacaoCliente??0)})},"★",2)),64))])])):p("",!0)],40,Ue))),128))])],44,Te)),64))])])):(l(),n("section",Je,[e("div",qe,[e("div",Ge,[t[34]||(t[34]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1)),y(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>M.value=s),placeholder:"Buscar por cliente..."},null,512),[[x,M.value]])]),y(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>O.value=s),class:"filter-select"},[t[35]||(t[35]=e("option",{value:""},"Todos os status",-1)),(l(),n(h,null,C(B,s=>e("option",{key:s.id,value:s.id},i(s.label),9,He)),64))],512),[[X,O.value]])]),e("div",Ke,[e("table",null,[t[37]||(t[37]=e("thead",null,[e("tr",null,[e("th",null,"Cliente"),e("th",null,"Status"),e("th",null,"VQs"),e("th",null,"Intervencoes"),e("th",null,"Satisfacao"),e("th",null,"Dias"),e("th")])],-1)),e("tbody",null,[(l(!0),n(h,null,C(te.value,s=>(l(),n("tr",{key:s.id,onClick:r=>z(s)},[e("td",Ze,[e("span",Xe,i(s.project?.cliente),1),e("span",Ye,i(s.project?.endereco),1)]),e("td",null,[e("span",{class:"status-badge",style:Q({"--status-color":q(s.status)})},i(G(s.status)),5)]),e("td",null,i(s.visitasQualidade?.length||0),1),e("td",null,i(s.intervencoes?.length||0),1),e("td",null,[s.satisfacaoCliente!==null?(l(),n("div",et,[(l(),n(h,null,C(5,r=>e("span",{key:r,class:u({filled:r<=(s.satisfacaoCliente??0)})},"★",2)),64))])):(l(),n("span",tt,"-"))]),e("td",{class:u({urgent:I(s)>7})},i(I(s))+"d",3),e("td",st,[e("button",{class:"action-btn",onClick:R(r=>z(s),["stop"])},[...t[36]||(t[36]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1)])],8,at)])],8,We))),128))])])])])),(l(),L(Y,{to:"body"},[N(U,{name:"panel"},{default:P(()=>[o.value?(l(),n("div",{key:0,class:"detail-panel-overlay",onClick:R(F,["self"])},[e("div",ot,[e("div",lt,[e("div",nt,[e("h2",null,i(o.value.project?.cliente),1),e("span",{class:"status-badge",style:Q({"--status-color":q(o.value.status)})},i(G(o.value.status)),5)]),e("button",{class:"close-btn",onClick:F},[...t[38]||(t[38]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),e("div",it,[e("button",{class:u({active:k.value==="visitas"}),onClick:t[5]||(t[5]=s=>k.value="visitas")},"Visitas Qualidade",2),e("button",{class:u({active:k.value==="intervencoes"}),onClick:t[6]||(t[6]=s=>k.value="intervencoes")},"Intervencoes",2),e("button",{class:u({active:k.value==="avaliacao"}),onClick:t[7]||(t[7]=s=>k.value="avaliacao")},"Avaliacao",2)]),e("div",rt,[k.value==="visitas"?(l(),n("div",dt,[e("div",ut,[e("div",vt,[e("h3",null,"Visitas de Qualidade ("+i(o.value.visitasQualidade?.length||0)+")",1),e("button",{class:"btn-small",onClick:t[8]||(t[8]=s=>T.value=!0)},[...t[39]||(t[39]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),g(" Agendar VQ ",-1)])])]),N(U,{name:"slide"},{default:P(()=>[T.value?(l(),n("div",ct,[e("div",pt,[e("div",ft,[t[40]||(t[40]=e("label",null,"Data",-1)),y(e("input",{type:"date","onUpdate:modelValue":t[9]||(t[9]=s=>_.value.dataAgendada=s)},null,512),[[x,_.value.dataAgendada]])]),e("div",yt,[t[41]||(t[41]=e("label",null,"Responsavel",-1)),y(e("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=s=>_.value.responsavel=s)},null,512),[[x,_.value.responsavel]])])]),e("div",bt,[t[42]||(t[42]=e("label",null,"Observacoes",-1)),y(e("textarea",{"onUpdate:modelValue":t[11]||(t[11]=s=>_.value.observacoes=s),rows:"2"},null,512),[[x,_.value.observacoes]])]),e("div",kt,[e("button",{class:"btn-cancel",onClick:t[12]||(t[12]=s=>T.value=!1)},"Cancelar"),e("button",{class:"btn-save",onClick:de},"Agendar")])])):p("",!0)]),_:1}),e("div",mt,[(l(!0),n(h,null,C(o.value.visitasQualidade,s=>(l(),n("div",{class:u(["vq-item",{completed:s.realizada}]),key:s.id},[e("div",ht,[e("span",Ct,i(ae(s.dataAgendada)),1),e("span",gt,i(oe(s.dataAgendada)),1)]),e("div",xt,[e("span",_t,"VQ "+i(s.numero),1),e("span",wt,i(s.responsavel||"Sem responsavel"),1),s.resultado?(l(),n("span",Vt,i(s.resultado),1)):p("",!0)]),e("div",At,[s.realizada?(l(),n("span",{key:1,class:u(["completed-badge",s.aprovada?"approved":"rejected"])},i(s.aprovada?"Aprovada":"Reprovada"),3)):(l(),n("button",{key:0,class:"btn-complete",onClick:r=>ue(s)}," Concluir ",8,Dt))])],2))),128)),o.value.visitasQualidade?.length?p("",!0):(l(),n("div",Qt,[...t[43]||(t[43]=[e("p",null,"Nenhuma visita de qualidade agendada",-1)])]))])])])):p("",!0),k.value==="intervencoes"?(l(),n("div",Et,[e("div",St,[e("div",Tt,[e("h3",null,"Intervencoes ("+i(o.value.intervencoes?.length||0)+")",1),e("button",{class:"btn-small",onClick:t[13]||(t[13]=s=>A.value=!0)},[...t[44]||(t[44]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),g(" Nova Intervencao ",-1)])])]),N(U,{name:"slide"},{default:P(()=>[A.value?(l(),n("div",$t,[e("div",Bt,[t[46]||(t[46]=e("label",null,"Tipo",-1)),y(e("select",{"onUpdate:modelValue":t[14]||(t[14]=s=>m.value.tipo=s)},[...t[45]||(t[45]=[e("option",{value:"RETOQUE"},"Retoque",-1),e("option",{value:"REPARO"},"Reparo",-1),e("option",{value:"REFAZER"},"Refazer",-1),e("option",{value:"MANUTENCAO"},"Manutencao",-1)])],512),[[X,m.value.tipo]])]),e("div",Nt,[t[47]||(t[47]=e("label",null,"Motivo",-1)),y(e("textarea",{"onUpdate:modelValue":t[15]||(t[15]=s=>m.value.motivo=s),rows:"2",placeholder:"Descreva o problema encontrado..."},null,512),[[x,m.value.motivo]])]),e("div",Pt,[e("div",Ut,[t[48]||(t[48]=e("label",null,"Data Prevista",-1)),y(e("input",{type:"date","onUpdate:modelValue":t[16]||(t[16]=s=>m.value.dataPrevista=s)},null,512),[[x,m.value.dataPrevista]])]),e("div",Mt,[t[49]||(t[49]=e("label",null,"Responsavel",-1)),y(e("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=s=>m.value.responsavel=s)},null,512),[[x,m.value.responsavel]])])]),e("div",Ot,[e("button",{class:"btn-cancel",onClick:t[18]||(t[18]=s=>A.value=!1)},"Cancelar"),e("button",{class:"btn-save",onClick:ce},"Criar")])])):p("",!0)]),_:1}),e("div",jt,[(l(!0),n(h,null,C(o.value.intervencoes,s=>(l(),n("div",{class:u(["intervencao-item",{completed:s.concluida}]),key:s.id},[e("div",{class:u(["intervencao-type",s.tipo.toLowerCase()])},i(s.tipo),3),e("div",It,[e("span",Rt,i(s.motivo),1),e("span",zt,[t[50]||(t[50]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e("line",{x1:"8",y1:"2",x2:"8",y2:"6"})],-1)),g(" "+i(se(s.dataPrevista)),1)])]),e("div",Ft,[s.concluida?(l(),n("span",Lt,"Concluida")):(l(),n("button",{key:1,class:"btn-complete",onClick:r=>pe(s.id)}," Concluir ",8,Jt))])],2))),128)),o.value.intervencoes?.length?p("",!0):(l(),n("div",qt,[...t[51]||(t[51]=[e("p",null,"Nenhuma intervencao registrada",-1)])]))])])])):p("",!0),k.value==="avaliacao"?(l(),n("div",Gt,[e("div",Ht,[t[57]||(t[57]=e("h3",null,"Avaliacao do Cliente",-1)),e("div",Kt,[t[52]||(t[52]=e("label",null,"Satisfacao Geral",-1)),e("div",Wt,[(l(),n(h,null,C(5,s=>e("button",{key:s,class:u({active:(o.value.satisfacaoCliente||0)>=s}),onClick:r=>le(s)}," ★ ",10,Zt)),64))])]),e("div",Xt,[t[53]||(t[53]=e("label",null,"Feedback do Cliente",-1)),y(e("textarea",{"onUpdate:modelValue":t[19]||(t[19]=s=>o.value.feedbackCliente=s),rows:"4",placeholder:"Comentarios e feedback do cliente..."},null,512),[[x,o.value.feedbackCliente]])]),e("div",Yt,[e("label",es,[y(e("input",{type:"checkbox","onUpdate:modelValue":t[20]||(t[20]=s=>o.value.indicariaEmpresa=s)},null,512),[[me,o.value.indicariaEmpresa]]),t[54]||(t[54]=e("span",{class:"checkmark"},null,-1)),t[55]||(t[55]=g(" Cliente indicaria a empresa ",-1))])]),e("div",ts,[t[56]||(t[56]=e("label",null,"Data do Feedback",-1)),y(e("input",{type:"date","onUpdate:modelValue":t[21]||(t[21]=s=>o.value.dataFeedback=s)},null,512),[[x,o.value.dataFeedback]])])]),e("div",ss,[t[58]||(t[58]=e("h3",null,"Status Final",-1)),e("div",as,[(l(),n(h,null,C(B,s=>e("button",{key:s.id,class:u(["status-btn",{active:o.value.status===s.id}]),style:Q({"--status-color":s.color}),onClick:r=>K(o.value.id,s.id)},i(s.label),15,os)),64))])])])):p("",!0)]),e("div",{class:"panel-footer"},[e("button",{class:"btn-save-changes",onClick:fe},"Salvar Alteracoes")])])])):p("",!0)]),_:1})])),(l(),L(Y,{to:"body"},[N(U,{name:"modal"},{default:P(()=>[D.value?(l(),n("div",{key:0,class:"modal-overlay",onClick:t[27]||(t[27]=R(s=>D.value=!1,["self"]))},[e("div",ls,[e("div",ns,[t[60]||(t[60]=e("h2",null,"Concluir Visita de Qualidade",-1)),e("button",{class:"close-btn",onClick:t[22]||(t[22]=s=>D.value=!1)},[...t[59]||(t[59]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),e("div",is,[e("div",rs,[t[63]||(t[63]=e("label",null,"Resultado",-1)),e("div",ds,[e("button",{class:u([{active:b.value.aprovada===!0},"result-btn approved"]),onClick:t[23]||(t[23]=s=>b.value.aprovada=!0)},[...t[61]||(t[61]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"20 6 9 17 4 12"})],-1),g(" Aprovada ",-1)])],2),e("button",{class:u([{active:b.value.aprovada===!1},"result-btn rejected"]),onClick:t[24]||(t[24]=s=>b.value.aprovada=!1)},[...t[62]||(t[62]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),g(" Reprovada ",-1)])],2)])]),e("div",us,[t[64]||(t[64]=e("label",null,"Observacoes",-1)),y(e("textarea",{"onUpdate:modelValue":t[25]||(t[25]=s=>b.value.resultado=s),rows:"3",placeholder:"Descreva o resultado da visita..."},null,512),[[x,b.value.resultado]])])]),e("div",vs,[e("button",{class:"btn-cancel",onClick:t[26]||(t[26]=s=>D.value=!1)},"Cancelar"),e("button",{class:"btn-confirm",onClick:ve},"Confirmar")])])])):p("",!0)]),_:1})])),N(U,{name:"fade"},{default:P(()=>[c.value?(l(),n("div",cs,[...t[65]||(t[65]=[e("div",{class:"loader"},null,-1)])])):p("",!0)]),_:1})]))}}),bs=he(ps,[["__scopeId","data-v-6b3115f2"]]);export{bs as default};

import{d as Ve,r as c,D as Z,$ as m,k as Ae,c as n,b as e,e as p,U as Q,m as R,s as x,a as ee,F as k,y as C,z as A,a0 as Te,t as i,w as F,q as y,f as r,v,x as le,n as L,V as q,W as ae,o as s,J as te,I as oe,_ as Me}from"./index-BRoi_Bt8.js";const Ee={class:"piui-module"},De={class:"module-header"},Ue={class:"header-content"},Se={class:"header-actions"},$e={class:"stats-section"},Be={class:"stats-grid"},Ie={class:"stat-content"},Oe={class:"stat-value"},je={class:"stat-label"},Ne={key:0,class:"kanban-section"},Re={class:"kanban-container"},Fe=["onDrop"],Le={class:"column-header"},qe={class:"column-title"},ze={class:"column-count"},He={class:"column-value"},Je={class:"column-cards"},Ge=["onDragstart","onClick"],Ke={class:"contract-header"},Qe={class:"contract-client"},Xe={key:0,class:"contract-number"},We={class:"contract-value"},Ye={class:"contract-info"},Ze={class:"contract-footer"},el={key:0,class:"contract-m2"},ll={class:"contract-parcelas"},al={key:0,class:"contract-progress"},tl={class:"progress-bar"},ol={class:"progress-text"},sl={key:1,class:"list-section"},nl={class:"list-filters"},il={class:"search-box"},rl=["value"],dl={class:"list-table"},ul=["onClick"],vl={class:"number-cell"},cl={class:"client-cell"},pl={class:"client-name"},fl={class:"client-address"},ml={class:"value-cell"},yl={class:"parcelas-info"},gl={class:"mini-progress"},bl={class:"action-cell"},kl=["onClick"],Cl={key:2,class:"alert-banner"},hl={class:"detail-panel"},xl={class:"panel-header"},wl={class:"panel-title"},_l={key:0,class:"contract-badge"},Pl={class:"panel-tabs"},Vl={class:"panel-content"},Al={key:0,class:"tab-content"},Tl={class:"panel-section"},Ml={class:"status-flow"},El=["onClick"],Dl={class:"panel-section"},Ul={class:"form-grid"},Sl={class:"form-group"},$l={class:"form-group"},Bl={class:"form-group"},Il={class:"form-group"},Ol={class:"panel-section"},jl={class:"form-grid three-cols"},Nl={class:"form-group"},Rl={class:"form-group"},Fl={class:"form-group"},Ll={class:"panel-section"},ql={class:"checkbox-group"},zl={class:"checkbox-label"},Hl={class:"checkbox-label"},Jl={key:0,class:"form-group"},Gl={key:1,class:"form-group"},Kl={key:1,class:"tab-content"},Ql={class:"panel-section"},Xl={class:"section-header"},Wl={key:0,class:"generate-form"},Yl={class:"form-row"},Zl={class:"form-group"},ea={class:"form-group"},la={class:"form-group"},aa={class:"form-actions"},ta={class:"parcelas-list"},oa={class:"parcela-number"},sa={class:"parcela-info"},na={class:"parcela-descricao"},ia={class:"parcela-vencimento"},ra={class:"parcela-valor"},da={class:"parcela-status"},ua={key:0,class:"status-pago"},va=["onClick"],ca=["onClick"],pa={key:0,class:"empty-state"},fa={key:0,class:"add-parcela-form"},ma={class:"form-row"},ya={class:"form-group"},ga={class:"form-group"},ba={class:"form-group"},ka={class:"form-actions"},Ca={key:2,class:"tab-content"},ha={class:"panel-section"},xa={class:"escopo-uploads"},wa={class:"escopo-item"},_a={class:"file-upload"},Pa={key:0,class:"upload-placeholder"},Va={key:1,class:"file-preview"},Aa=["href"],Ta={class:"escopo-item"},Ma={class:"file-upload"},Ea={key:0,class:"upload-placeholder"},Da={key:1,class:"file-preview"},Ua=["href"],Sa={class:"panel-section"},$a={class:"tags-input"},Ba=["onClick"],Ia={class:"panel-section"},Oa={class:"tags-input"},ja=["onClick"],Na={class:"modal-content small"},Ra={class:"modal-header"},Fa={class:"modal-body"},La={class:"pay-summary"},qa={class:"pay-value"},za={class:"pay-summary"},Ha={class:"pay-value highlight"},Ja={class:"form-group"},Ga={class:"form-group"},Ka={class:"modal-footer"},Qa={key:0,class:"loading-overlay"},Xa=Ve({__name:"PIUI",setup(Wa){const f=c(!1),T=c("kanban"),j=c(""),U=c(""),w=c([]),t=c(null),g=c("info"),S=c(null),$=c(!1),_=c(!1),M=c(!1),E=c(null),P=c({rascunhos:0,aguardandoAprovacao:0,aprovadoInterno:0,enviadoCliente:0,aprovado:0,assinado:0,valorMes:0,contratosMes:0,parcelasVencidas:0}),b=c({quantidade:12,valorEntrada:0,dataInicio:new Date().toISOString().split("T")[0]}),h=c({valor:0,vencimento:"",descricao:""}),V=c({dataPagamento:new Date().toISOString().split("T")[0],comprovante:""}),B=c(""),I=c(""),O=[{id:"DRAFT",label:"Rascunho",color:"#6b7280"},{id:"AGUARDANDO_APROVACAO",label:"Aguardando Aprovacao",color:"#f59e0b"},{id:"APROVADO_INTERNO",label:"Aprovado Interno",color:"#8b5cf6"},{id:"ENVIADO_CLIENTE",label:"Enviado ao Cliente",color:"#3b82f6"},{id:"APROVADO",label:"Aprovado Cliente",color:"#06b6d4"},{id:"ASSINADO",label:"Assinado",color:"#22c55e"}],se=Z(()=>[{label:"Rascunhos",value:P.value.rascunhos,icon:m("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[m("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),m("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]),iconClass:"draft"},{label:"Aguardando",value:P.value.aguardandoAprovacao,icon:m("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[m("circle",{cx:"12",cy:"12",r:"10"}),m("polyline",{points:"12 6 12 12 16 14"})]),iconClass:"waiting"},{label:"Assinados",value:P.value.assinado,icon:m("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[m("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),m("polyline",{points:"22 4 12 14.01 9 11.01"})]),iconClass:"signed"},{label:"Valor do Mes",value:"R$ "+D(P.value.valorMes),icon:m("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[m("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),m("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]),iconClass:"value"}]),ne=Z(()=>{let o=[...w.value];if(j.value){const l=j.value.toLowerCase();o=o.filter(a=>a.project?.cliente?.toLowerCase().includes(l)||a.numero?.toLowerCase().includes(l))}return U.value&&(o=o.filter(l=>l.status===U.value)),o});function D(o){return o?o.toLocaleString("pt-BR",{minimumFractionDigits:0,maximumFractionDigits:0}):"0"}function ie(o){return o?new Date(o).toLocaleDateString("pt-BR"):"-"}function z(o){return w.value.filter(l=>l.status===o)}function re(o){return z(o).reduce((l,a)=>l+(a.valorContratado||0),0)}function de(o){return O.find(l=>l.id===o)?.color||"#6b7280"}function ue(o){return O.find(l=>l.id===o)?.label||o}function H(o){return o.parcelas?.filter(l=>l.pago).length||0}function X(o){return o.parcelas?.length?H(o)/o.parcelas.length*100:0}function ve(o){return o.pago?!1:new Date(o.vencimento)<new Date}function ce(o,l){S.value=l,o.dataTransfer&&(o.dataTransfer.effectAllowed="move")}async function pe(o,l){o.preventDefault(),S.value&&S.value.status!==l&&await W(S.value.id,l),S.value=null}async function J(){try{const l=await(await fetch("/api/admin/piui/stats")).json();l.success&&(P.value=l.stats)}catch(o){console.error("Error fetching stats:",o)}}async function fe(){f.value=!0;try{const l=await(await fetch("/api/admin/piui")).json();l.success&&(w.value=l.data)}catch(o){console.error("Error fetching contracts:",o)}finally{f.value=!1}}async function me(){if(t.value){f.value=!0;try{const l=await(await fetch(`/api/admin/piui/${t.value.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t.value)})).json();if(l.success){const a=w.value.findIndex(u=>u.id===t.value.id);a!==-1&&(w.value[a]={...w.value[a],...l.data}),K()}}catch(o){console.error("Error saving contract:",o)}finally{f.value=!1}}}async function W(o,l){f.value=!0;try{if((await(await fetch(`/api/admin/piui/${o}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:l})})).json()).success){const d=w.value.find(N=>N.id===o);d&&(d.status=l),t.value?.id===o&&(t.value.status=l),await J()}}catch(a){console.error("Error changing status:",a)}finally{f.value=!1}}async function ye(){if(t.value){f.value=!0;try{const l=await(await fetch(`/api/admin/piui/${t.value.id}/gerar-parcelas`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantidadeParcelas:b.value.quantidade,valorEntrada:b.value.valorEntrada,dataInicio:b.value.dataInicio})})).json();l.success&&(t.value.parcelas=l.data,$.value=!1)}catch(o){console.error("Error generating parcelas:",o)}finally{f.value=!1}}}async function ge(){if(t.value){f.value=!0;try{const l=await(await fetch(`/api/admin/piui/${t.value.id}/parcelas`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h.value)})).json();l.success&&(t.value.parcelas||(t.value.parcelas=[]),t.value.parcelas.push(l.data),_.value=!1,h.value={valor:0,vencimento:"",descricao:""})}catch(o){console.error("Error adding parcela:",o)}finally{f.value=!1}}}async function be(o){if(confirm("Tem certeza que deseja excluir esta parcela?")){f.value=!0;try{(await(await fetch(`/api/admin/piui/parcelas/${o}`,{method:"DELETE"})).json()).success&&t.value?.parcelas&&(t.value.parcelas=t.value.parcelas.filter(u=>u.id!==o))}catch(l){console.error("Error deleting parcela:",l)}finally{f.value=!1}}}function ke(o){E.value=o,V.value={dataPagamento:new Date().toISOString().split("T")[0],comprovante:""},M.value=!0}async function Ce(){if(E.value){f.value=!0;try{if((await(await fetch(`/api/admin/piui/parcelas/${E.value.id}/pagar`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(V.value)})).json()).success&&t.value?.parcelas){const a=t.value.parcelas.find(u=>u.id===E.value.id);a&&(a.pago=!0,a.dataPagamento=V.value.dataPagamento),M.value=!1,await J()}}catch(o){console.error("Error confirming payment:",o)}finally{f.value=!1}}}function he(){B.value&&t.value&&(t.value.cores||(t.value.cores=[]),t.value.cores.push(B.value),B.value="")}function xe(o){t.value?.cores&&t.value.cores.splice(o,1)}function we(){I.value&&t.value&&(t.value.materiais||(t.value.materiais=[]),t.value.materiais.push(I.value),I.value="")}function _e(o){t.value?.materiais&&t.value.materiais.splice(o,1)}function Y(o,l){const a=l.target;a.files?.length&&t.value&&console.log("Upload file:",o,a.files[0])}function G(o){t.value={...o},g.value="info"}function K(){t.value=null,$.value=!1,_.value=!1}function Pe(){U.value="",T.value="list"}return Ae(()=>{J(),fe()}),(o,l)=>(s(),n("div",Ee,[e("header",De,[e("div",Ue,[l[41]||(l[41]=e("div",{class:"title-section"},[e("h1",{class:"module-title"},"PIUI"),e("p",{class:"module-subtitle"},"Gestao de Contratos")],-1)),e("div",Se,[e("button",{class:x(["btn-view",{active:T.value==="kanban"}]),onClick:l[0]||(l[0]=a=>T.value="kanban")},[...l[39]||(l[39]=[ee('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-1e173e46><rect x="3" y="3" width="7" height="7" rx="1" data-v-1e173e46></rect><rect x="14" y="3" width="7" height="7" rx="1" data-v-1e173e46></rect><rect x="3" y="14" width="7" height="7" rx="1" data-v-1e173e46></rect><rect x="14" y="14" width="7" height="7" rx="1" data-v-1e173e46></rect></svg> Kanban ',2)])],2),e("button",{class:x(["btn-view",{active:T.value==="list"}]),onClick:l[1]||(l[1]=a=>T.value="list")},[...l[40]||(l[40]=[ee('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-1e173e46><line x1="8" y1="6" x2="21" y2="6" data-v-1e173e46></line><line x1="8" y1="12" x2="21" y2="12" data-v-1e173e46></line><line x1="8" y1="18" x2="21" y2="18" data-v-1e173e46></line><line x1="3" y1="6" x2="3.01" y2="6" data-v-1e173e46></line><line x1="3" y1="12" x2="3.01" y2="12" data-v-1e173e46></line><line x1="3" y1="18" x2="3.01" y2="18" data-v-1e173e46></line></svg> Lista ',2)])],2)])])]),e("section",$e,[e("div",Be,[(s(!0),n(k,null,C(se.value,(a,u)=>(s(),n("div",{class:"stat-card",key:a.label,style:A({"--delay":u*.1+"s"})},[e("div",{class:x(["stat-icon",a.iconClass])},[(s(),Q(Te(a.icon)))],2),e("div",Ie,[e("span",Oe,i(a.value),1),e("span",je,i(a.label),1)])],4))),128))])]),T.value==="kanban"?(s(),n("section",Ne,[e("div",Re,[(s(),n(k,null,C(O,(a,u)=>e("div",{class:"kanban-column",key:a.id,style:A({"--column-index":u}),onDragover:l[2]||(l[2]=F(()=>{},["prevent"])),onDrop:d=>pe(d,a.id)},[e("div",Le,[e("div",qe,[e("span",{class:"column-dot",style:A({background:a.color})},null,4),y(" "+i(a.label),1)]),e("span",ze,i(z(a.id).length),1)]),e("div",He," R$ "+i(D(re(a.id))),1),e("div",Je,[(s(!0),n(k,null,C(z(a.id),d=>(s(),n("div",{class:"contract-card",key:d.id,draggable:"true",onDragstart:N=>ce(N,d),onClick:N=>G(d)},[e("div",Ke,[e("span",Qe,i(d.project?.cliente),1),d.numero?(s(),n("span",Xe,"#"+i(d.numero),1)):p("",!0)]),e("div",We," R$ "+i(D(d.valorContratado)),1),e("div",Ye,[l[42]||(l[42]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e("circle",{cx:"12",cy:"10",r:"3"})],-1)),y(" "+i(d.project?.endereco||"Sem endereco"),1)]),e("div",Ze,[d.project?.m2Total?(s(),n("div",el,[l[43]||(l[43]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),e("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),e("line",{x1:"9",y1:"21",x2:"9",y2:"9"})],-1)),y(" "+i(d.project.m2Total)+" m2 ",1)])):p("",!0),e("div",ll,i(d.parcelas?.length||0)+" parcelas ",1)]),d.parcelas?.length?(s(),n("div",al,[e("div",tl,[e("div",{class:"progress-fill",style:A({width:X(d)+"%"})},null,4)]),e("span",ol,i(H(d))+"/"+i(d.parcelas.length)+" pagas",1)])):p("",!0)],40,Ge))),128))])],44,Fe)),64))])])):(s(),n("section",sl,[e("div",nl,[e("div",il,[l[44]||(l[44]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1)),r(e("input",{type:"text","onUpdate:modelValue":l[3]||(l[3]=a=>j.value=a),placeholder:"Buscar por cliente, numero..."},null,512),[[v,j.value]])]),r(e("select",{"onUpdate:modelValue":l[4]||(l[4]=a=>U.value=a),class:"filter-select"},[l[45]||(l[45]=e("option",{value:""},"Todos os status",-1)),(s(),n(k,null,C(O,a=>e("option",{key:a.id,value:a.id},i(a.label),9,rl)),64))],512),[[le,U.value]])]),e("div",dl,[e("table",null,[l[47]||(l[47]=e("thead",null,[e("tr",null,[e("th",null,"Numero"),e("th",null,"Cliente"),e("th",null,"Status"),e("th",null,"Valor"),e("th",null,"M2"),e("th",null,"Parcelas"),e("th")])],-1)),e("tbody",null,[(s(!0),n(k,null,C(ne.value,a=>(s(),n("tr",{key:a.id,onClick:u=>G(a)},[e("td",vl,i(a.numero||"-"),1),e("td",cl,[e("span",pl,i(a.project?.cliente),1),e("span",fl,i(a.project?.endereco),1)]),e("td",null,[e("span",{class:"status-badge",style:A({"--status-color":de(a.status)})},i(ue(a.status)),5)]),e("td",ml,"R$ "+i(D(a.valorContratado)),1),e("td",null,i(a.project?.m2Total?a.project.m2Total+" m2":"-"),1),e("td",null,[e("div",yl,[e("span",null,i(H(a))+"/"+i(a.parcelas?.length||0),1),e("div",gl,[e("div",{class:"mini-progress-fill",style:A({width:X(a)+"%"})},null,4)])])]),e("td",bl,[e("button",{class:"action-btn",onClick:F(u=>G(a),["stop"])},[...l[46]||(l[46]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1)])],8,kl)])],8,ul))),128))])])])])),P.value.parcelasVencidas>0?(s(),n("div",Cl,[l[49]||(l[49]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})],-1)),e("span",null,[e("strong",null,i(P.value.parcelasVencidas),1),l[48]||(l[48]=y(" parcelas vencidas aguardando pagamento",-1))]),e("button",{class:"btn-view-vencidas",onClick:Pe},"Ver todas")])):p("",!0),(s(),Q(ae,{to:"body"},[R(q,{name:"panel"},{default:L(()=>[t.value?(s(),n("div",{key:0,class:"detail-panel-overlay",onClick:F(K,["self"])},[e("div",hl,[e("div",xl,[e("div",wl,[e("h2",null,i(t.value.project?.cliente),1),t.value.numero?(s(),n("span",_l,"#"+i(t.value.numero),1)):p("",!0)]),e("button",{class:"close-btn",onClick:K},[...l[50]||(l[50]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),e("div",Pl,[e("button",{class:x({active:g.value==="info"}),onClick:l[5]||(l[5]=a=>g.value="info")},"Informacoes",2),e("button",{class:x({active:g.value==="parcelas"}),onClick:l[6]||(l[6]=a=>g.value="parcelas")},"Parcelas",2),e("button",{class:x({active:g.value==="escopo"}),onClick:l[7]||(l[7]=a=>g.value="escopo")},"Escopo",2)]),e("div",Vl,[g.value==="info"?(s(),n("div",Al,[e("div",Tl,[l[51]||(l[51]=e("h3",null,"Status do Contrato",-1)),e("div",Ml,[(s(),n(k,null,C(O,a=>e("button",{key:a.id,class:x(["status-btn",{active:t.value.status===a.id}]),style:A({"--status-color":a.color}),onClick:u=>W(t.value.id,a.id)},i(a.label),15,El)),64))])]),e("div",Dl,[l[57]||(l[57]=e("h3",null,"Dados do Contrato",-1)),e("div",Ul,[e("div",Sl,[l[52]||(l[52]=e("label",null,"Numero do Contrato",-1)),r(e("input",{type:"text","onUpdate:modelValue":l[8]||(l[8]=a=>t.value.numero=a),placeholder:"Ex: 2024/001"},null,512),[[v,t.value.numero]])]),e("div",$l,[l[53]||(l[53]=e("label",null,"Valor Contratado",-1)),r(e("input",{type:"number","onUpdate:modelValue":l[9]||(l[9]=a=>t.value.valorContratado=a)},null,512),[[v,t.value.valorContratado]])]),e("div",Bl,[l[54]||(l[54]=e("label",null,"Valor Entrada",-1)),r(e("input",{type:"number","onUpdate:modelValue":l[10]||(l[10]=a=>t.value.valorEntrada=a)},null,512),[[v,t.value.valorEntrada]])]),e("div",Il,[l[56]||(l[56]=e("label",null,"Forma de Pagamento",-1)),r(e("select",{"onUpdate:modelValue":l[11]||(l[11]=a=>t.value.formaPagamento=a)},[...l[55]||(l[55]=[e("option",{value:""},"Selecione...",-1),e("option",{value:"PIX"},"PIX",-1),e("option",{value:"BOLETO"},"Boleto",-1),e("option",{value:"TRANSFERENCIA"},"Transferencia",-1),e("option",{value:"CARTAO"},"Cartao",-1),e("option",{value:"FINANCIAMENTO"},"Financiamento",-1)])],512),[[le,t.value.formaPagamento]])])])]),e("div",Ol,[l[61]||(l[61]=e("h3",null,"Metragens",-1)),e("div",jl,[e("div",Nl,[l[58]||(l[58]=e("label",null,"Piso (m2)",-1)),r(e("input",{type:"number","onUpdate:modelValue":l[12]||(l[12]=a=>t.value.m2Piso=a)},null,512),[[v,t.value.m2Piso]])]),e("div",Rl,[l[59]||(l[59]=e("label",null,"Parede (m2)",-1)),r(e("input",{type:"number","onUpdate:modelValue":l[13]||(l[13]=a=>t.value.m2Parede=a)},null,512),[[v,t.value.m2Parede]])]),e("div",Fl,[l[60]||(l[60]=e("label",null,"Rodape (m2)",-1)),r(e("input",{type:"number","onUpdate:modelValue":l[14]||(l[14]=a=>t.value.m2Rodape=a)},null,512),[[v,t.value.m2Rodape]])])])]),e("div",Ll,[l[68]||(l[68]=e("h3",null,"Opcoes Especiais",-1)),e("div",ql,[e("label",zl,[r(e("input",{type:"checkbox","onUpdate:modelValue":l[15]||(l[15]=a=>t.value.isTelada=a)},null,512),[[te,t.value.isTelada]]),l[62]||(l[62]=e("span",{class:"checkmark"},null,-1)),l[63]||(l[63]=y(" Aplicacao Telada ",-1))]),e("label",Hl,[r(e("input",{type:"checkbox","onUpdate:modelValue":l[16]||(l[16]=a=>t.value.isFaseada=a)},null,512),[[te,t.value.isFaseada]]),l[64]||(l[64]=e("span",{class:"checkmark"},null,-1)),l[65]||(l[65]=y(" Aplicacao Faseada ",-1))])]),t.value.isTelada?(s(),n("div",Jl,[l[66]||(l[66]=e("label",null,"Detalhes da Tela",-1)),r(e("textarea",{"onUpdate:modelValue":l[17]||(l[17]=a=>t.value.detalheTela=a),rows:"2"},null,512),[[v,t.value.detalheTela]])])):p("",!0),t.value.isFaseada?(s(),n("div",Gl,[l[67]||(l[67]=e("label",null,"Detalhes do Faseamento",-1)),r(e("textarea",{"onUpdate:modelValue":l[18]||(l[18]=a=>t.value.detalheFaseamento=a),rows:"2"},null,512),[[v,t.value.detalheFaseamento]])])):p("",!0)])])):p("",!0),g.value==="parcelas"?(s(),n("div",Kl,[e("div",Ql,[e("div",Xl,[e("h3",null,"Parcelas ("+i(t.value.parcelas?.length||0)+")",1),e("button",{class:"btn-small",onClick:l[19]||(l[19]=a=>$.value=!0)},[...l[69]||(l[69]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"})],-1),y(" Gerar Automatico ",-1)])])]),R(q,{name:"slide"},{default:L(()=>[$.value?(s(),n("div",Wl,[e("div",Yl,[e("div",Zl,[l[70]||(l[70]=e("label",null,"Qtd. Parcelas",-1)),r(e("input",{type:"number","onUpdate:modelValue":l[20]||(l[20]=a=>b.value.quantidade=a),min:"1",max:"36"},null,512),[[v,b.value.quantidade]])]),e("div",ea,[l[71]||(l[71]=e("label",null,"Valor Entrada",-1)),r(e("input",{type:"number","onUpdate:modelValue":l[21]||(l[21]=a=>b.value.valorEntrada=a)},null,512),[[v,b.value.valorEntrada]])]),e("div",la,[l[72]||(l[72]=e("label",null,"Data Inicio",-1)),r(e("input",{type:"date","onUpdate:modelValue":l[22]||(l[22]=a=>b.value.dataInicio=a)},null,512),[[v,b.value.dataInicio]])])]),e("div",aa,[e("button",{class:"btn-cancel",onClick:l[23]||(l[23]=a=>$.value=!1)},"Cancelar"),e("button",{class:"btn-generate",onClick:ye},"Gerar Parcelas")])])):p("",!0)]),_:1}),e("div",ta,[(s(!0),n(k,null,C(t.value.parcelas,a=>(s(),n("div",{class:x(["parcela-item",{pago:a.pago,vencido:ve(a)}]),key:a.id},[e("div",oa,i(a.numero===0?"Entrada":a.numero+"a"),1),e("div",sa,[e("span",na,i(a.descricao),1),e("span",ia,[l[73]||(l[73]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e("line",{x1:"3",y1:"10",x2:"21",y2:"10"})],-1)),y(" "+i(ie(a.vencimento)),1)])]),e("div",ra," R$ "+i(D(a.valor)),1),e("div",da,[a.pago?(s(),n("span",ua,[...l[74]||(l[74]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"20 6 9 17 4 12"})],-1),y(" Pago ",-1)])])):(s(),n("button",{key:1,class:"btn-pagar",onClick:u=>ke(a)}," Marcar Pago ",8,va))]),a.pago?p("",!0):(s(),n("button",{key:0,class:"parcela-delete",onClick:u=>be(a.id)},[...l[75]||(l[75]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])],8,ca))],2))),128)),t.value.parcelas?.length?p("",!0):(s(),n("div",pa,[l[76]||(l[76]=e("p",null,"Nenhuma parcela cadastrada",-1)),e("button",{class:"btn-add-parcela",onClick:l[24]||(l[24]=a=>_.value=!0)},"Adicionar Parcela")]))]),_.value?(s(),n("div",fa,[l[80]||(l[80]=e("h4",null,"Nova Parcela",-1)),e("div",ma,[e("div",ya,[l[77]||(l[77]=e("label",null,"Valor",-1)),r(e("input",{type:"number","onUpdate:modelValue":l[25]||(l[25]=a=>h.value.valor=a)},null,512),[[v,h.value.valor]])]),e("div",ga,[l[78]||(l[78]=e("label",null,"Vencimento",-1)),r(e("input",{type:"date","onUpdate:modelValue":l[26]||(l[26]=a=>h.value.vencimento=a)},null,512),[[v,h.value.vencimento]])])]),e("div",ba,[l[79]||(l[79]=e("label",null,"Descricao",-1)),r(e("input",{type:"text","onUpdate:modelValue":l[27]||(l[27]=a=>h.value.descricao=a),placeholder:"Ex: 1a Parcela"},null,512),[[v,h.value.descricao]])]),e("div",ka,[e("button",{class:"btn-cancel",onClick:l[28]||(l[28]=a=>_.value=!1)},"Cancelar"),e("button",{class:"btn-save",onClick:ge},"Adicionar")])])):p("",!0),!_.value&&t.value.parcelas?.length?(s(),n("button",{key:1,class:"btn-add-parcela-inline",onClick:l[29]||(l[29]=a=>_.value=!0)},[...l[81]||(l[81]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),y(" Adicionar Parcela Manual ",-1)])])):p("",!0)])])):p("",!0),g.value==="escopo"?(s(),n("div",Ca,[e("div",ha,[l[90]||(l[90]=e("h3",null,"Escopo do Projeto",-1)),e("div",xa,[e("div",wa,[l[85]||(l[85]=e("label",null,"Escopo Inicial (PDF/Imagem)",-1)),e("div",_a,[e("input",{type:"file",onChange:l[30]||(l[30]=a=>Y("inicial",a)),accept:".pdf,image/*"},null,32),t.value.escopoInicialUrl?(s(),n("div",Va,[l[83]||(l[83]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"})],-1)),l[84]||(l[84]=e("span",null,"Arquivo enviado",-1)),e("a",{href:t.value.escopoInicialUrl,target:"_blank"},"Ver",8,Aa)])):(s(),n("div",Pa,[...l[82]||(l[82]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"17 8 12 3 7 8"}),e("line",{x1:"12",y1:"3",x2:"12",y2:"15"})],-1),e("span",null,"Clique para enviar",-1)])]))])]),e("div",Ta,[l[89]||(l[89]=e("label",null,"Escopo Aprovado (PDF/Imagem)",-1)),e("div",Ma,[e("input",{type:"file",onChange:l[31]||(l[31]=a=>Y("aprovado",a)),accept:".pdf,image/*"},null,32),t.value.escopoAprovadoUrl?(s(),n("div",Da,[l[87]||(l[87]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e("polyline",{points:"22 4 12 14.01 9 11.01"})],-1)),l[88]||(l[88]=e("span",null,"Escopo Aprovado",-1)),e("a",{href:t.value.escopoAprovadoUrl,target:"_blank"},"Ver",8,Ua)])):(s(),n("div",Ea,[...l[86]||(l[86]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"17 8 12 3 7 8"}),e("line",{x1:"12",y1:"3",x2:"12",y2:"15"})],-1),e("span",null,"Clique para enviar",-1)])]))])])])]),e("div",Sa,[l[91]||(l[91]=e("h3",null,"Cores",-1)),e("div",$a,[(s(!0),n(k,null,C(t.value.cores,(a,u)=>(s(),n("div",{class:"tag",key:u},[y(i(a)+" ",1),e("button",{onClick:d=>xe(u)},"x",8,Ba)]))),128)),r(e("input",{type:"text","onUpdate:modelValue":l[32]||(l[32]=a=>B.value=a),onKeydown:oe(he,["enter"]),placeholder:"Adicionar cor..."},null,544),[[v,B.value]])])]),e("div",Ia,[l[92]||(l[92]=e("h3",null,"Materiais",-1)),e("div",Oa,[(s(!0),n(k,null,C(t.value.materiais,(a,u)=>(s(),n("div",{class:"tag",key:u},[y(i(a)+" ",1),e("button",{onClick:d=>_e(u)},"x",8,ja)]))),128)),r(e("input",{type:"text","onUpdate:modelValue":l[33]||(l[33]=a=>I.value=a),onKeydown:oe(we,["enter"]),placeholder:"Adicionar material..."},null,544),[[v,I.value]])])])])):p("",!0)]),e("div",{class:"panel-footer"},[e("button",{class:"btn-save-changes",onClick:me},"Salvar Alteracoes")])])])):p("",!0)]),_:1})])),(s(),Q(ae,{to:"body"},[R(q,{name:"modal"},{default:L(()=>[M.value?(s(),n("div",{key:0,class:"modal-overlay",onClick:l[38]||(l[38]=F(a=>M.value=!1,["self"]))},[e("div",Na,[e("div",Ra,[l[94]||(l[94]=e("h2",null,"Confirmar Pagamento",-1)),e("button",{class:"close-btn",onClick:l[34]||(l[34]=a=>M.value=!1)},[...l[93]||(l[93]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),e("div",Fa,[e("div",La,[l[95]||(l[95]=e("span",{class:"pay-label"},"Parcela",-1)),e("span",qa,i(E.value?.descricao),1)]),e("div",za,[l[96]||(l[96]=e("span",{class:"pay-label"},"Valor",-1)),e("span",Ha,"R$ "+i(D(E.value?.valor)),1)]),e("div",Ja,[l[97]||(l[97]=e("label",null,"Data do Pagamento",-1)),r(e("input",{type:"date","onUpdate:modelValue":l[35]||(l[35]=a=>V.value.dataPagamento=a)},null,512),[[v,V.value.dataPagamento]])]),e("div",Ga,[l[98]||(l[98]=e("label",null,"Comprovante (opcional)",-1)),r(e("input",{type:"text","onUpdate:modelValue":l[36]||(l[36]=a=>V.value.comprovante=a),placeholder:"URL ou codigo do comprovante"},null,512),[[v,V.value.comprovante]])])]),e("div",Ka,[e("button",{class:"btn-cancel",onClick:l[37]||(l[37]=a=>M.value=!1)},"Cancelar"),e("button",{class:"btn-confirm-pay",onClick:Ce},"Confirmar Pagamento")])])])):p("",!0)]),_:1})])),R(q,{name:"fade"},{default:L(()=>[f.value?(s(),n("div",Qa,[...l[99]||(l[99]=[e("div",{class:"loader"},null,-1)])])):p("",!0)]),_:1})]))}}),Za=Me(Xa,[["__scopeId","data-v-1e173e46"]]);export{Za as default};

import{d as fa,r as u,E as ga,D as z,c as l,b as t,F as M,y as S,f as _,v as y,w as $,s as D,a as oe,q as x,z as ie,t as r,o as i,_ as ha,u as Qo,j as Xo,k as Yo,l as es,e as m,U as pe,m as Be,n as lt,V as pa,Y as va,I as we,x as ve,W as me,Z as B,L as ts,G as as}from"./index-BRoi_Bt8.js";import{_ as os}from"./saturn-CvwfwOtg.js";import{c as ss,h as is,k as ls,m as ns,n as rs}from"./socket-BZVI9rSi.js";const ds={class:"pipeline-settings"},cs={class:"pipeline-settings__groups"},us={class:"pipeline-settings__group-header"},ps=["onUpdate:modelValue","onBlur"],vs=["onUpdate:modelValue","onChange"],ms={class:"pipeline-settings__stages"},fs=["onDragstart","onDragover","onDrop"],gs=["onUpdate:modelValue"],hs=["onUpdate:modelValue"],_s={class:"pipeline-settings__stage-probability"},ys=["onUpdate:modelValue"],ws=["disabled","onClick"],bs=["onClick"],ks={class:"pipeline-settings__preview"},xs={class:"pipeline-settings__preview-stages"},Cs={class:"pipeline-settings__preview-name"},Es={class:"pipeline-settings__preview-probability"},As=fa({__name:"PipelineSettings",props:{stages:{}},emits:["save","reset"],setup($t,{emit:le}){const f=$t,K=le,N=u(null),J=u(null),G=u([]),ne=()=>{const E=new Map,h=new Map;[...f.stages].sort((b,k)=>(b.sortOrder??0)-(k.sortOrder??0)).forEach(b=>{const k=b.groupName||"Outros";E.has(k)||(E.set(k,[]),h.set(k,b.color)),E.get(k).push({...b})}),G.value=Array.from(E.entries()).map(([b,k])=>({name:b,color:h.get(b)||"#666",stages:k}))};ne(),ga(()=>f.stages,ne,{deep:!0});const d=z(()=>{const E=[];let h=0;return G.value.forEach(w=>{w.stages.forEach(b=>{E.push({...b,groupName:w.name,sortOrder:h++})})}),E}),Ae=()=>`stage-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,fe=E=>{const h=G.value[E];if(!h)return;const w={id:Ae(),name:"Novo estÃ¡gio",color:h.color,probability:50,groupName:h.name,sortOrder:h.stages.length};h.stages.push(w)},nt=(E,h)=>{const w=G.value[E];if(!w)return;const b=w.stages[h];!b||b.isDefault||w.stages.splice(h,1)},rt=()=>{G.value.push({name:"Novo Grupo",color:"#666666",stages:[]})},j=E=>{const h=G.value[E];h&&h.stages.forEach(w=>{w.groupName=h.name})},Z=E=>{},ge=(E,h,w,b)=>{N.value=h,J.value={groupIndex:w,stageIndex:b},E.dataTransfer.effectAllowed="move"},be=()=>{N.value=null,J.value=null},ee=(E,h,w)=>{E.dataTransfer.dropEffect="move"},te=(E,h,w)=>{if(!N.value||!J.value)return;const b=G.value[J.value.groupIndex],k=G.value[h];!b||!k||(b.stages.splice(J.value.stageIndex,1),J.value.groupIndex!==h&&(N.value.groupName=k.name),k.stages.splice(w,0,N.value),N.value=null,J.value=null)},he=()=>{K("save",d.value)},O=()=>{K("reset")};return(E,h)=>(i(),l("div",ds,[h[6]||(h[6]=t("div",{class:"pipeline-settings__header"},[t("h2",{class:"pipeline-settings__title"},"Configurar Pipeline"),t("p",{class:"pipeline-settings__subtitle"}," Personalize os estÃ¡gios do seu funil de vendas ")],-1)),t("div",cs,[(i(!0),l(M,null,S(G.value,(w,b)=>(i(),l("div",{key:w.name,class:"pipeline-settings__group"},[t("div",us,[_(t("input",{"onUpdate:modelValue":k=>w.name=k,class:"pipeline-settings__group-name-input",placeholder:"Nome do grupo",onBlur:k=>j(b)},null,40,ps),[[y,w.name]]),_(t("input",{type:"color","onUpdate:modelValue":k=>w.color=k,class:"pipeline-settings__color-picker",onChange:k=>Z()},null,40,vs),[[y,w.color]])]),t("div",ms,[(i(!0),l(M,null,S(w.stages,(k,ke)=>(i(),l("div",{key:k.id,class:D(["pipeline-settings__stage",{"pipeline-settings__stage--dragging":N.value?.id===k.id}]),draggable:"true",onDragstart:A=>ge(A,k,b,ke),onDragend:be,onDragover:$(A=>ee(A),["prevent"]),onDrop:A=>te(A,b,ke)},[h[2]||(h[2]=oe('<div class="pipeline-settings__stage-handle" data-v-76ba680e><svg viewBox="0 0 24 24" fill="currentColor" data-v-76ba680e><circle cx="9" cy="6" r="1.5" data-v-76ba680e></circle><circle cx="15" cy="6" r="1.5" data-v-76ba680e></circle><circle cx="9" cy="12" r="1.5" data-v-76ba680e></circle><circle cx="15" cy="12" r="1.5" data-v-76ba680e></circle><circle cx="9" cy="18" r="1.5" data-v-76ba680e></circle><circle cx="15" cy="18" r="1.5" data-v-76ba680e></circle></svg></div>',1)),_(t("input",{type:"color","onUpdate:modelValue":A=>k.color=A,class:"pipeline-settings__stage-color"},null,8,gs),[[y,k.color]]),_(t("input",{"onUpdate:modelValue":A=>k.name=A,class:"pipeline-settings__stage-name",placeholder:"Nome do estÃ¡gio"},null,8,hs),[[y,k.name]]),t("div",_s,[_(t("input",{type:"number","onUpdate:modelValue":A=>k.probability=A,min:"0",max:"100",class:"pipeline-settings__probability-input"},null,8,ys),[[y,k.probability,void 0,{number:!0}]]),h[0]||(h[0]=t("span",{class:"pipeline-settings__probability-label"},"%",-1))]),t("button",{class:"pipeline-settings__stage-delete",title:"Remover estÃ¡gio",disabled:k.isDefault,onClick:A=>nt(b,ke)},[...h[1]||(h[1]=[oe('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-76ba680e><polyline points="3 6 5 6 21 6" data-v-76ba680e></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" data-v-76ba680e></path><line x1="10" y1="11" x2="10" y2="17" data-v-76ba680e></line><line x1="14" y1="11" x2="14" y2="17" data-v-76ba680e></line></svg>',1)])],8,ws)],42,fs))),128)),t("button",{class:"pipeline-settings__add-stage",onClick:k=>fe(b)},[...h[3]||(h[3]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),x(" Adicionar estÃ¡gio ",-1)])],8,bs)])]))),128)),t("button",{class:"pipeline-settings__add-group",onClick:rt},[...h[4]||(h[4]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),x(" Adicionar grupo ",-1)])])]),t("div",ks,[h[5]||(h[5]=t("h3",{class:"pipeline-settings__preview-title"},"Preview do Pipeline",-1)),t("div",xs,[(i(!0),l(M,null,S(d.value,w=>(i(),l("div",{key:w.id,class:"pipeline-settings__preview-stage",style:ie({borderColor:w.color})},[t("div",{class:"pipeline-settings__preview-indicator",style:ie({backgroundColor:w.color})},null,4),t("span",Cs,r(w.name),1),t("span",Es,r(w.probability??50)+"%",1)],4))),128))])]),t("div",{class:"pipeline-settings__actions"},[t("button",{class:"pipeline-settings__btn pipeline-settings__btn--secondary",onClick:O}," Restaurar padrÃ£o "),t("button",{class:"pipeline-settings__btn pipeline-settings__btn--primary",onClick:he}," Salvar alteraÃ§Ãµes ")])]))}}),Ns=ha(As,[["__scopeId","data-v-76ba680e"]]),Ts={class:"crm"},Ms={key:0,class:"crm-header"},Ps={class:"crm-header__top"},Ds={class:"specialist-name pixel-text"},Ss={class:"crm-header__actions"},Os={class:"notification-bell-container"},Is={key:0,class:"notification-bell__eye"},Fs={key:1,class:"notification-bell__badge"},Ls={class:"notification-panel__header"},$s={key:0,class:"notification-panel__section notification-panel__section--live"},Rs={class:"notification-panel__section-header notification-panel__section-header--closeable"},Vs={class:"notification-panel__section-title"},Bs={class:"notification-panel__section-count"},Us={class:"notification-panel__list"},js=["onClick"],zs={class:"notification-item__avatar"},qs={class:"notification-item__avatar-letter"},Hs={class:"notification-item__content"},Gs={class:"notification-item__name"},Ws={class:"notification-item__meta"},Ks={class:"notification-item__device"},Js={class:"notification-item__owner"},Zs={class:"notification-item__stats"},Qs={class:"notification-item__timer"},Xs={class:"notification-item__timer-value"},Ys={class:"notification-item__scroll-bar"},ei={key:1,class:"notification-panel__empty"},ti={key:2,class:"notification-panel__section notification-panel__section--history"},ai={class:"notification-panel__section-title"},oi={class:"notification-panel__section-count"},si={class:"notification-panel__list notification-panel__list--compact"},ii=["onClick"],li=["title"],ni={class:"notification-item__content"},ri={class:"notification-item__name"},di={class:"notification-item__meta"},ci={class:"notification-item__owner-small"},ui={class:"notification-item__time-ago"},pi=["onClick"],vi={class:"toast-notification__icon"},mi={class:"toast-notification__content"},fi={class:"toast-notification__title"},gi={class:"toast-notification__subtitle"},hi=["onClick"],_i={class:"crm-kpis"},yi={class:"kpi-card kpi-card--deals"},wi={class:"kpi-card__content"},bi={class:"kpi-card__value"},ki={class:"kpi-card kpi-card--pipeline"},xi={class:"kpi-card__content"},Ci={class:"kpi-card__value"},Ei={class:"kpi-card kpi-card--won"},Ai={class:"kpi-card__content"},Ni={class:"kpi-card__value"},Ti={class:"kpi-card kpi-card--conversion"},Mi={class:"kpi-card__content"},Pi={class:"kpi-card__value"},Di={class:"kpi-card kpi-card--avg"},Si={class:"kpi-card__content"},Oi={class:"kpi-card__value"},Ii={class:"kpi-card kpi-card--ticket"},Fi={class:"kpi-card__content"},Li={class:"kpi-card__value"},$i={key:1,class:"search-bar-container"},Ri={key:0,class:"search-suggestions"},Vi={key:0,class:"search-suggestions__empty"},Bi=["onMousedown"],Ui={class:"search-suggestion__main"},ji={class:"search-suggestion__name"},zi=["innerHTML"],qi={class:"search-suggestion__details"},Hi={key:0,class:"search-suggestion__phone"},Gi={key:1,class:"search-suggestion__email"},Wi={key:0,class:"search-suggestion__location"},Ki={key:2,class:"filters-bar"},Ji={class:"filter-group"},Zi={class:"filter-group"},Qi=["value"],Xi={class:"filter-group"},Yi={class:"filter-group"},el=["onDragover","onDrop"],tl={class:"pipeline-column__header"},al={class:"pipeline-column__title"},ol=["innerHTML"],sl={class:"pipeline-column__meta"},il={class:"pipeline-column__count"},ll={class:"pipeline-column__value"},nl=["onClick"],rl={class:"pipeline-column__body"},dl=["onDragstart","onClick"],cl={class:"deal-card__header"},ul={class:"deal-card__name"},pl={class:"deal-card__id"},vl={key:0,class:"deal-card__tags"},ml={key:0,class:"deal-card__tag deal-card__tag--tipo"},fl={key:0,class:"deal-card__tag-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},gl={key:1,class:"deal-card__tag-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},hl={key:1,class:"deal-card__tag deal-card__tag--m2"},_l={class:"deal-card__value"},yl={key:1,class:"deal-card__location"},wl={class:"deal-card__footer"},bl=["title"],kl={class:"deal-card__specialist-name"},xl={class:"deal-card__actions"},Cl=["onClick"],El=["onClick"],Al=["onClick"],Nl={key:0,class:"pipeline-column__empty"},Tl={class:"modal modal--large"},Ml={class:"modal__header"},Pl={class:"modal__header-content"},Dl={class:"modal__title"},Sl={class:"modal__badges"},Ol={key:0,class:"badge badge--tipo"},Il={key:1,class:"badge badge--projeto"},Fl={class:"modal__actions"},Ll=["href"],$l={class:"pipeline-progress"},Rl={class:"pipeline-progress__track"},Vl=["onClick","title"],Bl={key:0,class:"pipeline-progress__train"},Ul={class:"pipeline-progress__days"},jl={class:"pipeline-progress__stage-name"},zl={class:"pipeline-progress__final"},ql={class:"modal__body modal__body--scroll"},Hl={class:"detail-section"},Gl={class:"detail-grid detail-grid--highlight"},Wl={class:"detail-item detail-item--highlight"},Kl={class:"detail-item"},Jl={class:"detail-item"},Zl={class:"detail-item"},Ql=["value"],Xl={class:"detail-section"},Yl={class:"detail-grid"},en={class:"detail-item"},tn={class:"detail-item"},an={class:"detail-item"},on={class:"detail-value"},sn={class:"detail-item"},ln={class:"detail-value"},nn={class:"detail-section"},rn={class:"detail-grid"},dn={class:"detail-item detail-item--full"},cn={class:"detail-item"},un={class:"detail-item"},pn={class:"detail-item"},vn={class:"detail-value"},mn={class:"detail-item"},fn={class:"detail-item"},gn={class:"detail-item"},hn={key:0,class:"detail-section"},_n={class:"detail-grid"},yn={class:"detail-item"},wn={class:"detail-item detail-item--full"},bn={class:"detail-section"},kn={class:"detail-grid"},xn={class:"detail-item detail-item--full"},Cn={class:"detail-item detail-item--full"},En={class:"detail-section"},An={key:0,class:"detail-loading"},Nn={key:1,class:"detail-empty"},Tn={key:2,class:"anexos-list"},Mn={class:"anexo-item__icon"},Pn={class:"anexo-item__info"},Dn={class:"anexo-item__nome"},Sn={class:"anexo-item__meta"},On={key:0},In={class:"anexo-item__actions"},Fn=["onClick"],Ln=["onClick"],$n={class:"detail-section"},Rn={key:0,class:"detail-loading"},Vn={key:1,class:"detail-empty"},Bn={key:2,class:"orcamentos-list"},Un={class:"orcamento-item__date"},jn={class:"orcamento-item__info"},zn={key:0,class:"orcamento-item__valor"},qn={key:1,class:"orcamento-item__metragem"},Hn={key:2,class:"orcamento-item__proposta"},Gn={key:0,class:"orcamento-item__desc"},Wn=["onClick"],Kn={key:1,class:"detail-section"},Jn={key:0,class:"detail-loading"},Zn={class:"analytics-stats"},Qn={class:"analytics-stat"},Xn={class:"analytics-stat__value"},Yn={class:"analytics-stat"},er={class:"analytics-stat__value"},tr={class:"analytics-stat"},ar={class:"analytics-stat__value"},or={class:"analytics-stat"},sr={class:"analytics-stat__value"},ir={class:"analytics-devices"},lr={class:"analytics-device",title:"Desktop"},nr={class:"analytics-device",title:"Mobile"},rr={class:"analytics-device",title:"Tablet"},dr={key:0,class:"analytics-views"},cr={class:"analytics-views__list"},ur=["onClick"],pr=["title"],vr={class:"analytics-view-item__device"},mr=["title"],fr={class:"analytics-view-item__time"},gr={class:"analytics-view-item__duration"},hr=["onClick"],_r={class:"analytics-view-item__scroll"},yr={key:0,class:"analytics-view-item__play",title:"Assistir gravaÃ§Ã£o"},wr={key:1,class:"analytics-dates"},br={class:"analytics-date"},kr={key:0,class:"analytics-date"},xr={key:2,class:"detail-empty"},Cr={class:"detail-section detail-section--meta"},Er={class:"detail-grid detail-grid--small"},Ar={class:"detail-item"},Nr={class:"detail-value detail-value--mono"},Tr={class:"detail-item"},Mr={class:"detail-value"},Pr={class:"detail-item"},Dr={class:"detail-value"},Sr={class:"detail-item"},Or={class:"detail-value"},Ir={class:"modal__footer modal__footer--proposals"},Fr={class:"modal__footer-right"},Lr=["disabled"],$r={key:0},Rr={key:1},Vr=["disabled"],Br={key:0},Ur={key:1},jr=["disabled"],zr={key:0},qr={key:1},Hr={key:0,class:"html-link-box"},Gr=["href"],Wr={class:"modal"},Kr={class:"modal__body"},Jr={class:"form-group"},Zr={class:"form-row"},Qr={class:"form-group"},Xr={class:"form-group"},Yr={class:"form-row"},ed={class:"form-group"},td={class:"form-group"},ad={class:"form-group"},od={class:"form-row"},sd={class:"form-group"},id={class:"form-group"},ld={class:"form-group"},nd={class:"modal__footer"},rd=["disabled"],dd={class:"modal modal--large"},cd={class:"modal__header"},ud={class:"modal__body modal__body--scroll"},pd={class:"specialist-modal"},vd={class:"specialist-modal__header"},md={class:"specialist-modal__list"},fd={class:"specialist-option__count"},gd=["onClick"],hd={class:"specialist-option__avatar"},_d={class:"specialist-option__name"},yd={class:"specialist-option__count"},wd={class:"modal"},bd={class:"modal__body"},kd={class:"form-group"},xd=["value"],Cd={class:"form-group"},Ed={class:"form-group"},Ad={class:"form-group"},Nd={class:"modal__footer"},Td=["disabled"],Md={class:"modal"},Pd={class:"modal__body"},Dd={class:"form-row"},Sd={class:"form-group"},Od={class:"form-group"},Id={class:"form-row"},Fd={class:"form-group"},Ld={key:0,class:"form-group"},$d=["value"],Rd={class:"form-group"},Vd={class:"form-group"},Bd={class:"modal__footer"},Ud=["disabled"],jd={class:"modal modal--replay"},zd={class:"modal__header"},qd={key:0,class:"replay-info"},Hd={class:"replay-device"},Gd={class:"replay-duration"},Wd={class:"modal__body modal__body--replay"},Kd={key:0,class:"replay-loading"},Jd={key:2,class:"replay-empty"},Zd={class:"modal__footer modal__footer--replay"},Qd={class:"replay-footer-controls"},Xd=["title"],Yd=["value"],ec={class:"replay-footer-time"},tc={class:"replay-footer-speeds"},ac=["onClick"],oc={class:"modal modal--page-times"},sc={class:"modal__header"},ic={class:"modal__body"},lc={key:0,class:"page-times-info"},nc={class:"page-times-info__device"},rc={class:"page-times-info__date"},dc={class:"page-times-info__total"},cc={key:1,class:"page-times-chart"},uc={class:"page-time-bar__label"},pc={class:"page-time-bar__track"},vc={class:"page-time-bar__value"},mc={key:2,class:"page-times-empty"},fc={key:3,class:"page-times-pages"},gc={class:"page-times-pages__list"},hc={class:"modal__footer"},_c={key:4,class:"proposal-notifications"},yc={key:0,class:"proposal-notifications__live"},wc={class:"proposal-notifications__header"},bc={class:"proposal-notifications__count"},kc={class:"proposal-notifications__list"},xc=["onClick"],Cc={class:"proposal-notification__avatar"},Ec={class:"proposal-notification__content"},Ac={class:"proposal-notification__name"},Nc={class:"proposal-notification__meta"},Tc={class:"proposal-notification__time-live"},Mc={class:"proposal-notification__device"},Pc={class:"proposal-notification__scroll"},Dc={key:1,class:"proposal-notifications__history"},Sc={class:"proposal-notifications__list proposal-notifications__list--compact"},Oc=["onClick"],Ic={class:"proposal-notification__type"},Fc={class:"proposal-notification__content"},Lc={class:"proposal-notification__name"},$c={class:"proposal-notification__meta"},Rc=["onClick"],Vc={key:5,class:"loading-overlay"},Bc=30*1e3,Uc=1800,ma="comercial_deals_cache",jc=300*1e3,zc=fa({__name:"Comercial",setup($t){const le=Qo(),f=Xo(),K=u(!0),N=u([]),J=u(!1),G=u(!1),ne=u(!1),d=u(null),Ae=u(null),fe=u(null),nt=u(null),rt=u(null),j=u(""),Z=u(""),ge=u(""),be=u("recent"),ee=u(!1),te=u(-1),he=u(!1),O=u(""),E=u(!1),h=u(!1),w=u(!1),b=u([]),k=u(null),ke=u(null),A=u(null),C=u(""),dt=u(!1),_a=u(["Renata Garcia Penna","JoÃ£o Farah","Isabela de Moraes","Gabriel Accardo","amanda vantini","Rodrigo","Maria Clara"]),ya={gabriel:"Gabriel Accardo",isabela:"Isabela de Moraes",amanda:"Amanda Vantini",joao:"JoÃ£o Farah",renata:"Renata Garcia Penna",rodrigo:"Rodrigo",maria:"Maria Clara",mariaclara:"Maria Clara"},Ue={179:"SÃ£o Paulo (Capital)",180:"Rio de Janeiro (Capital)",181:"Curitiba",182:"Interior ou Litoral Paulista",183:"Interior ou Litoral Carioca",184:"Santa Catarina",185:"Litoral Paranaense",186:"Outro",SP_CAPITAL:"SÃ£o Paulo (Capital)",RJ_CAPITAL:"Rio de Janeiro (Capital)",CURITIBA:"Curitiba",SP_INTERIOR:"Interior ou Litoral Paulista",SP_LITORAL:"Interior ou Litoral Paulista",RJ_INTERIOR:"Interior ou Litoral Carioca",RJ_LITORAL:"Interior ou Litoral Carioca",SANTA_CATARINA:"Santa Catarina",SC:"Santa Catarina",PR_LITORAL:"Litoral Paranaense",OUTRO:"Outro",OUTROS:"Outro"},ct=o=>{if(!o)return"";if(Ue[o])return Ue[o];const e=o.toUpperCase();return Ue[e]?Ue[e]:o},wa=()=>{const o=le.user?.email?.toLowerCase()||"";if(!o)return;const e=o.split("@")[0]||"";for(const[a,s]of Object.entries(ya))if(e.includes(a)){O.value=s,console.log(`[Comercial] PrÃ©-selecionado vendedor: ${s} (email: ${o})`);return}},je=new Map,Ne=o=>{const e=je.get(o);return e&&Date.now()-e.timestamp<Bc?(console.log(`[FE Cache] HIT: ${o}`),e.data):null},Te=(o,e)=>{je.set(o,{data:e,timestamp:Date.now()}),console.log(`[FE Cache] SET: ${o}`)},ze=o=>{const e=Array.from(je.keys()).filter(a=>a.includes(o));e.forEach(a=>je.delete(a)),console.log(`[FE Cache] INVALIDATED: ${e.length} keys for ${o}`)},T=u(null),qe=u(!1),Rt=u(!1),He=u(!1),Ge=u(!1),xe=u(null),I=u(null),Me=u(!1),We=u([]),Vt=u(!1),ut=u(!1),re=u(null),Pe=u([]),pt=u(!1),De=u(!1),R=u(null),de=u(!1),vt=u(0),mt=u("00:00"),Bt=u("00:00"),ft=u(1),Se=u(!1);let W=null,gt=null,Oe=0;const Q=u([]),Ie=u(!1),ht=u(!1),F=u({nome:"",tipo:"PROJETO_ARQUITETONICO",descricao:"",fileData:"",mimeType:"",fileSize:0}),Ut=[{value:"PROPOSTA",label:"Proposta"},{value:"PROJETO_ARQUITETONICO",label:"Projeto ArquitetÃ´nico"},{value:"PLANTA",label:"Planta"},{value:"DOCUMENTO",label:"Documento"},{value:"IMAGEM",label:"Imagem"},{value:"OUTRO",label:"Outro"}],X=u([]),Fe=u(!1),_t=u(!1),P=u({dataEnvio:new Date().toISOString().split("T")[0],valor:0,descricao:"",metragem:0,observacoes:"",propostaId:""}),ce=u(new Map),L=u([]),yt=u([]),Ke=u(null),Je=u(null),Ze=u(null),Qe=u(null),g=u({cliente:"",personPhone:"",personEmail:"",endereco:"",cidade:"",m2Total:"",tipoCliente:"FINAL",origem:"CRM_MANUAL",detalhes:""}),wt={indigo:"#6366f1",blue:"#3b82f6",sky:"#0ea5e9",cyan:"#06b6d4",teal:"#14b8a6",emerald:"#10b981",green:"#22c55e",lime:"#84cc16",yellow:"#eab308",amber:"#f59e0b",orange:"#f97316","orange-light":"#fb923c",peach:"#fdba74",sand:"#fcd34d",gold:"#c9a962",success:"#22c55e",danger:"#ef4444"},Xe=[{id:"Form OrÃ§amento",name:"Form OrÃ§amento",emoji:"ðŸ“‹",color:"indigo",groupName:"Entrada",probability:5,sortOrder:0},{id:"1Âº Contato",name:"1Âº Contato",emoji:"ðŸ“ž",color:"blue",groupName:"Contato",probability:10,sortOrder:1},{id:"1Âº Contato Feito",name:"1Âº Contato Feito",emoji:"âœ…",color:"blue",groupName:"Contato",probability:15,sortOrder:2},{id:"Follow 1Âº Contato",name:"Follow 1Âº Contato",emoji:"ðŸ”„",color:"sky",groupName:"Contato",probability:18,sortOrder:3},{id:"Follow 1Âº Contato Feito",name:"Follow 1Âº Contato Feito",emoji:"âœ…",color:"sky",groupName:"Contato",probability:20,sortOrder:4},{id:"Form Arquiteto",name:"Form Arquiteto",emoji:"ðŸ“",color:"cyan",groupName:"Arquiteto",probability:22,sortOrder:5},{id:"Contato Arquiteto",name:"Contato Arquiteto",emoji:"ðŸ‘·",color:"cyan",groupName:"Arquiteto",probability:25,sortOrder:6},{id:"Proposta Escopo Minimo",name:"Proposta Escopo MÃ­nimo",emoji:"ðŸ“",color:"teal",groupName:"Levantamento",probability:28,sortOrder:7},{id:"CÃ¡lculo de Projeto",name:"CÃ¡lculo de Projeto",emoji:"ðŸ”¢",color:"teal",groupName:"Levantamento",probability:30,sortOrder:8},{id:"Projeto levantado",name:"Projeto Levantado",emoji:"ðŸ“Š",color:"emerald",groupName:"Levantamento",probability:35,sortOrder:9},{id:"CÃ¡lculo Deslocamento",name:"CÃ¡lculo Deslocamento",emoji:"ðŸš—",color:"emerald",groupName:"Levantamento",probability:38,sortOrder:10},{id:"Deslocamento Levantado",name:"Deslocamento Levantado",emoji:"âœ…",color:"green",groupName:"Levantamento",probability:40,sortOrder:11},{id:"Proposta enviada",name:"Proposta Enviada",emoji:"ðŸ“¤",color:"yellow",groupName:"Proposta",probability:45,sortOrder:12},{id:"Fazer Follow 1",name:"Fazer Follow 1",emoji:"1ï¸âƒ£",color:"amber",groupName:"Follow-up",probability:50,sortOrder:13},{id:"Follow 1 Feito",name:"Follow 1 Feito",emoji:"âœ…",color:"amber",groupName:"Follow-up",probability:55,sortOrder:14},{id:"Fazer Follow 2",name:"Fazer Follow 2",emoji:"2ï¸âƒ£",color:"orange",groupName:"Follow-up",probability:60,sortOrder:15},{id:"Follow 2 Feito",name:"Follow 2 Feito",emoji:"âœ…",color:"orange",groupName:"Follow-up",probability:65,sortOrder:16},{id:"Fazer Follow 3",name:"Fazer Follow 3",emoji:"3ï¸âƒ£",color:"peach",groupName:"Follow-up",probability:70,sortOrder:17},{id:"Follow 3 Feito",name:"Follow 3 Feito",emoji:"âœ…",color:"peach",groupName:"Follow-up",probability:75,sortOrder:18},{id:"NegociaÃ§Ãµes",name:"NegociaÃ§Ãµes",emoji:"ðŸ¤",color:"gold",groupName:"NegociaÃ§Ã£o",probability:80,sortOrder:19},{id:"Ganho",name:"Ganho",emoji:"ðŸ†",color:"success",groupName:"Fechamento",probability:100,sortOrder:20},{id:"Perdido",name:"Perdido",emoji:"âŒ",color:"danger",groupName:"Fechamento",probability:0,sortOrder:21}],U=u([...Xe]),ba=z(()=>N.value.length),jt=z(()=>N.value.reduce((o,e)=>o+(e.value||0),0)),ka=z(()=>{const o=_e("Ganho").length,e=_e("Perdido").length,a=o+e;return a>0?Math.round(o/a*100):0}),xa=z(()=>{const o=N.value.filter(a=>(a.daysInStage??0)>0);if(o.length===0)return 0;const e=o.reduce((a,s)=>a+(s.daysInStage||0),0);return Math.round(e/o.length)}),Ca=z(()=>{const o=N.value.filter(e=>(e.value??0)>0);return o.length===0?0:Math.round(jt.value/o.length)}),Ea=["x","admin","admin final","admin test","administrador","rodrigo"],zt=z(()=>{const o=new Set;return N.value.forEach(e=>{e.consultor&&o.add(e.consultor)}),Array.from(o).filter(e=>!Ea.includes(e.toLowerCase())).sort()}),Aa=z(()=>O.value?(O.value.split(" ")[0]??"").toUpperCase():""),Na=z(()=>{let o=[...N.value];if(j.value){const e=j.value.toLowerCase();o=o.filter(a=>a.clientName?.toLowerCase().includes(e)||a.endereco?.toLowerCase().includes(e)||a.personEmail?.toLowerCase().includes(e)||a.phone?.includes(e))}if(ge.value){const e=parseInt(ge.value),a=new Date;a.setDate(a.getDate()-e),o=o.filter(s=>s.dealAddTime?new Date(s.dealAddTime)>=a:!0)}switch(Z.value&&(o=o.filter(e=>e.consultor===Z.value)),O.value&&(o=o.filter(e=>e.consultor===O.value)),be.value){case"recent":o.sort((e,a)=>{const s=new Date(e.dealAddTime||0).getTime();return new Date(a.dealAddTime||0).getTime()-s});break;case"oldest":o.sort((e,a)=>{const s=new Date(e.dealAddTime||0).getTime(),n=new Date(a.dealAddTime||0).getTime();return s-n});break;case"value-high":o.sort((e,a)=>(a.value||0)-(e.value||0));break;case"value-low":o.sort((e,a)=>(e.value||0)-(a.value||0));break;case"name-az":o.sort((e,a)=>(e.clientName||"").localeCompare(a.clientName||""));break;case"name-za":o.sort((e,a)=>(a.clientName||"").localeCompare(e.clientName||""));break;case"days-high":o.sort((e,a)=>(a.daysInStage||0)-(e.daysInStage||0));break;case"days-low":o.sort((e,a)=>(e.daysInStage||0)-(a.daysInStage||0));break}return o}),Ta=z(()=>U.value.map((o,e)=>({id:o.id,name:o.name,color:wt[o.color]||o.color,groupName:o.groupName,probability:o.probability??50,sortOrder:o.sortOrder??e,isDefault:Xe.some(a=>a.id===o.id)}))),Y=z(()=>{const o=Array.from(ce.value.values());if(!O.value)return o;const e=O.value.toLowerCase();return o.filter(a=>a.ownerUserName?.toLowerCase()===e)}),Le=z(()=>{if(!O.value)return yt.value;const o=O.value.toLowerCase();return yt.value.filter(e=>e.ownerUserName?.toLowerCase()===o)}),bt=z(()=>{if(!O.value)return L.value;const o=O.value.toLowerCase();return L.value.filter(e=>e.ownerUserName?.toLowerCase()===o)}),Ye=z(()=>Y.value.length+Le.value.length),Ma=()=>{E.value=!E.value},qt=o=>{if(!o||o<0)return"0:00";const e=Math.floor(o/60),a=Math.floor(o%60);return`${e}:${a.toString().padStart(2,"0")}`},Pa=o=>{const a=Date.now()-o,s=Math.floor(a/6e4),n=Math.floor(a/36e5);return s<1?"agora":s<60?`${s}min`:n<24?`${n}h`:`${Math.floor(n/24)}d`},kt=o=>{b.value=b.value.filter(e=>e.id!==o)},Da=o=>{const e=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;b.value.find(s=>s.leadId===o.leadId)||(b.value.unshift({id:e,clientName:o.clientName,ownerUserName:o.ownerUserName,leadId:o.leadId,deviceType:o.deviceType,sessionId:o.sessionId||e,timestamp:new Date}),b.value.length>3&&(b.value=b.value.slice(0,3)),setTimeout(()=>{kt(e)},8e3),w.value=!0)},Ht=o=>{if(!E.value)return;const e=o.target,a=ke.value,s=k.value;a&&!a.contains(e)&&s&&!s.contains(e)&&(E.value=!1)},$e=z(()=>{if(!j.value||j.value.length<2)return[];const o=j.value.toLowerCase();return N.value.filter(e=>e.clientName?.toLowerCase().includes(o)||e.personEmail?.toLowerCase().includes(o)||e.phone?.includes(o)||e.cidadeExecucao?.toLowerCase().includes(o)).slice(0,8)}),Gt={"Form OrÃ§amento":'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1" ry="1"/><path d="M12 11h4"/><path d="M12 16h4"/><path d="M8 11h.01"/><path d="M8 16h.01"/></svg>',FORM_ORCAMENTO:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1" ry="1"/><path d="M12 11h4"/><path d="M12 16h4"/><path d="M8 11h.01"/><path d="M8 16h.01"/></svg>',"1Âº Contato":'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>',PRIMEIRO_CONTATO:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>',CONTATO_ARQUITETO:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M2 18v3h20v-3"/><path d="M6 14v4"/><path d="M18 14v4"/><path d="M12 14v4"/><path d="M4 10h16"/><path d="M4 10 12 3l8 7"/></svg>',AGUARDANDO_ARQ:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M5 22h14"/><path d="M5 2h14"/><path d="M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22"/><path d="M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2"/></svg>',LEVANTAMENTO:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v18h18"/><path d="M8 17V9"/><path d="M12 17V5"/><path d="M16 17v-4"/><path d="M20 17v-8"/></svg>',VISITA_AGENDADA:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/><path d="M9 16l2 2 4-4"/></svg>',VISITA_REALIZADA:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>',PROPOSTA_EM_ELABORACAO:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>',PROPOSTA_ENVIADA:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>',FOLLOW_1:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>',FOLLOW_2:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>',FOLLOW_3:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>',FOLLOW_4:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>',FOLLOW_5:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>',NEGOCIACAO:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>',Ganho:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>',Perdido:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>'},Wt=o=>Gt[o]||Gt["Form OrÃ§amento"],Sa=o=>U.value.find(a=>a.id===o)?.name||o,Oa=o=>U.value.find(a=>a.id===o)?.color||"gray",Ia=()=>{setTimeout(()=>{ee.value=!1,te.value=-1},200)},Fa=()=>{const o=$e.value[te.value];te.value>=0&&o&&Jt(o)},Kt=o=>{if(!ee.value||$e.value.length===0)return;const e=te.value+o;e>=-1&&e<$e.value.length&&(te.value=e)},Jt=o=>{ee.value=!1,te.value=-1,Tt(o)},La=()=>{j.value="",ee.value=!1,te.value=-1},_e=o=>Na.value.filter(e=>e.status===o),$a=o=>_e(o).reduce((e,a)=>e+(a.value||0),0),Ce=o=>o>=1e6?`R$ ${(o/1e6).toFixed(1)}M`:o>=1e3?`R$ ${(o/1e3).toFixed(0)}K`:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0}).format(o),Ra=o=>o?o.split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase():"??",Va={"gabriel accardo":"#e63946","isabela de moraes":"#2563eb","amanda vantini":"#16a34a","joÃ£o farah":"#f59e0b","joao farah":"#f59e0b","renata garcia penna":"#7c3aed",rodrigo:"#06b6d4","maria clara":"#ec4899"},Zt=["#e63946","#2563eb","#16a34a","#f59e0b","#7c3aed","#06b6d4","#ec4899","#84cc16","#f97316","#0d9488"],xt=new Map,Ba=o=>{if(!o||o==="N/A")return"#6b7280";const e=o.toLowerCase().trim(),a=xt.get(e);if(a)return a;const s=Va[e];if(s)return xt.set(e,s),s;let n=0;for(let v=0;v<e.length;v++)n=(n<<5)-n+e.charCodeAt(v),n=n&n;const p=Math.abs(n)%Zt.length,c=Zt[p]??"#6b7280";return xt.set(e,c),c},Ua=o=>{if(!o||o==="N/A")return"";const e=o.split(" ")[0]||"";return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},Qt=o=>o?o>14?"deal-card__days--danger":o>7?"deal-card__days--warning":"":"",ja=o=>{const e=U.value.find(a=>a.id===o);return e&&(wt[e.color]||e.color)||"#6366f1"},et=o=>o?U.value.filter(a=>a.id!=="Ganho"&&a.id!=="Perdido").findIndex(a=>a.id===o):-1,za=o=>d.value?.status===o&&d.value?.daysInStage||0,Ct=async o=>{if(!d.value||d.value.status===o)return;const e=d.value,a=e.status,s=e.id;e.status=o,e.daysInStage=0;const n=N.value.findIndex(p=>p.id===s);if(n>=0){const p=N.value[n];p&&(p.status=o,p.daysInStage=0)}try{if(!(await fetch(`/api/admin/comercial/${s}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:o})})).ok)throw new Error("Falha ao atualizar estÃ¡gio");f.success(`Movido para ${U.value.find(c=>c.id===o)?.name||o}`)}catch(p){if(e.status=a,n>=0){const c=N.value[n];c&&(c.status=a)}f.error("Erro ao atualizar estÃ¡gio"),console.error("Error updating stage:",p)}},Et=o=>{if(!o)return"N/A";const e=new Date(o);return isNaN(e.getTime())?"N/A":e.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},tt=o=>{if(!o)return"N/A";const e=new Date(o);if(isNaN(e.getTime()))return"N/A";const s=new Date().getTime()-e.getTime(),n=Math.floor(s/6e4),p=Math.floor(s/36e5),c=Math.floor(s/864e5);return n<60?n<=1?"agora":`hÃ¡ ${n}min`:p<24?`hÃ¡ ${p}h`:c<7?`hÃ¡ ${c}d`:e.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})},Xt=o=>!!(o.gpsRoad||o.gpsNeighbourhood||o.gpsCity||o.gpsState||o.city||o.region||o.country),Yt=["ðŸ¦Š","ðŸ±","ðŸ¶","ðŸ¦","ðŸ¯","ðŸ»","ðŸ¼","ðŸ¨","ðŸµ","ðŸ¦„","ðŸ¸","ðŸ™","ðŸ¦‹","ðŸ¦…","ðŸ¦‰","ðŸ¬","ðŸ¦ˆ","ðŸ¢","ðŸ¦©","ðŸ¦œ","ðŸŒ¸","ðŸŒº","ðŸŒ»","ðŸŒ¹","ðŸŒ·","ðŸ€","ðŸ","ðŸŒ¿","ðŸŒµ","ðŸŒ´","â­","ðŸŒ™","â˜€ï¸","âš¡","ðŸ”¥","ðŸ’§","â„ï¸","ðŸŒˆ","ðŸ’Ž","ðŸŽ¯","ðŸŽ¨","ðŸŽ­","ðŸŽª","ðŸŽ¡","ðŸš€","âœˆï¸","ðŸŽ¸","ðŸŽ¹","ðŸŽº","ðŸŽ»"],ea=new Map,At=o=>{if(!o)return"ðŸ‘¤";const e=ea.get(o);if(e)return e;let a=0;for(let p=0;p<o.length;p++){const c=o.charCodeAt(p);a=(a<<5)-a+c,a=a&a}const s=Math.abs(a)%Yt.length,n=Yt[s]??"ðŸ‘¤";return ea.set(o,n),n},qa=o=>{const e=[];return o.gpsRoad&&e.push(o.gpsRoad),o.gpsNeighbourhood&&e.push(o.gpsNeighbourhood),o.gpsCity&&e.push(o.gpsCity),o.gpsState&&e.push(o.gpsState),e.length>0?e.join(", "):o.city&&o.region?`${o.city}, ${o.region}`:o.city?o.city:o.region?o.region:o.country?o.country:"LocalizaÃ§Ã£o nÃ£o disponÃ­vel"},Ha=(o,e)=>{Ae.value=e,o.dataTransfer.effectAllowed="move",o.dataTransfer.setData("text/plain",e.id),setTimeout(()=>{o.target.classList.add("deal-card--dragging")},0)},Ga=()=>{Ae.value=null,fe.value=null},Wa=(o,e)=>{o.preventDefault(),fe.value=e},Ka=()=>{fe.value=null},Ja=async(o,e)=>{o.preventDefault(),fe.value=null;const a=o.dataTransfer?.getData("text/plain");if(!a)return;const s=N.value.find(p=>p.id===a);if(!s||s.status===e)return;const n=s.status;s.status=e,s.daysInStage=0;try{if(!(await fetch(`/api/admin/comercial/${a}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e})})).ok)throw new Error("Falha ao mover deal");const c=U.value.find(v=>v.id===e)?.name;f.success(`Deal movido para ${c}`)}catch{s.status=n,f.error("Erro ao mover deal")}},Za=()=>{J.value=!J.value},Qa=()=>{j.value="",Z.value="",ge.value="",be.value="recent"},ta=o=>{O.value=o,he.value=!1},Xa=o=>N.value.filter(e=>e.consultor===o).length,aa=o=>{g.value={cliente:"",personPhone:"",personEmail:"",endereco:"",cidade:"",m2Total:"",tipoCliente:"FINAL",origem:"CRM_MANUAL",detalhes:""},G.value=!0},at=()=>{G.value=!1},Nt=u(null),Ya=async()=>{if(!g.value.cliente||!g.value.personPhone)return;const o=le.user?.name||le.user?.email||"";try{const e=await B.create({cliente:g.value.cliente,personPhone:g.value.personPhone,personEmail:g.value.personEmail||void 0,endereco:g.value.endereco||void 0,cidade:g.value.cidade||void 0,m2Total:g.value.m2Total?parseFloat(g.value.m2Total):void 0,tipoCliente:g.value.tipoCliente,origem:g.value.origem,detalhes:g.value.detalhes||void 0,consultor:o});if(e.data?.success&&e.data?.data){const a=e.data.data,s=a.comercialData?.id||a.id,n={id:s,personName:a.cliente||g.value.cliente,clientName:a.cliente||g.value.cliente,consultor:o,ownerUserName:o,status:"Form OrÃ§amento",stageName:"Form OrÃ§amento",dealValue:void 0,m2Total:g.value.m2Total?parseFloat(g.value.m2Total):void 0,addTime:new Date().toISOString(),dealAddTime:new Date().toISOString(),stageId:"Form OrÃ§amento",stageChangedTime:new Date().toISOString(),pipedriveId:void 0,personPhone:g.value.personPhone,phone:g.value.personPhone,personEmail:g.value.personEmail||void 0,cidadeExecucao:g.value.cidade||void 0,endereco:g.value.endereco||void 0,tipoCliente:g.value.tipoCliente,origem:g.value.origem,resumo:g.value.detalhes||void 0,daysInStage:0};at(),Nt.value=s,N.value.unshift(n),f.success(`Lead "${g.value.cliente}" criado com sucesso!`),setTimeout(()=>{Nt.value=null},3e3)}else throw new Error(e.data?.error||"Falha ao criar lead")}catch(e){console.error("Erro ao criar lead:",e),f.error(e.message||"Erro ao criar lead")}},Tt=async o=>{d.value=o,T.value=null,I.value=null,Q.value=[],X.value=[],await oa(o.id)},oa=async(o,e=!1)=>{const a=`details:${o}`,s=Date.now();if(!e){const n=Ne(a);if(n){console.log(`[FE] Cache HIT details (${Date.now()-s}ms)`),T.value=n.proposta,I.value=n.analytics,Q.value=n.anexos||[],X.value=n.orcamentos||[],n.proposta?.id&&Dt(n.proposta.id);return}}qe.value=!0,Me.value=!0,Ie.value=!0,Fe.value=!0;try{const n=await B.getLeadDetails(o);n.data.success&&(T.value=n.data.proposta,I.value=n.data.analytics,Q.value=n.data.anexos||[],X.value=n.data.orcamentos||[],Te(a,n.data),console.log(`[FE] Loaded all details in ${n.data.loadTime}ms (total: ${Date.now()-s}ms)`),n.data.proposta?.id&&Dt(n.data.proposta.id))}catch(n){console.error("Erro ao buscar detalhes do lead:",n),await Promise.all([Pt(o),co(o),_o(o)]);const p=T.value;p?.id&&(eo(p.id),Dt(p.id))}finally{qe.value=!1,Me.value=!1,Ie.value=!1,Fe.value=!1}},Mt=()=>{d.value=null,T.value=null,I.value=null,We.value=[],Q.value=[],X.value=[]},Pt=async(o,e=!1)=>{const a=`proposta:${o}`;if(!e){const s=Ne(a);if(s){T.value=s;return}}qe.value=!0;try{const s=await B.getUltimaProposta(o);s.data?.proposta&&(T.value=s.data.proposta,Te(a,s.data.proposta))}catch(s){s.response?.status!==404&&console.error("Erro ao buscar proposta:",s)}finally{qe.value=!1}},eo=async(o,e=!1)=>{const a=`analytics:${o}`;if(!e){const s=Ne(a);if(s){I.value=s;return}}Me.value=!0;try{const s=await B.getPropostaAnalytics(o);s.data?.stats&&(I.value=s.data,Te(a,s.data))}catch(s){s.response?.status!==404&&console.error("Erro ao buscar analytics:",s)}finally{Me.value=!1}},Dt=async o=>{Vt.value=!0;try{const e=await B.getRecordings(o);e.data?.recordings&&(We.value=e.data.recordings)}catch(e){e.response?.status!==404&&console.error("Erro ao buscar recordings:",e),We.value=[]}finally{Vt.value=!1}},to=async o=>{re.value=o,pt.value=!0,ut.value=!0;try{const e=await B.getRecording(o.id);e.data?.events&&(Pe.value=e.data.events)}catch(e){console.error("Erro ao carregar eventos do recording:",e),f.error("Erro ao carregar gravaÃ§Ã£o"),Pe.value=[]}finally{pt.value=!1}},St=()=>{ut.value=!1,re.value=null,Pe.value=[]},ao=o=>{R.value=o,De.value=!0},oo=o=>{if(!R.value?.pageTimes)return 0;const e=Object.values(R.value.pageTimes),a=Math.max(...e,1);return Math.min(100,o/a*100)},Ot=o=>{if(o)return We.value.find(e=>e.sessionId===o)},so=o=>{const e=Ot(o);e&&to(e)},sa=o=>{const e=Math.floor(Math.max(0,o)/60).toString().padStart(2,"0"),a=Math.floor(Math.max(0,o)%60).toString().padStart(2,"0");return`${e}:${a}`},It=()=>{if(!W)return;const o=Math.max(0,W.getCurrentTime()),e=o/1e3;mt.value=sa(e),Oe>0&&(vt.value=o/Oe*100),de.value&&(gt=requestAnimationFrame(It))},io=()=>{W&&(de.value?(W.pause(),gt&&cancelAnimationFrame(gt),de.value=!1):(W.play(),de.value=!0,It()))},lo=o=>{if(!W)return;const a=parseInt(o.target.value)/100*Oe;W.pause(),W.play(a),de.value=!0,It()},no=o=>{W&&(ft.value=o,W.setConfig({speed:o}))},ro=()=>{W&&(Se.value=!Se.value,W.setConfig({skipInactive:Se.value}))};ga(Pe,async o=>{if(o.length>0){if(await as(),de.value=!1,vt.value=0,mt.value="00:00",ft.value=1,Se.value=!1,!o.some(n=>n.type===2)){console.warn("[Replay] GravaÃ§Ã£o sem FullSnapshot - nÃ£o Ã© possÃ­vel reproduzir"),f.error("Esta gravaÃ§Ã£o estÃ¡ incompleta (sem snapshot inicial)");return}const a=document.getElementById("rrweb-player");a&&(a.innerHTML="");const s=document.createElement("script");s.src="https://cdn.jsdelivr.net/npm/rrweb@1.1.3/dist/rrweb.min.js",s.onload=()=>{if(!document.getElementById("rrweb-css")){const n=document.createElement("link");n.id="rrweb-css",n.rel="stylesheet",n.href="https://cdn.jsdelivr.net/npm/rrweb@1.1.3/dist/rrweb.min.css",document.head.appendChild(n)}setTimeout(()=>{const n=window.rrweb;if(a&&n?.Replayer)try{const p=o.find(V=>V.type===4);console.log("[Replay] Meta event:",p),p?.data&&console.log("[Replay] Recorded viewport:",p.data.width,"x",p.data.height),W=new n.Replayer(o,{root:a,skipInactive:!1,showWarning:!1,showDebug:!1,blockClass:"rr-block",speed:1}),setTimeout(()=>{const V=a.querySelector(".replayer-wrapper"),ue=a.querySelector("iframe");console.log("[Replay] Wrapper element:",V),console.log("[Replay] Wrapper dimensions:",V?.offsetWidth,"x",V?.offsetHeight),console.log("[Replay] Iframe element:",ue),console.log("[Replay] Iframe dimensions:",ue?.offsetWidth,"x",ue?.offsetHeight),ue&&(console.log("[Replay] Iframe style.width:",ue.style.width),console.log("[Replay] Iframe style.height:",ue.style.height))},500);const c=o[0],v=o[o.length-1];Oe=Math.max(0,v.timestamp-c.timestamp),Bt.value=sa(Oe/1e3)}catch(p){console.error("[Replay] Error initializing player:",p),f.error("Erro ao inicializar o player")}},200)},s.onerror=()=>{f.error("Erro ao carregar biblioteca de replay")},document.head.appendChild(s)}});const co=async(o,e=!1)=>{const a=`anexos:${o}`;if(!e){const s=Ne(a);if(s){Q.value=s;return}}Ie.value=!0;try{const s=await B.getAnexos(o);s.data.success&&(Q.value=s.data.anexos,Te(a,s.data.anexos))}catch(s){console.error("Erro ao buscar anexos:",s)}finally{Ie.value=!1}},uo=()=>{F.value={nome:"",tipo:"PROJETO_ARQUITETONICO",descricao:"",fileData:"",mimeType:"",fileSize:0},ht.value=!0},ot=()=>{ht.value=!1},po=o=>{const a=o.target.files?.[0];if(!a)return;if(a.size>10*1024*1024){f.error("Arquivo muito grande. MÃ¡ximo 10MB");return}const s=new FileReader;s.onload=n=>{const c=n.target?.result?.split(",")[1]||"";F.value.fileData=c,F.value.mimeType=a.type,F.value.fileSize=a.size,F.value.nome=F.value.nome||a.name},s.readAsDataURL(a)},vo=async()=>{if(!d.value||!F.value.nome){f.warning("Nome Ã© obrigatÃ³rio");return}try{const o=await B.createAnexo(d.value.id,{nome:F.value.nome,tipo:F.value.tipo,descricao:F.value.descricao||void 0,fileData:F.value.fileData||void 0,mimeType:F.value.mimeType||void 0,fileSize:F.value.fileSize||void 0});o.data.success&&(f.success("Anexo adicionado!"),Q.value.unshift(o.data.anexo),ze(d.value.id),ot())}catch(o){console.error("Erro ao criar anexo:",o),f.error("Erro ao adicionar anexo")}},mo=async o=>{if(d.value)try{const e=await B.downloadAnexo(d.value.id,o.id);if(e.data.success&&e.data.anexo.fileData){const a=atob(e.data.anexo.fileData),s=new Array(a.length);for(let V=0;V<a.length;V++)s[V]=a.charCodeAt(V);const n=new Uint8Array(s),p=new Blob([n],{type:o.mimeType||"application/octet-stream"}),c=window.URL.createObjectURL(p),v=document.createElement("a");v.href=c,v.download=o.nome,v.click(),window.URL.revokeObjectURL(c)}else f.warning("Anexo sem arquivo para download")}catch(e){console.error("Erro ao baixar anexo:",e),f.error("Erro ao baixar anexo")}},fo=async o=>{if(d.value&&confirm(`Excluir anexo "${o.nome}"?`))try{(await B.deleteAnexo(d.value.id,o.id)).data.success&&(f.success("Anexo excluÃ­do!"),Q.value=Q.value.filter(a=>a.id!==o.id),ze(d.value.id))}catch(e){console.error("Erro ao excluir anexo:",e),f.error("Erro ao excluir anexo")}},go=o=>o?o<1024?`${o} B`:o<1024*1024?`${(o/1024).toFixed(1)} KB`:`${(o/(1024*1024)).toFixed(1)} MB`:"",ho=o=>Ut.find(e=>e.value===o)?.label||o,_o=async(o,e=!1)=>{const a=`orcamentos:${o}`;if(!e){const s=Ne(a);if(s){X.value=s;return}}Fe.value=!0;try{const s=await B.getOrcamentosEnviados(o);s.data.success&&(X.value=s.data.orcamentos,Te(a,s.data.orcamentos))}catch(s){console.error("Erro ao buscar orÃ§amentos:",s)}finally{Fe.value=!1}},yo=()=>{P.value={dataEnvio:new Date().toISOString().split("T")[0],valor:T.value?.valorTotal?Number(T.value.valorTotal):0,descricao:"",metragem:d.value?.metragemEstimada||d.value?.m2Total||0,observacoes:"",propostaId:T.value?.id||""},_t.value=!0},st=()=>{_t.value=!1},wo=async()=>{if(!d.value||!P.value.dataEnvio){f.warning("Data de envio Ã© obrigatÃ³ria");return}try{const o=await B.createOrcamentoEnviado(d.value.id,{dataEnvio:P.value.dataEnvio,valor:P.value.valor||void 0,descricao:P.value.descricao||void 0,metragem:P.value.metragem||void 0,observacoes:P.value.observacoes||void 0,propostaId:P.value.propostaId||void 0});o.data.success&&(f.success("OrÃ§amento registrado!"),X.value.unshift(o.data.orcamento),ze(d.value.id),st())}catch(o){console.error("Erro ao criar orÃ§amento:",o),f.error("Erro ao registrar orÃ§amento")}},bo=async o=>{if(d.value&&confirm("Excluir registro de orÃ§amento enviado?"))try{(await B.deleteOrcamentoEnviado(d.value.id,o.id)).data.success&&(f.success("Registro excluÃ­do!"),X.value=X.value.filter(a=>a.id!==o.id),ze(d.value.id))}catch(e){console.error("Erro ao excluir orÃ§amento:",e),f.error("Erro ao excluir registro")}},ko=o=>new Date(o).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}),xo=async()=>{if(!d.value)return;const o=d.value,e=new URLSearchParams;o.clientName&&e.set("cliente",o.clientName),o.phone&&e.set("telefone",o.phone),o.personEmail&&e.set("email",o.personEmail),o.endereco&&e.set("endereco",o.endereco),o.cidadeExecucao&&e.set("cidade",o.cidadeExecucao);const a=o.metragemEstimada||o.m2Total||o.metragemEstimadaN1;a&&e.set("metragem",String(a)),o.tipoProjeto&&e.set("tipoProjeto",o.tipoProjeto),o.descritivoArea&&e.set("area",o.descritivoArea),o.estadoObra&&e.set("estadoObra",o.estadoObra),o.nomeEscritorio&&e.set("arquiteto",o.nomeEscritorio),o.resumo&&e.set("detalhes",o.resumo),!o.resumo&&o.descritivoArea&&e.set("detalhes",o.descritivoArea),e.set("dealId",o.id);const s=O.value||Z.value||o.consultor;if(s&&e.set("consultor",s),o.dataPrevistaExec){const p=new Date(o.dataPrevistaExec);if(!isNaN(p.getTime())){const c=p.toISOString().split("T")[0];e.set("dataPrevistaExec",c)}}const n=`/propostas.html?${e.toString()}`;window.open(n,"_blank"),f.info("Gerador de propostas aberto em nova aba")},Co=()=>{if(!T.value||!T.value.pdfBase64){f.warning("Proposta sem PDF. Gere uma nova proposta primeiro.");return}try{const o=atob(T.value.pdfBase64),e=new Array(o.length);for(let p=0;p<o.length;p++)e[p]=o.charCodeAt(p);const a=new Uint8Array(e),s=new Blob([a],{type:"application/pdf"}),n=window.URL.createObjectURL(s);window.open(n,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(n),1e4),f.success("Proposta aberta em nova aba")}catch(o){console.error("Erro ao abrir proposta:",o),f.error("Erro ao abrir proposta")}},Eo=async()=>{if(!d.value||!T.value)return;const o=d.value,e=T.value;if(!o.phone){f.warning("Lead sem telefone cadastrado");return}if(!e.pdfBase64){f.warning("Proposta sem PDF gerado. Gere uma nova proposta primeiro.");return}He.value=!0;try{const a=o.phone.replace(/\D/g,""),s=o.primeiroNomeZapi||o.clientName?.split(" ")[0]||"Cliente",n=O.value?.split(" ")[0]||Z.value?.split(" ")[0]||o.consultor?.split(" ")[0]||le.user?.name?.split(" ")[0]||"especialista",p=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.valorTotal),c=`OlÃ¡ ${s}! Aqui Ã© o ${n} da Monofloor. Conforme conversamos, segue a proposta no valor de ${p}. Qualquer dÃºvida estou Ã  disposiÃ§Ã£o!`,v=atob(e.pdfBase64),V=new Array(v.length);for(let se=0;se<v.length;se++)V[se]=v.charCodeAt(se);const ue=new Uint8Array(V),ra=new Blob([ue],{type:"application/pdf"}),Jo=new Date().toISOString().split("T")[0],da=`Proposta-Monofloor-${o.clientName?.replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"-")||"Cliente"}-${Jo}.pdf`,ca=new File([ra],da,{type:"application/pdf"});if(navigator.share&&navigator.canShare&&navigator.canShare({files:[ca]}))try{await navigator.share({title:`Proposta Monofloor - ${o.clientName}`,text:c,files:[ca]}),f.success("âœ… Compartilhamento aberto! Selecione WhatsApp para enviar."),await B.enviarPropostaWhatsApp(o.id,e.id,{phoneNumber:a,message:c}),await Pt(o.id);return}catch(se){if(se.name!=="AbortError")console.log("Web Share falhou, usando fallback:",se);else return}const ua=window.URL.createObjectURL(ra),Ve=document.createElement("a");Ve.href=ua,Ve.download=da,document.body.appendChild(Ve),Ve.click(),document.body.removeChild(Ve),window.URL.revokeObjectURL(ua),await new Promise(se=>setTimeout(se,500));const Zo=`https://wa.me/55${a}?text=${encodeURIComponent(c)}`;window.open(Zo,"_blank"),f.info("ðŸ“¥ PDF baixado! Arraste para a conversa do WhatsApp ou clique em ðŸ“Ž",{duration:6e3}),await B.enviarPropostaWhatsApp(o.id,e.id,{phoneNumber:a,message:c}),await Pt(o.id)}catch(a){console.error("Erro ao enviar proposta:",a),f.error("Erro ao enviar proposta via WhatsApp")}finally{He.value=!1}},Ao=async()=>{if(!d.value||!T.value){f.warning("Selecione um lead e gere uma proposta primeiro");return}Ge.value=!0;try{const o=d.value,e=T.value,a=e.dadosCalculo||{},s={propostaId:e.id,clienteNome:o.personName||o.title||"Cliente",metragemTotalStelion:a.metragemTotalStelion||0,materiaisStelion:a.materiaisStelion||0,maoObraStelion:a.maoObraStelion||0,impostosStelion:a.impostosStelion||0,valorTotalStelion:a.valorTotalStelion||0,metragemTotalLilit:a.metragemTotalLilit||0,materiaisLilit:a.materiaisLilit||0,maoObraLilit:a.maoObraLilit||0,impostosLilit:a.impostosLilit||0,valorTotalLilit:a.valorTotalLilit||0,metragemTotal:a.metragemTotal||Number(e.metragem)||0,materiaisTotal:a.materiaisTotal||0,maoObraTotal:a.maoObraTotal||0,impostosTotal:a.impostosTotal||0,valorTotal:Number(e.valorTotal)||0,precoBaseStelion:a.precoBaseStelion||910,precoBaseLilit:a.precoBaseLilit||590,pisoStelion:a.pisoStelion||0,paredeStelion:a.paredeStelion||0,pisoLilit:a.pisoLilit||0,paredeLilit:a.paredeLilit||0},n=await fetch("/api/proposals/generate-html",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){const c=await n.json();throw new Error(c.message||"Erro ao gerar HTML")}const p=await n.json();xe.value=p.url,f.success("Link HTML gerado com sucesso!")}catch(o){console.error("Erro ao gerar HTML:",o),f.error(o.message||"Erro ao gerar proposta HTML")}finally{Ge.value=!1}},No=()=>{xe.value&&navigator.clipboard.writeText(xe.value).then(()=>{f.success("Link copiado para a Ã¡rea de transferÃªncia!")})},q=(o,e)=>{A.value=o,C.value=String(e||"")},Ee=()=>{A.value=null,C.value=""},Ft=async o=>{if(!d.value||dt.value)return;const e=d.value.id,a=C.value.trim(),s=String(To(d.value,o)||"");if(a===s){Ee();return}dt.value=!0;try{const p={clientName:"personName",phone:"personPhone",personEmail:"personEmail",endereco:"endereco",cidadeExecucao:"cidadeExecucao",metragemEstimada:"metragemEstimada",estadoObra:"estadoObra",budgetEstimado:"budgetEstimado",dataPrevistaExec:"dataPrevistaExec",nomeEscritorio:"nomeEscritorio",detalhesArquiteto:"detalhesArquiteto",resumo:"resumo",descritivoArea:"descritivoArea",consultor:"consultorId",value:"dealValue"}[o]||o,c={};if(o==="value"||o==="metragemEstimada"?c[p]=parseFloat(a)||0:c[p]=a,await B.update(e,c),d.value){d.value[o]=o==="value"?parseFloat(a)||0:a;const v=N.value.findIndex(V=>V.id===e);v!==-1&&(N.value[v][o]=o==="value"?parseFloat(a)||0:a)}f.success("Campo atualizado")}catch(n){console.error("Error saving field:",n),f.error("Erro ao salvar campo")}finally{dt.value=!1,Ee()}},To=(o,e)=>o[e],H=o=>{Ft(o)},ae=(o,e)=>{o.key==="Enter"?(o.preventDefault(),Ft(e)):o.key==="Escape"&&Ee()},Lt=o=>{if(o.phone){const e=o.phone.replace(/\D/g,""),a=o.primeiroNomeZapi||o.clientName?.split(" ")[0]||"Cliente";let s="especialista";O.value?s=O.value.split(" ")[0]||"especialista":Z.value?s=Z.value.split(" ")[0]||"especialista":o.consultor&&o.consultor!=="N/A"?s=o.consultor.split(" ")[0]||"especialista":le.user?.name&&(s=le.user.name.split(" ")[0]||"especialista");const n=o.metragemEstimada||o.m2||"sua Ã¡rea",c=["joÃ£o","joao","gabriel"].includes(s.toLowerCase())?"o":"a",v=`OlÃ¡ ${a}, tudo bem? Sou ${s}, especialista da Monofloor e serei ${c} responsÃ¡vel por cuidar do seu projeto. Vi que fez uma solicitaÃ§Ã£o de ${n}mÂ². Quer me falar um pouco mais sobre o projeto?`,V=encodeURIComponent(v);window.open(`https://wa.me/55${e}?text=${V}`,"_blank")}else f.warning("Deal sem telefone cadastrado")},Mo=o=>{o?window.open(o,"_blank"):f.warning("Link do Pipedrive nÃ£o disponÃ­vel")},Po=(o,e)=>{console.log("Open menu for:",o)},ia=Object.entries(wt).reduce((o,[e,a])=>({...o,[a]:e}),{}),Do=o=>{U.value=o.map(e=>{const s=(U.value.find(p=>p.id===e.id)||Xe.find(p=>p.id===e.id))?.emoji||"ðŸ“Œ",n=ia[e.color]||Oo(e.color);return{id:e.id,name:e.name,emoji:s,color:n,groupName:e.groupName,probability:e.probability,sortOrder:e.sortOrder}}),localStorage.setItem("monofloor_pipeline_stages",JSON.stringify(U.value)),ne.value=!1,f.success("Pipeline atualizado com sucesso!")},So=()=>{U.value=[...Xe],localStorage.removeItem("monofloor_pipeline_stages"),f.info("Pipeline restaurado para configuraÃ§Ã£o padrÃ£o")},Oo=o=>ia[o.toLowerCase()]||o,Io=()=>{const o=localStorage.getItem("monofloor_pipeline_stages");if(o)try{const e=JSON.parse(o);Array.isArray(e)&&e.length>0&&(U.value=e)}catch{}},Fo=()=>{try{const o=sessionStorage.getItem(ma);if(!o)return null;const{data:e,timestamp:a}=JSON.parse(o),s=Date.now()-a;return s<jc?(console.log(`[Cache] HIT - ${e.length} deals (age: ${Math.round(s/1e3)}s)`),e):(console.log(`[Cache] EXPIRED (age: ${Math.round(s/1e3)}s)`),null)}catch{return null}},Lo=o=>{try{const e={data:o,timestamp:Date.now()};sessionStorage.setItem(ma,JSON.stringify(e)),console.log(`[Cache] SAVED - ${o.length} deals`)}catch(e){console.warn("[Cache] Failed to save:",e)}},$o=async(o=!1)=>{K.value=!0;const e=Date.now();try{if(!o){const a=Fo();if(a){N.value=a,K.value=!1,setTimeout(()=>la(!0),100);return}}await la(!1)}catch(a){console.error("Error fetching deals:",a),f.error("Erro ao carregar deals")}finally{const a=Date.now()-e,s=Uc-a;s>0&&K.value&&await new Promise(n=>setTimeout(n,s)),K.value=!1}},la=async o=>{const e=Date.now(),a=await fetch("/api/admin/comercial");if(!a.ok)throw new Error("Falha ao carregar deals");const s=await a.json();console.log(`[API] ${o?"Background":"Direct"} fetch: ${Date.now()-e}ms`);let n=[];Array.isArray(s)?n=s:s.deals&&Array.isArray(s.deals)?n=s.deals:s.data&&Array.isArray(s.data)&&(n=s.data);const p=n.map(c=>({...c,clientName:c.personName||c.project?.cliente||c.pipedriveRawData?.title||"Sem nome",value:parseFloat(c.dealValue)||parseFloat(c.pipedriveRawData?.value)||0,status:Vo(c.stageName||c.status),consultor:c.consultorId||c.ownerUserName||"N/A",phone:c.personPhone||"",endereco:c.project?.endereco||c.cidadeExecucaoDesc||"",m2Total:parseFloat(c.project?.m2Total)||parseFloat(c.metragemEstimada)||0,daysInStage:Ro(c.stageChangeTime||c.dealAddTime),personEmail:c.personEmail||"",tipoCliente:c.tipoCliente||"",tipoProjeto:c.tipoProjeto||"",nomeEscritorio:c.nomeEscritorio||"",budgetEstimado:c.budgetEstimado||"",cidadeExecucao:c.cidadeExecucao||"",metragemEstimada:c.metragemEstimada||"",metragemEstimadaN1:c.metragemEstimadaN1||"",estadoObra:c.estadoObra||"",dataPrevistaExec:c.dataPrevistaExec||"",detalhesArquiteto:c.detalhesArquiteto||"",descritivoArea:c.descritivoArea||"",resumo:c.resumo||"",primeiroNomeZapi:c.primeiroNomeZapi||"",telefoneZapi:c.telefoneZapi||"",pipedriveUrl:c.pipedriveUrl||`https://monofloor.pipedrive.com/deal/${c.pipedriveDealId}`,pipedriveDealId:c.pipedriveDealId||"",dealAddTime:c.dealAddTime,dealUpdateTime:c.dealUpdateTime,pipedriveSyncedAt:c.pipedriveSyncedAt}));Lo(p),(!o||N.value.length===0)&&(N.value=p)},Ro=o=>{if(!o)return 0;const e=new Date(o),s=Math.abs(new Date().getTime()-e.getTime());return Math.ceil(s/(1e3*60*60*24))},Vo=o=>{if(!o)return"Form OrÃ§amento";const e=o.toLowerCase().trim(),a={"form orÃ§amento":"Form OrÃ§amento","form orcamento":"Form OrÃ§amento","1Âº contato":"1Âº Contato","1o contato":"1Âº Contato","primeiro contato":"1Âº Contato","1Âº contato feito":"1Âº Contato Feito","1o contato feito":"1Âº Contato Feito","follow 1Âº contato":"Follow 1Âº Contato","follow 1o contato":"Follow 1Âº Contato","follow 1Âº contato feito":"Follow 1Âº Contato Feito","follow 1o contato feito":"Follow 1Âº Contato Feito","form arquiteto":"Form Arquiteto","contato arquiteto":"Contato Arquiteto","proposta escopo minimo":"Proposta Escopo Minimo","proposta escopo mÃ­nimo":"Proposta Escopo Minimo","cÃ¡lculo de projeto":"CÃ¡lculo de Projeto","calculo de projeto":"CÃ¡lculo de Projeto","projeto levantado":"Projeto levantado","cÃ¡lculo deslocamento":"CÃ¡lculo Deslocamento","calculo deslocamento":"CÃ¡lculo Deslocamento","deslocamento levantado":"Deslocamento Levantado","proposta enviada":"Proposta enviada","fazer follow 1":"Fazer Follow 1","follow 1 feito":"Follow 1 Feito","fazer follow 2":"Fazer Follow 2","follow 2 feito":"Follow 2 Feito","fazer follow 3":"Fazer Follow 3","follow 3 feito":"Follow 3 Feito",negociaÃ§Ãµes:"NegociaÃ§Ãµes",negociacoes:"NegociaÃ§Ãµes",negociaÃ§Ã£o:"NegociaÃ§Ãµes",negociacao:"NegociaÃ§Ãµes",ganho:"Ganho",won:"Ganho",perdido:"Perdido",lost:"Perdido",lead:"Form OrÃ§amento",primeiro_contato:"1Âº Contato",contato_arquiteto:"Contato Arquiteto",levantamento:"CÃ¡lculo de Projeto",proposta_enviada:"Proposta enviada",follow_up:"Fazer Follow 1"};if(a[e])return a[e];for(const[n,p]of Object.entries(a))if(e.includes(n)||n.includes(e))return p;return e.includes("ganho")||e.includes("won")?"Ganho":e.includes("perdido")||e.includes("lost")?"Perdido":e.includes("negoci")?"NegociaÃ§Ãµes":e.includes("follow")&&e.includes("3")?"Fazer Follow 3":e.includes("follow")&&e.includes("2")?"Fazer Follow 2":e.includes("follow")&&e.includes("1")&&e.includes("feito")?"Follow 1 Feito":e.includes("follow")&&e.includes("1")||e.includes("follow")?"Fazer Follow 1":e.includes("proposta")&&e.includes("enviada")?"Proposta enviada":e.includes("proposta")&&e.includes("escopo")?"Proposta Escopo Minimo":e.includes("deslocamento")&&e.includes("levant")?"Deslocamento Levantado":e.includes("deslocamento")?"CÃ¡lculo Deslocamento":e.includes("projeto")&&e.includes("levant")?"Projeto levantado":e.includes("cÃ¡lculo")||e.includes("calculo")?"CÃ¡lculo de Projeto":e.includes("arquiteto")&&e.includes("form")?"Form Arquiteto":e.includes("arquiteto")?"Contato Arquiteto":e.includes("contato")&&e.includes("feito")?"1Âº Contato Feito":e.includes("contato")?"1Âº Contato":e.includes("form")||e.includes("orÃ§amento")||e.includes("orcamento")?"Form OrÃ§amento":["Form OrÃ§amento","1Âº Contato","1Âº Contato Feito","Follow 1Âº Contato","Follow 1Âº Contato Feito","Form Arquiteto","Contato Arquiteto","Proposta Escopo Minimo","CÃ¡lculo de Projeto","Projeto levantado","CÃ¡lculo Deslocamento","Deslocamento Levantado","Proposta enviada","Fazer Follow 1","Follow 1 Feito","Fazer Follow 2","Follow 2 Feito","Fazer Follow 3","Follow 3 Feito","NegociaÃ§Ãµes","Ganho","Perdido"].includes(o)?o:"Form OrÃ§amento"},ye=o=>{if(o<60)return`${o}s`;const e=Math.floor(o/60),a=o%60;return`${e}m ${a}s`},Bo=o=>{console.log("[CRM] Proposta aberta:",o.clientName),ce.value.set(o.sessionId,{sessionId:o.sessionId,propostaId:o.propostaId,leadId:o.leadId,clientName:o.clientName,ownerUserName:o.ownerUserName,deviceType:o.deviceType,timeOnPage:0,scrollDepth:0,startedAt:new Date(o.timestamp),timestamp:new Date(o.timestamp)}),L.value.unshift({id:`opened-${o.sessionId}`,type:"opened",clientName:o.clientName,ownerUserName:o.ownerUserName,leadId:o.leadId,deviceType:o.deviceType,timestamp:new Date(o.timestamp)}),L.value.length>20&&(L.value=L.value.slice(0,20))},Uo=o=>{const e=ce.value.get(o.sessionId);e&&(e.timeOnPage=o.timeOnPage,e.scrollDepth=o.scrollDepth,e.timestamp=new Date(o.timestamp))},jo=o=>{console.log("[CRM] Proposta fechada:",o.clientName,`(${o.totalTimeOnPage}s)`),ce.value.delete(o.sessionId),L.value.unshift({id:`closed-${o.sessionId}`,type:"closed",clientName:o.clientName,ownerUserName:o.ownerUserName,leadId:o.leadId,timeOnPage:o.totalTimeOnPage,timestamp:new Date(o.timestamp)}),L.value.length>20&&(L.value=L.value.slice(0,20))},zo=o=>{console.log("[CRM] GPS atualizado:",o.clientName,o.city,o.state),d.value&&d.value.id===o.leadId&&(console.log("[CRM] Lead aberto - recarregando detalhes (force refresh)..."),oa(o.leadId,!0)),L.value.unshift({id:`gps-${o.sessionId}`,type:"gps",clientName:o.clientName,ownerUserName:"",leadId:o.leadId,location:o.city&&o.state?`${o.city}, ${o.state}`:o.city||"Local detectado",timestamp:new Date(o.timestamp)}),L.value.length>20&&(L.value=L.value.slice(0,20))},qo=o=>{L.value=L.value.filter(e=>e.id!==o)},Re=o=>{const e=N.value.find(a=>a.id===o);e&&Tt(e)},Ho=()=>{ss(),Ke.value=is(Bo),Je.value=ls(Uo),Ze.value=ns(jo),Qe.value=rs(zo),console.log("[CRM] Listeners de proposta configurados")},Go=()=>{Ke.value&&(Ke.value(),Ke.value=null),Je.value&&(Je.value(),Je.value=null),Ze.value&&(Ze.value(),Ze.value=null),Qe.value&&(Qe.value(),Qe.value=null),console.log("[CRM] Listeners de proposta limpos")};let it=null;const na=async()=>{try{const o=await B.getAllViews();if(o.data?.success){const{activeViewers:e,historyViews:a,totalActive:s,totalHistory:n}=o.data,p=new Set(ce.value.keys()),c=new Set(e.map(v=>v.sessionId).filter(Boolean));e.forEach(v=>{v.sessionId&&(ce.value.get(v.sessionId)||(L.value.unshift({id:`opened-${v.sessionId}`,type:"opened",clientName:v.clientName,ownerUserName:v.ownerUserName,leadId:v.leadId,deviceType:v.deviceType,timestamp:new Date(v.viewedAt)}),L.value.length>20&&(L.value=L.value.slice(0,20)),Da({clientName:v.clientName,ownerUserName:v.ownerUserName,leadId:v.leadId,deviceType:v.deviceType,sessionId:v.sessionId})),ce.value.set(v.sessionId,{sessionId:v.sessionId,propostaId:v.propostaId,leadId:v.leadId,clientName:v.clientName,ownerUserName:v.ownerUserName,deviceType:v.deviceType,timeOnPage:v.timeOnPage,scrollDepth:v.scrollDepth,startedAt:new Date(v.viewedAt),timestamp:new Date(v.viewedAt)}))}),p.forEach(v=>{c.has(v)||ce.value.delete(v)}),yt.value=a.map(v=>({id:v.id,sessionId:v.sessionId,propostaId:v.propostaId,leadId:v.leadId,clientName:v.clientName,ownerUserName:v.ownerUserName,deviceType:v.deviceType,timeOnPage:v.timeOnPage,scrollDepth:v.scrollDepth,viewedAt:new Date(v.viewedAt)})),console.log(`[CRM] Polling: ${s} ativo(s), ${n} no histÃ³rico`)}}catch(o){console.error("[CRM] Erro no polling:",o)}},Wo=()=>{na(),it=setInterval(na,1e4),console.log("[CRM] Polling de visualizaÃ§Ãµes iniciado (10s)")},Ko=()=>{it&&(clearInterval(it),it=null,console.log("[CRM] Polling de visualizaÃ§Ãµes ativas parado"))};return Yo(()=>{Io(),wa(),$o(),Ho(),Wo(),document.addEventListener("click",Ht)}),es(()=>{Go(),Ko(),document.removeEventListener("click",Ht)}),(o,e)=>(i(),l("div",Ts,[K.value?m("",!0):(i(),l("header",Ms,[t("div",Ps,[e[118]||(e[118]=oe('<div class="crm-header__title-row" data-v-dfd0c012><div class="pixel-train" data-v-dfd0c012><svg class="train-svg" viewBox="0 0 64 40" fill="none" data-v-dfd0c012><g transform="translate(64,0) scale(-1,1)" data-v-dfd0c012><circle class="smoke smoke-1" cx="20" cy="8" r="3" fill="#666" data-v-dfd0c012></circle><circle class="smoke smoke-2" cx="14" cy="5" r="2.5" fill="#888" data-v-dfd0c012></circle><circle class="smoke smoke-3" cx="8" cy="3" r="2" fill="#aaa" data-v-dfd0c012></circle><circle class="smoke smoke-4" cx="24" cy="4" r="2" fill="#777" data-v-dfd0c012></circle><rect x="18" y="12" width="6" height="8" fill="#1a1a1a" data-v-dfd0c012></rect><rect x="12" y="18" width="24" height="14" rx="2" fill="#1a1a1a" data-v-dfd0c012></rect><rect x="36" y="14" width="14" height="18" fill="#1a1a1a" data-v-dfd0c012></rect><rect x="38" y="16" width="4" height="4" fill="#FFE566" data-v-dfd0c012></rect><rect x="44" y="16" width="4" height="4" fill="#FFE566" data-v-dfd0c012></rect><circle cx="18" cy="34" r="5" fill="#1a1a1a" data-v-dfd0c012></circle><circle cx="18" cy="34" r="2" fill="#c9a962" data-v-dfd0c012></circle><circle cx="30" cy="34" r="5" fill="#1a1a1a" data-v-dfd0c012></circle><circle cx="30" cy="34" r="2" fill="#c9a962" data-v-dfd0c012></circle><circle cx="44" cy="34" r="4" fill="#1a1a1a" data-v-dfd0c012></circle><circle cx="44" cy="34" r="1.5" fill="#c9a962" data-v-dfd0c012></circle><rect x="8" y="22" width="4" height="6" rx="1" fill="#FFE566" data-v-dfd0c012></rect><rect x="14" y="24" width="20" height="2" fill="#c9a962" data-v-dfd0c012></rect><rect x="36" y="28" width="14" height="2" fill="#c9a962" data-v-dfd0c012></rect></g></svg></div><div class="crm-header__title-text" data-v-dfd0c012><span class="title-prefix" data-v-dfd0c012>A MÃQUINA DE VENDAS DA</span><svg class="monofloor-logo-svg pixel-logo" viewBox="0 0 268 32" fill="#1a1a1a" data-v-dfd0c012><rect x="0" y="8" width="4" height="24" data-v-dfd0c012></rect><rect x="4" y="6" width="2" height="4" data-v-dfd0c012></rect><rect x="6" y="4" width="2" height="4" data-v-dfd0c012></rect><rect x="8" y="2" width="2" height="4" data-v-dfd0c012></rect><rect x="10" y="0" width="6" height="4" data-v-dfd0c012></rect><rect x="16" y="2" width="2" height="4" data-v-dfd0c012></rect><rect x="18" y="4" width="2" height="4" data-v-dfd0c012></rect><rect x="20" y="6" width="2" height="4" data-v-dfd0c012></rect><rect x="22" y="8" width="4" height="24" data-v-dfd0c012></rect><rect x="26" y="6" width="2" height="4" data-v-dfd0c012></rect><rect x="28" y="4" width="2" height="4" data-v-dfd0c012></rect><rect x="30" y="2" width="2" height="4" data-v-dfd0c012></rect><rect x="32" y="0" width="6" height="4" data-v-dfd0c012></rect><rect x="38" y="2" width="2" height="4" data-v-dfd0c012></rect><rect x="40" y="4" width="2" height="4" data-v-dfd0c012></rect><rect x="42" y="6" width="2" height="4" data-v-dfd0c012></rect><rect x="44" y="8" width="4" height="24" data-v-dfd0c012></rect><rect x="56" y="4" width="2" height="2" data-v-dfd0c012></rect><rect x="58" y="2" width="2" height="2" data-v-dfd0c012></rect><rect x="60" y="0" width="8" height="4" data-v-dfd0c012></rect><rect x="68" y="2" width="2" height="2" data-v-dfd0c012></rect><rect x="70" y="4" width="2" height="2" data-v-dfd0c012></rect><rect x="54" y="6" width="4" height="20" data-v-dfd0c012></rect><rect x="70" y="6" width="4" height="20" data-v-dfd0c012></rect><rect x="56" y="26" width="2" height="2" data-v-dfd0c012></rect><rect x="58" y="28" width="2" height="2" data-v-dfd0c012></rect><rect x="60" y="28" width="8" height="4" data-v-dfd0c012></rect><rect x="68" y="28" width="2" height="2" data-v-dfd0c012></rect><rect x="70" y="26" width="2" height="2" data-v-dfd0c012></rect><rect x="82" y="8" width="4" height="24" data-v-dfd0c012></rect><rect x="86" y="6" width="2" height="4" data-v-dfd0c012></rect><rect x="88" y="4" width="2" height="4" data-v-dfd0c012></rect><rect x="90" y="2" width="2" height="4" data-v-dfd0c012></rect><rect x="92" y="0" width="8" height="4" data-v-dfd0c012></rect><rect x="100" y="2" width="2" height="4" data-v-dfd0c012></rect><rect x="102" y="4" width="2" height="4" data-v-dfd0c012></rect><rect x="104" y="6" width="2" height="4" data-v-dfd0c012></rect><rect x="106" y="8" width="4" height="24" data-v-dfd0c012></rect><rect x="118" y="4" width="2" height="2" data-v-dfd0c012></rect><rect x="120" y="2" width="2" height="2" data-v-dfd0c012></rect><rect x="122" y="0" width="8" height="4" data-v-dfd0c012></rect><rect x="130" y="2" width="2" height="2" data-v-dfd0c012></rect><rect x="132" y="4" width="2" height="2" data-v-dfd0c012></rect><rect x="116" y="6" width="4" height="20" data-v-dfd0c012></rect><rect x="132" y="6" width="4" height="20" data-v-dfd0c012></rect><rect x="118" y="26" width="2" height="2" data-v-dfd0c012></rect><rect x="120" y="28" width="2" height="2" data-v-dfd0c012></rect><rect x="122" y="28" width="8" height="4" data-v-dfd0c012></rect><rect x="130" y="28" width="2" height="2" data-v-dfd0c012></rect><rect x="132" y="26" width="2" height="2" data-v-dfd0c012></rect><rect x="146" y="4" width="2" height="2" data-v-dfd0c012></rect><rect x="148" y="2" width="2" height="2" data-v-dfd0c012></rect><rect x="150" y="0" width="10" height="4" data-v-dfd0c012></rect><rect x="144" y="6" width="4" height="26" data-v-dfd0c012></rect><rect x="144" y="14" width="12" height="4" data-v-dfd0c012></rect><rect x="164" y="0" width="4" height="26" data-v-dfd0c012></rect><rect x="168" y="24" width="2" height="4" data-v-dfd0c012></rect><rect x="170" y="26" width="2" height="4" data-v-dfd0c012></rect><rect x="172" y="28" width="8" height="4" data-v-dfd0c012></rect><rect x="186" y="4" width="2" height="2" data-v-dfd0c012></rect><rect x="188" y="2" width="2" height="2" data-v-dfd0c012></rect><rect x="190" y="0" width="8" height="4" data-v-dfd0c012></rect><rect x="198" y="2" width="2" height="2" data-v-dfd0c012></rect><rect x="200" y="4" width="2" height="2" data-v-dfd0c012></rect><rect x="184" y="6" width="4" height="20" data-v-dfd0c012></rect><rect x="200" y="6" width="4" height="20" data-v-dfd0c012></rect><rect x="186" y="26" width="2" height="2" data-v-dfd0c012></rect><rect x="188" y="28" width="2" height="2" data-v-dfd0c012></rect><rect x="190" y="28" width="8" height="4" data-v-dfd0c012></rect><rect x="198" y="28" width="2" height="2" data-v-dfd0c012></rect><rect x="200" y="26" width="2" height="2" data-v-dfd0c012></rect><rect x="214" y="4" width="2" height="2" data-v-dfd0c012></rect><rect x="216" y="2" width="2" height="2" data-v-dfd0c012></rect><rect x="218" y="0" width="8" height="4" data-v-dfd0c012></rect><rect x="226" y="2" width="2" height="2" data-v-dfd0c012></rect><rect x="228" y="4" width="2" height="2" data-v-dfd0c012></rect><rect x="212" y="6" width="4" height="20" data-v-dfd0c012></rect><rect x="228" y="6" width="4" height="20" data-v-dfd0c012></rect><rect x="214" y="26" width="2" height="2" data-v-dfd0c012></rect><rect x="216" y="28" width="2" height="2" data-v-dfd0c012></rect><rect x="218" y="28" width="8" height="4" data-v-dfd0c012></rect><rect x="226" y="28" width="2" height="2" data-v-dfd0c012></rect><rect x="228" y="26" width="2" height="2" data-v-dfd0c012></rect><rect x="240" y="8" width="4" height="24" data-v-dfd0c012></rect><rect x="244" y="6" width="2" height="4" data-v-dfd0c012></rect><rect x="246" y="4" width="2" height="4" data-v-dfd0c012></rect><rect x="248" y="2" width="2" height="4" data-v-dfd0c012></rect><rect x="250" y="0" width="8" height="4" data-v-dfd0c012></rect><rect x="258" y="2" width="2" height="4" data-v-dfd0c012></rect><rect x="260" y="4" width="2" height="4" data-v-dfd0c012></rect><rect x="264" y="0" width="1" height="1" data-v-dfd0c012></rect><rect x="265" y="0" width="2" height="1" data-v-dfd0c012></rect><rect x="267" y="0" width="1" height="1" data-v-dfd0c012></rect><rect x="263" y="1" width="1" height="1" data-v-dfd0c012></rect><rect x="268" y="1" width="1" height="1" data-v-dfd0c012></rect><rect x="263" y="2" width="1" height="2" data-v-dfd0c012></rect><rect x="268" y="2" width="1" height="2" data-v-dfd0c012></rect><rect x="263" y="4" width="1" height="1" data-v-dfd0c012></rect><rect x="268" y="4" width="1" height="1" data-v-dfd0c012></rect><rect x="264" y="5" width="1" height="1" data-v-dfd0c012></rect><rect x="265" y="5" width="2" height="1" data-v-dfd0c012></rect><rect x="267" y="5" width="1" height="1" data-v-dfd0c012></rect><rect x="265" y="1" width="1" height="3" data-v-dfd0c012></rect><rect x="266" y="1" width="1" height="1" data-v-dfd0c012></rect><rect x="266" y="2" width="1" height="1" data-v-dfd0c012></rect><rect x="267" y="3" width="1" height="2" data-v-dfd0c012></rect></svg></div></div>',1)),t("div",{class:"specialist-selector",onClick:e[0]||(e[0]=a=>he.value=!0)},[e[99]||(e[99]=t("span",{class:"specialist-label"},"ESPECIALISTA",-1)),t("span",Ds,r(Aa.value||"TODOS"),1),e[100]||(e[100]=t("svg",{class:"specialist-chevron",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"6 9 12 15 18 9"})],-1))]),t("div",Ss,[t("button",{class:"btn btn--outline",onClick:Za},[...e[101]||(e[101]=[t("svg",{class:"btn__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})],-1),x(" Filtros ",-1)])]),t("div",Os,[t("button",{class:D(["notification-bell",{"notification-bell--active":Y.value.length>0,"notification-bell--has-notifications":Ye.value>0}]),onClick:Ma,ref_key:"bellButtonRef",ref:k},[e[103]||(e[103]=t("svg",{class:"notification-bell__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),t("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})],-1)),Y.value.length>0?(i(),l("div",Is,[...e[102]||(e[102]=[t("div",{class:"notification-bell__eye-pupil"},null,-1)])])):m("",!0),Ye.value>0?(i(),l("span",Fs,r(Ye.value>9?"9+":Ye.value),1)):m("",!0)],2),Be(pa,{name:"panel-slide"},{default:lt(()=>[E.value?(i(),l("div",{key:0,class:"notification-panel",ref_key:"notificationPanelRef",ref:ke},[t("div",Ls,[e[105]||(e[105]=t("div",{class:"notification-panel__title"},[t("svg",{class:"notification-panel__title-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("polyline",{points:"12 6 12 12 16 14"})]),x(" CENTRAL DE ATIVIDADE ")],-1)),t("button",{class:"notification-panel__close",onClick:e[1]||(e[1]=a=>E.value=!1)},[...e[104]||(e[104]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),w.value&&Y.value.length>0?(i(),l("div",$s,[t("div",Rs,[t("div",Vs,[e[106]||(e[106]=t("span",{class:"notification-panel__section-dot notification-panel__section-dot--live"},null,-1)),e[107]||(e[107]=x(" AO VIVO ",-1)),t("span",Bs,r(Y.value.length),1)]),t("button",{class:"notification-panel__section-close",onClick:e[2]||(e[2]=a=>w.value=!1),title:"Fechar"},[...e[108]||(e[108]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),t("div",Us,[(i(!0),l(M,null,S(Y.value,(a,s)=>(i(),l("div",{key:a.sessionId,class:"notification-item notification-item--live",style:ie({"--item-delay":s*.05+"s"}),onClick:n=>{Re(a.leadId),E.value=!1}},[t("div",zs,[t("span",qs,r(a.clientName?.charAt(0)?.toUpperCase()||"?"),1),e[109]||(e[109]=t("span",{class:"notification-item__avatar-pulse"},null,-1))]),t("div",Hs,[t("div",Gs,r(a.clientName),1),t("div",Ws,[t("span",Ks,r(a.deviceType==="mobile"?"ðŸ“±":"ðŸ’»"),1),t("span",Js,r(a.ownerUserName),1)])]),t("div",Zs,[t("div",Qs,[e[110]||(e[110]=t("svg",{class:"notification-item__timer-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("polyline",{points:"12 6 12 12 16 14"})],-1)),t("span",Xs,r(qt(a.timeOnPage)),1)]),t("div",Ys,[t("div",{class:"notification-item__scroll-fill",style:ie({width:a.scrollDepth+"%"})},null,4)])])],12,js))),128))])])):m("",!0),Y.value.length===0&&Le.value.length===0?(i(),l("div",ei,[...e[111]||(e[111]=[t("div",{class:"notification-panel__empty-icon"},"ðŸ‘ï¸",-1),t("div",{class:"notification-panel__empty-text"},"Nenhuma visualizaÃ§Ã£o registrada",-1),t("div",{class:"notification-panel__empty-subtext"},"VocÃª serÃ¡ notificado quando um cliente abrir",-1)])])):m("",!0),Le.value.length>0?(i(),l("div",ti,[t("div",{class:"notification-panel__section-header notification-panel__section-header--toggle",onClick:e[3]||(e[3]=a=>h.value=!h.value)},[t("div",ai,[e[112]||(e[112]=t("span",{class:"notification-panel__section-dot notification-panel__section-dot--history"},null,-1)),e[113]||(e[113]=x(" HISTÃ“RICO (24H) ",-1)),t("span",oi,r(Le.value.length),1)]),t("button",{class:D(["notification-panel__section-toggle",{"notification-panel__section-toggle--minimized":h.value}])},[...e[114]||(e[114]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("polyline",{points:"6 9 12 15 18 9"})],-1)])],2)]),Be(pa,{name:"collapse"},{default:lt(()=>[_(t("div",si,[(i(!0),l(M,null,S(Le.value.slice(0,15),a=>(i(),l("div",{key:a.id,class:"notification-item notification-item--history",onClick:s=>{Re(a.leadId),E.value=!1}},[t("div",{class:"notification-item__type-badge",title:a.deviceType==="mobile"?"Mobile":"Desktop"},r(At(a.sessionId)),9,li),t("div",ni,[t("div",ri,r(a.clientName),1),t("div",di,[t("span",null,r(qt(a.timeOnPage))+" â€¢ "+r(a.scrollDepth)+"% scroll",1),t("span",ci,r(a.ownerUserName),1)])]),t("div",ui,r(a.deviceType==="mobile"?"ðŸ“±":"ðŸ’»")+" "+r(Pa(a.viewedAt.getTime())),1)],8,ii))),128))],512),[[ts,!h.value]])]),_:1})])):m("",!0)],512)):m("",!0)]),_:1}),Be(va,{name:"toast-slide",tag:"div",class:"toast-notifications"},{default:lt(()=>[(i(!0),l(M,null,S(b.value,a=>(i(),l("div",{key:a.id,class:"toast-notification toast-notification--live",onClick:s=>{Re(a.leadId),kt(a.id)}},[e[116]||(e[116]=t("div",{class:"toast-notification__pulse"},null,-1)),t("div",vi,r(At(a.sessionId)),1),t("div",mi,[t("div",fi,r(a.clientName),1),t("div",gi,r(a.deviceType==="mobile"?"ðŸ“±":"ðŸ’»")+" estÃ¡ visualizando a proposta ",1)]),t("button",{class:"toast-notification__close",onClick:$(s=>kt(a.id),["stop"])},[...e[115]||(e[115]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,hi)],8,pi))),128))]),_:1})]),t("button",{class:"btn btn--primary",onClick:e[4]||(e[4]=a=>aa())},[...e[117]||(e[117]=[t("svg",{class:"btn__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),x(" Novo Deal ",-1)])])])]),t("div",_i,[t("div",yi,[e[120]||(e[120]=oe('<div class="kpi-card__icon" data-v-dfd0c012><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" data-v-dfd0c012><circle cx="12" cy="12" r="10" data-v-dfd0c012></circle><circle cx="12" cy="12" r="6" data-v-dfd0c012></circle><circle cx="12" cy="12" r="2" fill="currentColor" data-v-dfd0c012></circle></svg></div>',1)),t("div",wi,[t("span",bi,r(ba.value),1),e[119]||(e[119]=t("span",{class:"kpi-card__label"},"Deals Ativos",-1))])]),t("div",ki,[e[122]||(e[122]=oe('<div class="kpi-card__icon" data-v-dfd0c012><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" data-v-dfd0c012><circle cx="9" cy="9" r="7" data-v-dfd0c012></circle><path d="M9 6v6M6 9h6" data-v-dfd0c012></path><circle cx="15" cy="15" r="7" fill="var(--yellow)" stroke="currentColor" data-v-dfd0c012></circle><path d="M15 12v6M12 15h6" data-v-dfd0c012></path></svg></div>',1)),t("div",xi,[t("span",Ci,r(Ce(jt.value)),1),e[121]||(e[121]=t("span",{class:"kpi-card__label"},"Em Pipeline",-1))])]),t("div",Ei,[e[124]||(e[124]=oe('<div class="kpi-card__icon" data-v-dfd0c012><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" data-v-dfd0c012><path d="M6 4h12v6a6 6 0 01-12 0V4z" fill="var(--yellow)" data-v-dfd0c012></path><path d="M6 4H4a2 2 0 000 4h2M18 4h2a2 2 0 010 4h-2" data-v-dfd0c012></path><path d="M12 16v4M8 22h8" data-v-dfd0c012></path></svg></div>',1)),t("div",Ai,[t("span",Ni,r(_e("Ganho").length),1),e[123]||(e[123]=t("span",{class:"kpi-card__label"},"Ganhos",-1))])]),t("div",Ti,[e[126]||(e[126]=t("div",{class:"kpi-card__icon"},[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("polyline",{points:"4 16 8 12 12 14 20 6"}),t("polyline",{points:"14 6 20 6 20 12"})])],-1)),t("div",Mi,[t("span",Pi,r(ka.value)+"%",1),e[125]||(e[125]=t("span",{class:"kpi-card__label"},"Taxa ConversÃ£o",-1))])]),t("div",Di,[e[128]||(e[128]=t("div",{class:"kpi-card__icon"},[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("polyline",{points:"12 6 12 12 16 14"})])],-1)),t("div",Si,[t("span",Oi,r(xa.value)+"d",1),e[127]||(e[127]=t("span",{class:"kpi-card__label"},"Tempo MÃ©dio",-1))])]),t("div",Ii,[e[130]||(e[130]=t("div",{class:"kpi-card__icon"},[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M4 6h16a2 2 0 012 2v2a2 2 0 00-2 2 2 2 0 002 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-2a2 2 0 002-2 2 2 0 00-2-2V8a2 2 0 012-2z",fill:"var(--yellow)"}),t("line",{x1:"10",y1:"6",x2:"10",y2:"18","stroke-dasharray":"2 2"})])],-1)),t("div",Fi,[t("span",Li,r(Ce(Ca.value)),1),e[129]||(e[129]=t("span",{class:"kpi-card__label"},"Ticket MÃ©dio",-1))])])])])),K.value?m("",!0):(i(),l("div",$i,[t("div",{class:D(["search-bar",{"search-bar--focused":ee.value}])},[e[131]||(e[131]=t("img",{class:"search-bar__saturn",src:os,alt:"Saturn"},null,-1)),_(t("input",{type:"text",class:"search-bar__input",placeholder:"Buscar por nome, telefone ou email...","onUpdate:modelValue":e[5]||(e[5]=a=>j.value=a),onFocus:e[6]||(e[6]=a=>ee.value=!0),onBlur:Ia,onKeydown:[e[7]||(e[7]=we(a=>ee.value=!1,["escape"])),we(Fa,["enter"]),e[8]||(e[8]=we($(a=>Kt(1),["prevent"]),["down"])),e[9]||(e[9]=we($(a=>Kt(-1),["prevent"]),["up"]))]},null,544),[[y,j.value]]),j.value?(i(),l("button",{key:0,class:"search-bar__clear",onClick:La},"âœ•")):m("",!0)],2),ee.value&&j.value.length>=2?(i(),l("div",Ri,[$e.value.length===0?(i(),l("div",Vi," Nenhum resultado encontrado ")):m("",!0),(i(!0),l(M,null,S($e.value,(a,s)=>(i(),l("div",{key:a.id,class:D(["search-suggestion",{"search-suggestion--active":te.value===s}]),onMousedown:$(n=>Jt(a),["prevent"])},[t("div",Ui,[t("span",ji,r(a.clientName||"Sem nome"),1),t("span",{class:D(["search-suggestion__stage",`search-suggestion__stage--${Oa(a.status||"")}`])},[t("span",{class:"search-suggestion__stage-icon",innerHTML:Wt(a.status||"")},null,8,zi),x(" "+r(Sa(a.status||"")),1)],2)]),t("div",qi,[a.phone?(i(),l("span",Hi,[e[132]||(e[132]=t("svg",{class:"search-suggestion__detail-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})],-1)),x(" "+r(a.phone),1)])):m("",!0),a.personEmail?(i(),l("span",Gi,[e[133]||(e[133]=t("svg",{class:"search-suggestion__detail-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),t("polyline",{points:"22,6 12,13 2,6"})],-1)),x(" "+r(a.personEmail),1)])):m("",!0)]),a.cidadeExecucao?(i(),l("div",Wi,[e[134]||(e[134]=t("svg",{class:"search-suggestion__detail-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),t("circle",{cx:"12",cy:"10",r:"3"})],-1)),x(" "+r(ct(a.cidadeExecucao)),1)])):m("",!0)],42,Bi))),128))])):m("",!0)])),J.value&&!K.value?(i(),l("div",Ki,[t("div",Ji,[e[135]||(e[135]=t("label",{class:"filter-label"},"Buscar",-1)),_(t("input",{type:"text",class:"filter-input",placeholder:"Nome do cliente...","onUpdate:modelValue":e[10]||(e[10]=a=>j.value=a)},null,512),[[y,j.value]])]),t("div",Zi,[e[137]||(e[137]=t("label",{class:"filter-label"},"Consultor",-1)),_(t("select",{class:"filter-select","onUpdate:modelValue":e[11]||(e[11]=a=>Z.value=a)},[e[136]||(e[136]=t("option",{value:""},"Todos",-1)),(i(!0),l(M,null,S(zt.value,a=>(i(),l("option",{key:a,value:a},r(a),9,Qi))),128))],512),[[ve,Z.value]])]),t("div",Xi,[e[139]||(e[139]=t("label",{class:"filter-label"},"PerÃ­odo",-1)),_(t("select",{class:"filter-select","onUpdate:modelValue":e[12]||(e[12]=a=>ge.value=a)},[...e[138]||(e[138]=[oe('<option value="" data-v-dfd0c012>Todos</option><option value="7" data-v-dfd0c012>Ãšltimos 7 dias</option><option value="30" data-v-dfd0c012>Ãšltimos 30 dias</option><option value="90" data-v-dfd0c012>Ãšltimos 90 dias</option><option value="365" data-v-dfd0c012>Este ano</option>',5)])],512),[[ve,ge.value]])]),t("div",Yi,[e[141]||(e[141]=t("label",{class:"filter-label"},"Ordenar por",-1)),_(t("select",{class:"filter-select","onUpdate:modelValue":e[13]||(e[13]=a=>be.value=a)},[...e[140]||(e[140]=[oe('<option value="recent" data-v-dfd0c012>Mais Recentes</option><option value="oldest" data-v-dfd0c012>Mais Antigos</option><option value="value-high" data-v-dfd0c012>Maior Valor</option><option value="value-low" data-v-dfd0c012>Menor Valor</option><option value="name-az" data-v-dfd0c012>Nome A-Z</option><option value="name-za" data-v-dfd0c012>Nome Z-A</option><option value="days-high" data-v-dfd0c012>Mais Dias no EstÃ¡gio</option><option value="days-low" data-v-dfd0c012>Menos Dias no EstÃ¡gio</option>',8)])],512),[[ve,be.value]])]),t("button",{class:"btn btn--small btn--outline",onClick:Qa}," Limpar ")])):m("",!0),K.value?m("",!0):(i(),l("div",{key:3,class:"pipeline",ref_key:"pipelineRef",ref:nt},[(i(!0),l(M,null,S(U.value,(a,s)=>(i(),l("div",{key:a.id,class:D(["pipeline-column",[`pipeline-column--${a.color}`,{"pipeline-column--drag-over":fe.value===a.id}]]),style:ie({"--delay":s*.05+"s"}),onDragover:$(n=>Wa(n,a.id),["prevent"]),onDragleave:Ka,onDrop:n=>Ja(n,a.id)},[t("div",tl,[t("div",al,[t("span",{class:"pipeline-column__icon",innerHTML:Wt(a.id)},null,8,ol),t("span",null,r(a.name),1)]),t("div",sl,[t("span",il,r(_e(a.id).length),1),t("span",ll,r(Ce($a(a.id))),1)])]),t("button",{class:"pipeline-column__add",onClick:n=>aa(a.id)}," + Adicionar deal ",8,nl),t("div",rl,[Be(va,{name:"card",tag:"div",class:"pipeline-column__cards"},{default:lt(()=>[(i(!0),l(M,null,S(_e(a.id),n=>(i(),l("div",{key:n.id,class:D(["deal-card",{"deal-card--dragging":Ae.value?.id===n.id,"deal-card--new":Nt.value===n.id}]),draggable:"true",onDragstart:p=>Ha(p,n),onDragend:Ga,onClick:p=>Tt(n)},[t("div",cl,[t("span",ul,r(n.clientName||"Sem nome"),1),t("span",pl,"#"+r(n.pipedriveDealId||n.id.slice(-4)),1)]),n.tipoCliente||n.metragemEstimadaN1?(i(),l("div",vl,[n.tipoCliente?(i(),l("span",ml,[n.tipoCliente==="Consumidor Final"?(i(),l("svg",fl,[...e[142]||(e[142]=[t("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},null,-1),t("polyline",{points:"9 22 9 12 15 12 15 22"},null,-1)])])):(i(),l("svg",gl,[...e[143]||(e[143]=[t("path",{d:"M2 18v3h20v-3"},null,-1),t("path",{d:"M6 14v4"},null,-1),t("path",{d:"M18 14v4"},null,-1),t("path",{d:"M12 14v4"},null,-1),t("path",{d:"M4 10h16"},null,-1),t("path",{d:"M4 10 12 3l8 7"},null,-1)])])),x(" "+r(n.tipoCliente),1)])):m("",!0),n.metragemEstimadaN1?(i(),l("span",hl,[e[144]||(e[144]=t("svg",{class:"deal-card__tag-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M3 3v18h18"}),t("path",{d:"M8 17V9"}),t("path",{d:"M12 17V5"}),t("path",{d:"M16 17v-4"}),t("path",{d:"M20 17v-8"})],-1)),x(" "+r(n.metragemEstimadaN1),1)])):m("",!0)])):m("",!0),t("div",_l,r(Ce(n.value||0)),1),n.cidadeExecucao?(i(),l("div",yl," ðŸ“ "+r(ct(n.cidadeExecucao)),1)):m("",!0),t("div",wl,[t("div",{class:"deal-card__specialist",title:n.consultor},[t("span",{class:"deal-card__specialist-dot",style:ie({backgroundColor:Ba(n.consultor)})},null,4),t("span",kl,r(Ua(n.consultor)),1)],8,bl),t("div",{class:D(["deal-card__days",Qt(n.daysInStage)])},r(n.daysInStage||0)+"d ",3)]),t("div",xl,[t("button",{class:"deal-action deal-action--whatsapp",title:"WhatsApp",onClick:$(p=>Lt(n),["stop"])},[...e[145]||(e[145]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})],-1)])],8,Cl),t("button",{class:"deal-action deal-action--link",title:"Pipedrive",onClick:$(p=>Mo(n.pipedriveUrl),["stop"])},[...e[146]||(e[146]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),t("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})],-1)])],8,El),t("button",{class:"deal-action deal-action--menu",title:"Mais",onClick:$(p=>Po(n,p),["stop"])},[...e[147]||(e[147]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"12",cy:"12",r:"1.5",fill:"currentColor"}),t("circle",{cx:"12",cy:"5",r:"1.5",fill:"currentColor"}),t("circle",{cx:"12",cy:"19",r:"1.5",fill:"currentColor"})],-1)])],8,Al)])],42,dl))),128))]),_:2},1024),_e(a.id).length===0?(i(),l("div",Nl,[...e[148]||(e[148]=[oe('<span class="pipeline-column__empty-icon" data-v-dfd0c012><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" data-v-dfd0c012><circle cx="12" cy="12" r="10" data-v-dfd0c012></circle><circle cx="12" cy="12" r="6" data-v-dfd0c012></circle><circle cx="12" cy="12" r="2" fill="currentColor" data-v-dfd0c012></circle></svg></span><span data-v-dfd0c012>Arraste deals aqui</span>',2)])])):m("",!0)])],46,el))),128)),t("div",{class:"pipeline-settings-column",onClick:e[14]||(e[14]=a=>ne.value=!0)},[...e[149]||(e[149]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"12",cy:"12",r:"3"}),t("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})],-1)])])],512)),(i(),pe(me,{to:"body"},[d.value?(i(),l("div",{key:0,class:"modal-overlay",onClick:$(Mt,["self"])},[t("div",Tl,[t("div",Ml,[t("div",Pl,[t("h2",Dl,r(d.value.clientName),1),t("div",Sl,[d.value.tipoCliente?(i(),l("span",Ol,r(d.value.tipoCliente),1)):m("",!0),d.value.tipoProjeto?(i(),l("span",Il,r(d.value.tipoProjeto),1)):m("",!0)])]),t("div",Fl,[d.value.pipedriveUrl?(i(),l("a",{key:0,href:d.value.pipedriveUrl,target:"_blank",class:"btn btn--ghost btn--icon",title:"Abrir no Pipedrive"},[...e[150]||(e[150]=[t("svg",{class:"btn__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),t("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})],-1)])],8,Ll)):m("",!0),t("button",{class:"modal__close",onClick:Mt},[...e[151]||(e[151]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])])]),t("div",$l,[t("div",Rl,[(i(!0),l(M,null,S(U.value.filter(a=>a.id!=="Ganho"&&a.id!=="Perdido"),(a,s)=>(i(),l(M,{key:a.id},[s>0?(i(),l("div",{key:0,class:D(["pipeline-progress__connector",{"pipeline-progress__connector--completed":et(d.value.status)>=s,"pipeline-progress__connector--pending":et(d.value.status)<s}])},null,2)):m("",!0),t("div",{class:D(["pipeline-progress__stage",{"pipeline-progress__stage--completed":et(d.value.status)>s,"pipeline-progress__stage--current":d.value.status===a.id,"pipeline-progress__stage--pending":et(d.value.status)<s}]),onClick:n=>Ct(a.id),title:`${a.name} - Clique para mover`},[d.value.status===a.id?(i(),l("div",Bl,[...e[152]||(e[152]=[t("svg",{viewBox:"0 0 64 40",fill:"none"},[t("g",{transform:"translate(64,0) scale(-1,1)"},[t("rect",{x:"18",y:"12",width:"6",height:"8",fill:"#1a1a1a"}),t("rect",{x:"12",y:"18",width:"24",height:"14",rx:"2",fill:"#1a1a1a"}),t("rect",{x:"36",y:"14",width:"14",height:"18",fill:"#1a1a1a"}),t("rect",{x:"38",y:"16",width:"4",height:"4",fill:"#FFE566"}),t("rect",{x:"44",y:"16",width:"4",height:"4",fill:"#FFE566"}),t("circle",{cx:"18",cy:"34",r:"5",fill:"#1a1a1a"}),t("circle",{cx:"18",cy:"34",r:"2",fill:"#c9a962"}),t("circle",{cx:"30",cy:"34",r:"5",fill:"#1a1a1a"}),t("circle",{cx:"30",cy:"34",r:"2",fill:"#c9a962"}),t("circle",{cx:"44",cy:"34",r:"4",fill:"#1a1a1a"}),t("circle",{cx:"44",cy:"34",r:"1.5",fill:"#c9a962"}),t("rect",{x:"8",y:"22",width:"4",height:"6",rx:"1",fill:"#FFE566"}),t("rect",{x:"14",y:"24",width:"20",height:"2",fill:"#c9a962"}),t("rect",{x:"36",y:"28",width:"14",height:"2",fill:"#c9a962"})])],-1)])])):m("",!0),t("span",Ul,r(za(a.id))+"d ",1),t("span",jl,r(a.name),1)],10,Vl)],64))),128))]),t("div",zl,[t("button",{class:D(["pipeline-progress__final-btn pipeline-progress__final-btn--ganho",{"pipeline-progress__final-btn--active":d.value.status==="Ganho"}]),onClick:e[15]||(e[15]=a=>Ct("Ganho"))},[...e[153]||(e[153]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}),t("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}),t("path",{d:"M4 22h16"}),t("path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"}),t("path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"}),t("path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z"})],-1),x(" Ganho ",-1)])],2),t("button",{class:D(["pipeline-progress__final-btn pipeline-progress__final-btn--perdido",{"pipeline-progress__final-btn--active":d.value.status==="Perdido"}]),onClick:e[16]||(e[16]=a=>Ct("Perdido"))},[...e[154]||(e[154]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),t("line",{x1:"9",y1:"9",x2:"15",y2:"15"})],-1),x(" Perdido ",-1)])],2)])]),t("div",ql,[t("div",Hl,[e[160]||(e[160]=t("h3",{class:"detail-section__title"},"Resumo",-1)),t("div",Gl,[t("div",Wl,[e[155]||(e[155]=t("span",{class:"detail-label"},"Valor",-1)),A.value==="value"?_((i(),l("input",{key:0,type:"number",class:"inline-edit-input inline-edit-input--large","onUpdate:modelValue":e[17]||(e[17]=a=>C.value=a),onBlur:e[18]||(e[18]=a=>H("value")),onKeydown:e[19]||(e[19]=a=>ae(a,"value")),ref:"editInput",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--large detail-value--editable",onClick:e[20]||(e[20]=a=>q("value",d.value.value)),title:"Clique para editar"},r(Ce(d.value.value||0)),1))]),t("div",Kl,[e[156]||(e[156]=t("span",{class:"detail-label"},"EstÃ¡gio",-1)),t("span",{class:"detail-value detail-value--stage",style:ie({"--stage-color":ja(d.value.status)})},r(U.value.find(a=>a.id===d.value?.status)?.emoji)+" "+r(U.value.find(a=>a.id===d.value?.status)?.name||"N/A"),5)]),t("div",Jl,[e[157]||(e[157]=t("span",{class:"detail-label"},"Dias no EstÃ¡gio",-1)),t("span",{class:D(["detail-value",Qt(d.value.daysInStage)])},r(d.value.daysInStage||0)+" dias ",3)]),t("div",Zl,[e[159]||(e[159]=t("span",{class:"detail-label"},"Consultor",-1)),A.value==="consultor"?_((i(),l("select",{key:0,class:"inline-edit-select","onUpdate:modelValue":e[21]||(e[21]=a=>C.value=a),onBlur:e[22]||(e[22]=a=>H("consultor")),onChange:e[23]||(e[23]=a=>Ft("consultor")),autofocus:""},[e[158]||(e[158]=t("option",{value:""},"Selecione...",-1)),(i(!0),l(M,null,S(_a.value,a=>(i(),l("option",{key:a,value:a},r(a),9,Ql))),128))],544)),[[ve,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--editable",onClick:e[24]||(e[24]=a=>q("consultor",d.value.consultor)),title:"Clique para editar"},r(d.value.consultor||"N/A"),1))])])]),t("div",Xl,[e[165]||(e[165]=t("h3",{class:"detail-section__title"},"Contato",-1)),t("div",Yl,[t("div",en,[e[161]||(e[161]=t("span",{class:"detail-label"},"Telefone",-1)),A.value==="phone"?_((i(),l("input",{key:0,type:"tel",class:"inline-edit-input","onUpdate:modelValue":e[25]||(e[25]=a=>C.value=a),onBlur:e[26]||(e[26]=a=>H("phone")),onKeydown:e[27]||(e[27]=a=>ae(a,"phone")),placeholder:"(11) 99999-9999",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--editable",onClick:e[29]||(e[29]=a=>q("phone",d.value.phone)),title:"Clique para editar"},[x(" ðŸ“± "+r(d.value.phone||"N/A")+" ",1),t("span",{class:"edit-action",onClick:e[28]||(e[28]=$(a=>Lt(d.value),["stop"]))},"ðŸ’¬")]))]),t("div",tn,[e[162]||(e[162]=t("span",{class:"detail-label"},"Email",-1)),A.value==="personEmail"?_((i(),l("input",{key:0,type:"email",class:"inline-edit-input","onUpdate:modelValue":e[30]||(e[30]=a=>C.value=a),onBlur:e[31]||(e[31]=a=>H("personEmail")),onKeydown:e[32]||(e[32]=a=>ae(a,"personEmail")),placeholder:"email@exemplo.com",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--editable",onClick:e[33]||(e[33]=a=>q("personEmail",d.value.personEmail)),title:"Clique para editar"},r(d.value.personEmail||"N/A"),1))]),t("div",an,[e[163]||(e[163]=t("span",{class:"detail-label"},"WhatsApp (Z-API)",-1)),t("span",on,r(d.value.telefoneZapi||d.value.phone||"N/A"),1)]),t("div",sn,[e[164]||(e[164]=t("span",{class:"detail-label"},"Nome Z-API",-1)),t("span",ln,r(d.value.primeiroNomeZapi||"N/A"),1)])])]),t("div",nn,[e[173]||(e[173]=t("h3",{class:"detail-section__title"},"Dados do Projeto",-1)),t("div",rn,[t("div",dn,[e[166]||(e[166]=t("span",{class:"detail-label"},"EndereÃ§o",-1)),A.value==="endereco"?_((i(),l("input",{key:0,type:"text",class:"inline-edit-input inline-edit-input--full","onUpdate:modelValue":e[34]||(e[34]=a=>C.value=a),onBlur:e[35]||(e[35]=a=>H("endereco")),onKeydown:e[36]||(e[36]=a=>ae(a,"endereco")),placeholder:"Rua, nÃºmero, bairro, cidade",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--editable",onClick:e[37]||(e[37]=a=>q("endereco",d.value.endereco||d.value.cidadeExecucaoDesc)),title:"Clique para editar"},r(d.value.endereco||d.value.cidadeExecucaoDesc||"N/A"),1))]),t("div",cn,[e[167]||(e[167]=t("span",{class:"detail-label"},"Cidade",-1)),A.value==="cidadeExecucao"?_((i(),l("input",{key:0,type:"text",class:"inline-edit-input","onUpdate:modelValue":e[38]||(e[38]=a=>C.value=a),onBlur:e[39]||(e[39]=a=>H("cidadeExecucao")),onKeydown:e[40]||(e[40]=a=>ae(a,"cidadeExecucao")),placeholder:"SÃ£o Paulo",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--editable",onClick:e[41]||(e[41]=a=>q("cidadeExecucao",d.value.cidadeExecucao)),title:"Clique para editar"},r(ct(d.value.cidadeExecucao)||"N/A"),1))]),t("div",un,[e[168]||(e[168]=t("span",{class:"detail-label"},"MÂ² Estimado",-1)),A.value==="metragemEstimada"?_((i(),l("input",{key:0,type:"number",class:"inline-edit-input","onUpdate:modelValue":e[42]||(e[42]=a=>C.value=a),onBlur:e[43]||(e[43]=a=>H("metragemEstimada")),onKeydown:e[44]||(e[44]=a=>ae(a,"metragemEstimada")),placeholder:"150",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--metric detail-value--editable",onClick:e[45]||(e[45]=a=>q("metragemEstimada",d.value.metragemEstimada||d.value.m2Total)),title:"Clique para editar"},r(d.value.metragemEstimada||d.value.m2Total||0)+" mÂ² ",1))]),t("div",pn,[e[169]||(e[169]=t("span",{class:"detail-label"},"Faixa Metragem",-1)),t("span",vn,r(d.value.metragemEstimadaN1||"N/A"),1)]),t("div",mn,[e[170]||(e[170]=t("span",{class:"detail-label"},"Estado da Obra",-1)),A.value==="estadoObra"?_((i(),l("input",{key:0,type:"text",class:"inline-edit-input","onUpdate:modelValue":e[46]||(e[46]=a=>C.value=a),onBlur:e[47]||(e[47]=a=>H("estadoObra")),onKeydown:e[48]||(e[48]=a=>ae(a,"estadoObra")),placeholder:"Em andamento",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--editable",onClick:e[49]||(e[49]=a=>q("estadoObra",d.value.estadoObra)),title:"Clique para editar"},r(d.value.estadoObra||"N/A"),1))]),t("div",fn,[e[171]||(e[171]=t("span",{class:"detail-label"},"Budget Estimado",-1)),A.value==="budgetEstimado"?_((i(),l("input",{key:0,type:"text",class:"inline-edit-input","onUpdate:modelValue":e[50]||(e[50]=a=>C.value=a),onBlur:e[51]||(e[51]=a=>H("budgetEstimado")),onKeydown:e[52]||(e[52]=a=>ae(a,"budgetEstimado")),placeholder:"R$ 50.000 - R$ 100.000",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--editable",onClick:e[53]||(e[53]=a=>q("budgetEstimado",d.value.budgetEstimado)),title:"Clique para editar"},r(d.value.budgetEstimado||"N/A"),1))]),t("div",gn,[e[172]||(e[172]=t("span",{class:"detail-label"},"Data Prevista ExecuÃ§Ã£o",-1)),A.value==="dataPrevistaExec"?_((i(),l("input",{key:0,type:"text",class:"inline-edit-input","onUpdate:modelValue":e[54]||(e[54]=a=>C.value=a),onBlur:e[55]||(e[55]=a=>H("dataPrevistaExec")),onKeydown:e[56]||(e[56]=a=>ae(a,"dataPrevistaExec")),placeholder:"Jan/2026",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--editable",onClick:e[57]||(e[57]=a=>q("dataPrevistaExec",d.value.dataPrevistaExec)),title:"Clique para editar"},r(d.value.dataPrevistaExec||"N/A"),1))])])]),d.value.tipoCliente==="Arquiteto"||d.value.nomeEscritorio?(i(),l("div",hn,[e[176]||(e[176]=t("h3",{class:"detail-section__title"},"Arquiteto / EscritÃ³rio",-1)),t("div",_n,[t("div",yn,[e[174]||(e[174]=t("span",{class:"detail-label"},"Nome do EscritÃ³rio",-1)),A.value==="nomeEscritorio"?_((i(),l("input",{key:0,type:"text",class:"inline-edit-input","onUpdate:modelValue":e[58]||(e[58]=a=>C.value=a),onBlur:e[59]||(e[59]=a=>H("nomeEscritorio")),onKeydown:e[60]||(e[60]=a=>ae(a,"nomeEscritorio")),placeholder:"Nome do escritÃ³rio",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--editable",onClick:e[61]||(e[61]=a=>q("nomeEscritorio",d.value.nomeEscritorio)),title:"Clique para editar"},r(d.value.nomeEscritorio||"N/A"),1))]),t("div",wn,[e[175]||(e[175]=t("span",{class:"detail-label"},"Detalhes do Arquiteto",-1)),A.value==="detalhesArquiteto"?_((i(),l("textarea",{key:0,class:"inline-edit-textarea","onUpdate:modelValue":e[62]||(e[62]=a=>C.value=a),onBlur:e[63]||(e[63]=a=>H("detalhesArquiteto")),onKeydown:we(Ee,["esc"]),placeholder:"Detalhes sobre o arquiteto...",rows:"3",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--editable",onClick:e[64]||(e[64]=a=>q("detalhesArquiteto",d.value.detalhesArquiteto)),title:"Clique para editar"},r(d.value.detalhesArquiteto||"N/A"),1))])])])):m("",!0),t("div",bn,[e[179]||(e[179]=t("h3",{class:"detail-section__title"},"ObservaÃ§Ãµes",-1)),t("div",kn,[t("div",xn,[e[177]||(e[177]=t("span",{class:"detail-label"},"Resumo",-1)),A.value==="resumo"?_((i(),l("textarea",{key:0,class:"inline-edit-textarea","onUpdate:modelValue":e[65]||(e[65]=a=>C.value=a),onBlur:e[66]||(e[66]=a=>H("resumo")),onKeydown:we(Ee,["esc"]),placeholder:"Resumo do projeto...",rows:"3",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--text detail-value--editable",onClick:e[67]||(e[67]=a=>q("resumo",d.value.resumo)),title:"Clique para editar"},r(d.value.resumo||"Clique para adicionar..."),1))]),t("div",Cn,[e[178]||(e[178]=t("span",{class:"detail-label"},"Descritivo da Ãrea",-1)),A.value==="descritivoArea"?_((i(),l("textarea",{key:0,class:"inline-edit-textarea","onUpdate:modelValue":e[68]||(e[68]=a=>C.value=a),onBlur:e[69]||(e[69]=a=>H("descritivoArea")),onKeydown:we(Ee,["esc"]),placeholder:"DescriÃ§Ã£o da Ã¡rea...",rows:"3",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--text detail-value--editable",onClick:e[70]||(e[70]=a=>q("descritivoArea",d.value.descritivoArea)),title:"Clique para editar"},r(d.value.descritivoArea||"Clique para adicionar..."),1))])])]),t("div",En,[t("div",{class:"detail-section__header"},[e[180]||(e[180]=t("h3",{class:"detail-section__title"},"ðŸ“Ž Anexos",-1)),t("button",{class:"btn btn--sm btn--primary",onClick:uo}," + Adicionar ")]),Ie.value?(i(),l("div",An,"Carregando anexos...")):Q.value.length===0?(i(),l("div",Nn," Nenhum anexo. Adicione projetos arquitetÃ´nicos, plantas e documentos. ")):(i(),l("div",Tn,[(i(!0),l(M,null,S(Q.value,a=>(i(),l("div",{key:a.id,class:"anexo-item"},[t("div",Mn,r(a.mimeType?.includes("pdf")?"ðŸ“„":a.mimeType?.includes("image")?"ðŸ–¼ï¸":"ðŸ“"),1),t("div",Pn,[t("span",Dn,r(a.nome),1),t("span",Sn,[x(r(ho(a.tipo))+" ",1),a.fileSize?(i(),l("span",On," â€¢ "+r(go(a.fileSize)),1)):m("",!0)])]),t("div",In,[t("button",{class:"btn btn--ghost btn--sm",onClick:s=>mo(a),title:"Baixar"}," â¬‡ï¸ ",8,Fn),t("button",{class:"btn btn--ghost btn--sm btn--danger",onClick:s=>fo(a),title:"Excluir"}," ðŸ—‘ï¸ ",8,Ln)])]))),128))]))]),t("div",$n,[t("div",{class:"detail-section__header"},[e[181]||(e[181]=t("h3",{class:"detail-section__title"},[t("svg",{class:"detail-section__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),t("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]),x(" OrÃ§amentos Enviados ")],-1)),t("button",{class:"btn btn--sm btn--primary",onClick:yo}," + Registrar Envio ")]),Fe.value?(i(),l("div",Rn,"Carregando orÃ§amentos...")):X.value.length===0?(i(),l("div",Vn," Nenhum orÃ§amento enviado registrado. ")):(i(),l("div",Bn,[(i(!0),l(M,null,S(X.value,a=>(i(),l("div",{key:a.id,class:"orcamento-item"},[t("div",Un,r(ko(a.dataEnvio)),1),t("div",jn,[a.valor?(i(),l("span",zn,r(Ce(a.valor)),1)):m("",!0),a.metragem?(i(),l("span",qn,r(a.metragem)+"mÂ² ",1)):m("",!0),a.proposta?(i(),l("span",Hn," Proposta v"+r(a.proposta.versao),1)):m("",!0)]),a.descricao||a.observacoes?(i(),l("div",Gn,r(a.descricao||a.observacoes),1)):m("",!0),t("button",{class:"btn btn--ghost btn--sm btn--danger",onClick:s=>bo(a),title:"Excluir"}," ðŸ—‘ï¸ ",8,Wn)]))),128))]))]),T.value?(i(),l("div",Kn,[e[188]||(e[188]=t("div",{class:"detail-section__header"},[t("h3",{class:"detail-section__title"},[t("svg",{class:"detail-section__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t("circle",{cx:"12",cy:"12",r:"3"})]),x(" HistÃ³rico de VisualizaÃ§Ãµes ")])],-1)),Me.value?(i(),l("div",Jn,[...e[182]||(e[182]=[t("span",{class:"detail-loading__spinner"},null,-1),x(" Carregando analytics... ",-1)])])):I.value?.stats?(i(),l(M,{key:1},[t("div",Zn,[t("div",Qn,[t("span",Xn,r(I.value.stats.humanViews),1),e[183]||(e[183]=t("span",{class:"analytics-stat__label"},"VisualizaÃ§Ãµes",-1))]),t("div",Yn,[t("span",er,r(I.value.stats.uniqueVisitors),1),e[184]||(e[184]=t("span",{class:"analytics-stat__label"},"Visitantes Ãšnicos",-1))]),t("div",tr,[t("span",ar,r(ye(I.value.stats.avgTimeOnPage)),1),e[185]||(e[185]=t("span",{class:"analytics-stat__label"},"Tempo MÃ©dio",-1))]),t("div",or,[t("span",sr,r(I.value.stats.maxScrollDepth)+"%",1),e[186]||(e[186]=t("span",{class:"analytics-stat__label"},"Max Scroll",-1))])]),t("div",ir,[t("span",lr," ðŸ’» "+r(I.value.stats.deviceBreakdown.desktop),1),t("span",nr," ðŸ“± "+r(I.value.stats.deviceBreakdown.mobile),1),t("span",rr," ðŸ“Ÿ "+r(I.value.stats.deviceBreakdown.tablet),1)]),I.value.views.length>0?(i(),l("div",dr,[e[187]||(e[187]=t("div",{class:"analytics-views__header"}," Ãšltimas VisualizaÃ§Ãµes ",-1)),t("div",cr,[(i(!0),l(M,null,S(I.value.views.slice(0,5),a=>(i(),l("div",{key:a.id,class:D(["analytics-view-item",{"analytics-view-item--bot":a.isBot,"analytics-view-item--has-recording":Ot(a.sessionId)}]),onClick:s=>so(a.sessionId)},[t("span",{class:"analytics-view-item__visitor",title:`Visitante: ${a.sessionId?.slice(0,8)||"anÃ´nimo"}`},r(At(a.sessionId)),9,pr),t("span",vr,r(a.deviceType==="mobile"?"ðŸ“±":a.deviceType==="tablet"?"ðŸ“Ÿ":"ðŸ’»"),1),t("span",{class:D(["analytics-view-item__location",{"analytics-view-item__location--unknown":!Xt(a)}]),title:qa(a),style:ie({cursor:Xt(a)?"help":"default"})}," ðŸ“ ",14,mr),t("span",fr,r(tt(a.viewedAt)),1),t("span",gr,r(ye(a.timeOnPage)),1),t("span",{class:"analytics-view-item__report",title:"Ver detalhes da sessÃ£o",onClick:$(s=>ao(a),["stop"])}," ðŸ“Š ",8,hr),t("span",_r,r(a.scrollDepth)+"% ",1),Ot(a.sessionId)?(i(),l("span",yr," â–¶ï¸ ")):m("",!0)],10,ur))),128))])])):m("",!0),I.value.stats.firstView?(i(),l("div",wr,[t("span",br," Primeira: "+r(tt(I.value.stats.firstView)),1),I.value.stats.lastView?(i(),l("span",kr," Ãšltima: "+r(tt(I.value.stats.lastView)),1)):m("",!0)])):m("",!0)],64)):(i(),l("div",xr," A proposta ainda nÃ£o foi visualizada pelo cliente. "))])):m("",!0),t("div",Cr,[e[193]||(e[193]=t("h3",{class:"detail-section__title"},"Metadados",-1)),t("div",Er,[t("div",Ar,[e[189]||(e[189]=t("span",{class:"detail-label"},"ID Pipedrive",-1)),t("span",Nr,r(d.value.pipedriveDealId||"N/A"),1)]),t("div",Tr,[e[190]||(e[190]=t("span",{class:"detail-label"},"Criado em",-1)),t("span",Mr,r(Et(d.value.dealAddTime)),1)]),t("div",Pr,[e[191]||(e[191]=t("span",{class:"detail-label"},"Atualizado em",-1)),t("span",Dr,r(Et(d.value.dealUpdateTime)),1)]),t("div",Sr,[e[192]||(e[192]=t("span",{class:"detail-label"},"Ãšltima sync",-1)),t("span",Or,r(Et(d.value.pipedriveSyncedAt)),1)])])])]),t("div",Ir,[t("div",{class:"modal__footer-left"},[t("button",{class:"btn btn--outline",onClick:Mt},"Fechar")]),t("div",Fr,[T.value&&T.value.pdfBase64?(i(),l("button",{key:0,class:"btn btn--info",onClick:Co},[e[194]||(e[194]=t("svg",{class:"btn__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t("polyline",{points:"7 10 12 15 17 10"}),t("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)),x(" Ver Proposta v"+r(T.value.versao),1)])):m("",!0),T.value?(i(),l("button",{key:1,class:"btn btn--success",onClick:Eo,disabled:He.value},[He.value?(i(),l("span",$r,"Enviando...")):(i(),l("span",Rr,[e[195]||(e[195]=t("svg",{class:"btn__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),t("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})],-1)),x(" Enviar Proposta v"+r(T.value.versao),1)]))],8,Lr)):m("",!0),T.value?(i(),l("button",{key:2,class:"btn btn--info",onClick:Ao,disabled:Ge.value},[Ge.value?(i(),l("span",Br,"Gerando HTML...")):(i(),l("span",Ur,[...e[196]||(e[196]=[t("svg",{class:"btn__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),t("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})],-1),x(" Gerar Link HTML ",-1)])]))],8,Vr)):m("",!0),t("button",{class:"btn btn--gold",onClick:xo,disabled:Rt.value},[Rt.value?(i(),l("span",zr,"Gerando...")):(i(),l("span",qr,[...e[197]||(e[197]=[t("svg",{class:"btn__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),x(" Gerar Proposta ",-1)])]))],8,jr),t("button",{class:"btn btn--secondary",onClick:e[71]||(e[71]=a=>Lt(d.value))},[...e[198]||(e[198]=[t("svg",{class:"btn__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})],-1),x(" WhatsApp ",-1)])])]),xe.value?(i(),l("div",Hr,[t("div",{class:"html-link-box__header"},[e[200]||(e[200]=t("span",null,[t("svg",{class:"html-link-box__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),t("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]),x(" Link da proposta com tracking: ")],-1)),t("button",{class:"btn btn--small btn--secondary",onClick:No},[...e[199]||(e[199]=[t("svg",{class:"btn__icon--small",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),t("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})],-1),x(" Copiar ",-1)])])]),t("a",{href:xe.value,target:"_blank",class:"html-link-box__url"},r(xe.value),9,Gr)])):m("",!0)])])])):m("",!0)])),(i(),pe(me,{to:"body"},[G.value?(i(),l("div",{key:0,class:"modal-overlay",onClick:$(at,["self"])},[t("div",Wr,[t("div",{class:"modal__header"},[e[201]||(e[201]=t("h2",{class:"modal__title"},"ðŸš€ Novo Lead",-1)),t("button",{class:"modal__close",onClick:at},"âœ•")]),t("div",Kr,[t("div",Jr,[e[202]||(e[202]=t("label",{class:"form-label"},"Nome do Cliente *",-1)),_(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[72]||(e[72]=a=>g.value.cliente=a),placeholder:"Ex: JoÃ£o Silva"},null,512),[[y,g.value.cliente]])]),t("div",Zr,[t("div",Qr,[e[203]||(e[203]=t("label",{class:"form-label"},"Telefone *",-1)),_(t("input",{type:"tel",class:"form-input","onUpdate:modelValue":e[73]||(e[73]=a=>g.value.personPhone=a),placeholder:"(11) 99999-9999"},null,512),[[y,g.value.personPhone]])]),t("div",Xr,[e[204]||(e[204]=t("label",{class:"form-label"},"E-mail",-1)),_(t("input",{type:"email",class:"form-input","onUpdate:modelValue":e[74]||(e[74]=a=>g.value.personEmail=a),placeholder:"email@exemplo.com"},null,512),[[y,g.value.personEmail]])])]),t("div",Yr,[t("div",ed,[e[205]||(e[205]=t("label",{class:"form-label"},"Cidade",-1)),_(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[75]||(e[75]=a=>g.value.cidade=a),placeholder:"Ex: SÃ£o Paulo"},null,512),[[y,g.value.cidade]])]),t("div",td,[e[206]||(e[206]=t("label",{class:"form-label"},"Metragem (mÂ²)",-1)),_(t("input",{type:"number",class:"form-input","onUpdate:modelValue":e[76]||(e[76]=a=>g.value.m2Total=a),placeholder:"Ex: 150"},null,512),[[y,g.value.m2Total]])])]),t("div",ad,[e[207]||(e[207]=t("label",{class:"form-label"},"EndereÃ§o",-1)),_(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[77]||(e[77]=a=>g.value.endereco=a),placeholder:"Rua, nÃºmero, bairro"},null,512),[[y,g.value.endereco]])]),t("div",od,[t("div",sd,[e[209]||(e[209]=t("label",{class:"form-label"},"Tipo de Cliente",-1)),_(t("select",{class:"form-select","onUpdate:modelValue":e[78]||(e[78]=a=>g.value.tipoCliente=a)},[...e[208]||(e[208]=[t("option",{value:"FINAL"},"Cliente Final",-1),t("option",{value:"ARQUITETO"},"Arquiteto",-1),t("option",{value:"CONSTRUTORA"},"Construtora",-1),t("option",{value:"DESIGNER"},"Designer",-1)])],512),[[ve,g.value.tipoCliente]])]),t("div",id,[e[211]||(e[211]=t("label",{class:"form-label"},"Origem",-1)),_(t("select",{class:"form-select","onUpdate:modelValue":e[79]||(e[79]=a=>g.value.origem=a)},[...e[210]||(e[210]=[t("option",{value:"CRM_MANUAL"},"Cadastro Manual",-1),t("option",{value:"INDICACAO"},"IndicaÃ§Ã£o",-1),t("option",{value:"SITE"},"Site",-1),t("option",{value:"INSTAGRAM"},"Instagram",-1),t("option",{value:"WHATSAPP"},"WhatsApp",-1)])],512),[[ve,g.value.origem]])])]),t("div",ld,[e[212]||(e[212]=t("label",{class:"form-label"},"Detalhes / ObservaÃ§Ãµes",-1)),_(t("textarea",{class:"form-input","onUpdate:modelValue":e[80]||(e[80]=a=>g.value.detalhes=a),placeholder:"InformaÃ§Ãµes adicionais sobre o lead...",rows:"3"},null,512),[[y,g.value.detalhes]])])]),t("div",nd,[t("button",{class:"btn btn--outline",onClick:at},"Cancelar"),t("button",{class:"btn btn--primary",onClick:Ya,disabled:!g.value.cliente||!g.value.personPhone}," Criar Lead ",8,rd)])])])):m("",!0)])),(i(),pe(me,{to:"body"},[ne.value?(i(),l("div",{key:0,class:"modal-overlay modal-overlay--large",onClick:e[82]||(e[82]=$(a=>ne.value=!1,["self"]))},[t("div",dd,[t("div",cd,[e[213]||(e[213]=t("h2",{class:"modal__title"},"âš™ï¸ Configurar Pipeline",-1)),t("button",{class:"modal__close",onClick:e[81]||(e[81]=a=>ne.value=!1)},"âœ•")]),t("div",ud,[Be(Ns,{stages:Ta.value,onSave:Do,onReset:So},null,8,["stages"])])])])):m("",!0)])),(i(),pe(me,{to:"body"},[he.value?(i(),l("div",{key:0,class:"modal-overlay",onClick:e[85]||(e[85]=$(a=>he.value=!1,["self"]))},[t("div",pd,[t("div",vd,[e[214]||(e[214]=t("h3",null,"Selecionar Especialista",-1)),t("button",{class:"modal__close",onClick:e[83]||(e[83]=a=>he.value=!1)},"âœ•")]),t("div",md,[t("button",{class:D(["specialist-option",{"specialist-option--active":!O.value}]),onClick:e[84]||(e[84]=a=>ta(""))},[e[215]||(e[215]=t("span",{class:"specialist-option__name"},"TODOS",-1)),t("span",fd,r(N.value.length)+" deals",1)],2),(i(!0),l(M,null,S(zt.value,a=>(i(),l("button",{key:a,class:D(["specialist-option",{"specialist-option--active":O.value===a}]),onClick:s=>ta(a)},[t("span",hd,r(Ra(a)),1),t("span",_d,r(a),1),t("span",yd,r(Xa(a))+" deals",1)],10,gd))),128))])])])):m("",!0)])),(i(),pe(me,{to:"body"},[ht.value?(i(),l("div",{key:0,class:"modal-overlay",onClick:$(ot,["self"])},[t("div",wd,[t("div",{class:"modal__header"},[e[216]||(e[216]=t("h2",{class:"modal__title"},"ðŸ“Ž Adicionar Anexo",-1)),t("button",{class:"modal__close",onClick:ot},"âœ•")]),t("div",bd,[t("div",kd,[e[217]||(e[217]=t("label",{class:"form-label"},"Tipo *",-1)),_(t("select",{class:"form-select","onUpdate:modelValue":e[86]||(e[86]=a=>F.value.tipo=a)},[(i(),l(M,null,S(Ut,a=>t("option",{key:a.value,value:a.value},r(a.label),9,xd)),64))],512),[[ve,F.value.tipo]])]),t("div",Cd,[e[218]||(e[218]=t("label",{class:"form-label"},"Arquivo",-1)),t("input",{type:"file",class:"form-input",onChange:po,accept:"*/*"},null,32),e[219]||(e[219]=t("p",{class:"form-hint"},"MÃ¡ximo 10MB. PDF, imagens, documentos.",-1))]),t("div",Ed,[e[220]||(e[220]=t("label",{class:"form-label"},"Nome *",-1)),_(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[87]||(e[87]=a=>F.value.nome=a),placeholder:"Nome do arquivo"},null,512),[[y,F.value.nome]])]),t("div",Ad,[e[221]||(e[221]=t("label",{class:"form-label"},"DescriÃ§Ã£o",-1)),_(t("textarea",{class:"form-textarea","onUpdate:modelValue":e[88]||(e[88]=a=>F.value.descricao=a),placeholder:"DescriÃ§Ã£o opcional...",rows:"2"},null,512),[[y,F.value.descricao]])])]),t("div",Nd,[t("button",{class:"btn btn--outline",onClick:ot},"Cancelar"),t("button",{class:"btn btn--primary",onClick:vo,disabled:!F.value.nome}," Adicionar Anexo ",8,Td)])])])):m("",!0)])),(i(),pe(me,{to:"body"},[_t.value?(i(),l("div",{key:0,class:"modal-overlay",onClick:$(st,["self"])},[t("div",Md,[t("div",{class:"modal__header"},[e[223]||(e[223]=t("h2",{class:"modal__title"},[t("svg",{class:"modal__title-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),t("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]),x(" Registrar OrÃ§amento Enviado ")],-1)),t("button",{class:"modal__close",onClick:st},[...e[222]||(e[222]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),t("div",Pd,[t("div",Dd,[t("div",Sd,[e[224]||(e[224]=t("label",{class:"form-label"},"Data de Envio *",-1)),_(t("input",{type:"date",class:"form-input","onUpdate:modelValue":e[89]||(e[89]=a=>P.value.dataEnvio=a)},null,512),[[y,P.value.dataEnvio]])]),t("div",Od,[e[225]||(e[225]=t("label",{class:"form-label"},"Valor (R$)",-1)),_(t("input",{type:"number",class:"form-input","onUpdate:modelValue":e[90]||(e[90]=a=>P.value.valor=a),step:"0.01"},null,512),[[y,P.value.valor]])])]),t("div",Id,[t("div",Fd,[e[226]||(e[226]=t("label",{class:"form-label"},"Metragem (mÂ²)",-1)),_(t("input",{type:"number",class:"form-input","onUpdate:modelValue":e[91]||(e[91]=a=>P.value.metragem=a),step:"0.01"},null,512),[[y,P.value.metragem]])]),T.value?(i(),l("div",Ld,[e[228]||(e[228]=t("label",{class:"form-label"},"Vincular Proposta",-1)),_(t("select",{class:"form-select","onUpdate:modelValue":e[92]||(e[92]=a=>P.value.propostaId=a)},[e[227]||(e[227]=t("option",{value:""},"Nenhuma",-1)),t("option",{value:T.value.id},"Proposta v"+r(T.value.versao),9,$d)],512),[[ve,P.value.propostaId]])])):m("",!0)]),t("div",Rd,[e[229]||(e[229]=t("label",{class:"form-label"},"DescriÃ§Ã£o",-1)),_(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[93]||(e[93]=a=>P.value.descricao=a),placeholder:"Ex: OrÃ§amento enviado por email"},null,512),[[y,P.value.descricao]])]),t("div",Vd,[e[230]||(e[230]=t("label",{class:"form-label"},"ObservaÃ§Ãµes",-1)),_(t("textarea",{class:"form-textarea","onUpdate:modelValue":e[94]||(e[94]=a=>P.value.observacoes=a),placeholder:"ObservaÃ§Ãµes adicionais...",rows:"2"},null,512),[[y,P.value.observacoes]])])]),t("div",Bd,[t("button",{class:"btn btn--outline",onClick:st},"Cancelar"),t("button",{class:"btn btn--primary",onClick:wo,disabled:!P.value.dataEnvio}," Registrar Envio ",8,Ud)])])])):m("",!0)])),(i(),pe(me,{to:"body"},[ut.value?(i(),l("div",{key:0,class:"modal-overlay modal-overlay--dark",onClick:$(St,["self"])},[t("div",jd,[t("div",zd,[e[232]||(e[232]=t("h2",{class:"modal__title"},[t("svg",{class:"modal__title-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("polygon",{points:"10 8 16 12 10 16 10 8"})]),x(" GravaÃ§Ã£o de SessÃ£o ")],-1)),re.value?(i(),l("div",qd,[t("span",Hd,r(re.value.deviceType==="mobile"?"ðŸ“±":re.value.deviceType==="tablet"?"ðŸ“Ÿ":"ðŸ’»")+" "+r(re.value.screenWidth)+"x"+r(re.value.screenHeight),1),t("span",Gd,r(ye(re.value.duration||0)),1)])):m("",!0),t("button",{class:"modal__close",onClick:St},[...e[231]||(e[231]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),t("div",Wd,[pt.value?(i(),l("div",Kd,[...e[233]||(e[233]=[t("div",{class:"replay-loading__spinner"},null,-1),t("span",null,"Carregando gravaÃ§Ã£o...",-1)])])):Pe.value.length>0?(i(),l("div",{key:1,class:"replay-player-container",ref_key:"replayContainer",ref:rt},[...e[234]||(e[234]=[t("div",{id:"rrweb-player"},null,-1)])],512)):(i(),l("div",Jd," Nenhum evento encontrado nesta gravaÃ§Ã£o. "))]),t("div",Zd,[t("div",Qd,[t("button",{class:"replay-footer-btn replay-footer-btn--play",onClick:io,title:de.value?"Pausar":"Reproduzir"},r(de.value?"â¸":"â–¶"),9,Xd),t("input",{type:"range",class:"replay-footer-progress",min:"0",max:"100",value:vt.value,onInput:e[95]||(e[95]=a=>lo(a))},null,40,Yd),t("span",ec,r(mt.value)+" / "+r(Bt.value),1),t("button",{class:D(["replay-footer-btn replay-footer-btn--skip",{active:Se.value}]),onClick:ro,title:"Pular perÃ­odos inativos"},"â©",2),t("div",tc,[(i(),l(M,null,S([1,2,4],a=>t("button",{key:a,class:D(["replay-footer-btn replay-footer-btn--speed",{active:ft.value===a}]),onClick:s=>no(a)},r(a)+"x",11,ac)),64))])]),t("button",{class:"btn btn--outline",onClick:St},"Fechar")])])])):m("",!0)])),(i(),pe(me,{to:"body"},[De.value?(i(),l("div",{key:0,class:"modal-overlay",onClick:e[98]||(e[98]=$(a=>De.value=!1,["self"]))},[t("div",oc,[t("div",sc,[e[236]||(e[236]=t("h2",{class:"modal__title"},[t("svg",{class:"modal__title-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M3 3v18h18"}),t("path",{d:"M8 17V9"}),t("path",{d:"M12 17V5"}),t("path",{d:"M16 17v-4"}),t("path",{d:"M20 17v-8"})]),x(" Tempo por PÃ¡gina ")],-1)),t("button",{class:"modal__close",onClick:e[96]||(e[96]=a=>De.value=!1)},[...e[235]||(e[235]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),t("div",ic,[R.value?(i(),l("div",lc,[t("span",nc,r(R.value.deviceType==="mobile"?"ðŸ“±":R.value.deviceType==="tablet"?"ðŸ“Ÿ":"ðŸ’»"),1),t("span",rc,r(tt(R.value.viewedAt)),1),t("span",dc," Total: "+r(ye(R.value.timeOnPage)),1)])):m("",!0),R.value?.pageTimes&&Object.keys(R.value.pageTimes).length>0?(i(),l("div",cc,[(i(!0),l(M,null,S(R.value.pageTimes,(a,s)=>(i(),l("div",{key:s,class:"page-time-bar"},[t("span",uc,"PÃ¡gina "+r(s),1),t("div",pc,[t("div",{class:"page-time-bar__fill",style:ie({width:oo(a)+"%"})},null,4)]),t("span",vc,r(ye(a)),1)]))),128))])):m("",!0),!R.value?.pageTimes||Object.keys(R.value.pageTimes).length===0?(i(),l("div",mc,[...e[237]||(e[237]=[t("p",null,"Dados detalhados de pÃ¡ginas nÃ£o disponÃ­veis para esta sessÃ£o.",-1),t("p",{class:"page-times-empty__hint"},"SessÃµes muito curtas podem nÃ£o ter tempo suficiente para coletar dados por pÃ¡gina.",-1)])])):m("",!0),R.value?.pagesViewed&&R.value.pagesViewed.length>0?(i(),l("div",fc,[e[238]||(e[238]=t("span",{class:"page-times-pages__label"},"PÃ¡ginas vistas:",-1)),t("span",gc,r(Array.isArray(R.value.pagesViewed)?R.value.pagesViewed.join(", "):R.value.pagesViewed),1)])):m("",!0)]),t("div",hc,[t("button",{class:"btn btn--outline",onClick:e[97]||(e[97]=a=>De.value=!1)},"Fechar")])])])):m("",!0)])),Y.value.length>0||bt.value.length>0?(i(),l("div",_c,[Y.value.length>0?(i(),l("div",yc,[t("div",wc,[e[239]||(e[239]=t("span",{class:"proposal-notifications__icon"},"ðŸ‘ï¸",-1)),e[240]||(e[240]=t("span",{class:"proposal-notifications__title"},"Visualizando Agora",-1)),t("span",bc,r(Y.value.length),1)]),t("div",kc,[(i(!0),l(M,null,S(Y.value,a=>(i(),l("div",{key:a.sessionId,class:"proposal-notification proposal-notification--live",onClick:s=>Re(a.leadId)},[t("div",Cc,r(a.clientName?.charAt(0)?.toUpperCase()||"?"),1),t("div",Ec,[t("span",Ac,r(a.clientName),1),t("span",Nc,[t("span",Tc,r(ye(a.timeOnPage)),1),t("span",Mc,r(a.deviceType==="mobile"?"ðŸ“±":"ðŸ’»"),1),t("span",Pc,r(a.scrollDepth)+"%",1)])]),e[241]||(e[241]=t("div",{class:"proposal-notification__pulse"},null,-1))],8,xc))),128))])])):m("",!0),bt.value.length>0?(i(),l("div",Dc,[e[242]||(e[242]=t("div",{class:"proposal-notifications__header"},[t("span",{class:"proposal-notifications__icon"},"ðŸ“‹"),t("span",{class:"proposal-notifications__title"},"HistÃ³rico")],-1)),t("div",Sc,[(i(!0),l(M,null,S(bt.value.slice(0,5),a=>(i(),l("div",{key:a.id,class:D(["proposal-notification proposal-notification--history",{"proposal-notification--closed":a.type==="closed"}]),onClick:s=>Re(a.leadId)},[t("div",Ic,r(a.type==="opened"?"ðŸŸ¢":"ðŸ”´"),1),t("div",Fc,[t("span",Lc,r(a.clientName),1),t("span",$c,[x(r(a.type==="opened"?"Abriu":"Fechou")+" ",1),a.timeOnPage?(i(),l(M,{key:0},[x(" â€¢ "+r(ye(a.timeOnPage)),1)],64)):m("",!0)])]),t("button",{class:"proposal-notification__dismiss",onClick:$(s=>qo(a.id),["stop"]),title:"Dispensar"},"Ã—",8,Rc)],10,Oc))),128))])])):m("",!0)])):m("",!0),K.value?(i(),l("div",Vc,[...e[243]||(e[243]=[oe('<div class="loading-content" data-v-dfd0c012><div class="infinity-track-container" data-v-dfd0c012><svg class="infinity-track" viewBox="0 0 240 100" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-dfd0c012><defs data-v-dfd0c012><path id="infinityPath" d="M120,50 C120,75 160,75 160,50 C160,25 120,25 120,50 C120,75 80,75 80,50 C80,25 120,25 120,50" data-v-dfd0c012></path></defs><use href="#infinityPath" stroke="#1a1a1a" stroke-width="3" fill="none" data-v-dfd0c012></use><circle r="4" fill="#888" data-v-dfd0c012><animateMotion dur="3.5s" repeatCount="indefinite" rotate="auto" begin="-0.1s" data-v-dfd0c012><mpath href="#infinityPath" data-v-dfd0c012></mpath></animateMotion><animate attributeName="r" values="3;7;12" dur="0.6s" repeatCount="indefinite" data-v-dfd0c012></animate><animate attributeName="opacity" values="0.5;0.2;0" dur="0.6s" repeatCount="indefinite" data-v-dfd0c012></animate><animate attributeName="cy" values="-8;-20;-35" dur="0.6s" repeatCount="indefinite" data-v-dfd0c012></animate></circle><g data-v-dfd0c012><animateMotion dur="3.5s" repeatCount="indefinite" rotate="auto" data-v-dfd0c012><mpath href="#infinityPath" data-v-dfd0c012></mpath></animateMotion><g transform="scale(-0.4, 0.4) translate(-32, -20)" data-v-dfd0c012><rect x="18" y="0" width="6" height="8" fill="#1a1a1a" data-v-dfd0c012></rect><rect x="12" y="6" width="24" height="14" rx="2" fill="#1a1a1a" data-v-dfd0c012></rect><rect x="36" y="2" width="14" height="18" fill="#1a1a1a" data-v-dfd0c012></rect><rect x="38" y="4" width="4" height="4" fill="#FFE566" data-v-dfd0c012></rect><rect x="44" y="4" width="4" height="4" fill="#FFE566" data-v-dfd0c012></rect><circle cx="18" cy="22" r="5" fill="#1a1a1a" data-v-dfd0c012></circle><circle cx="18" cy="22" r="2" fill="#c9a962" data-v-dfd0c012></circle><circle cx="30" cy="22" r="5" fill="#1a1a1a" data-v-dfd0c012></circle><circle cx="30" cy="22" r="2" fill="#c9a962" data-v-dfd0c012></circle><circle cx="44" cy="22" r="4" fill="#1a1a1a" data-v-dfd0c012></circle><circle cx="44" cy="22" r="1.5" fill="#c9a962" data-v-dfd0c012></circle><rect x="8" y="10" width="4" height="6" rx="1" fill="#FFE566" data-v-dfd0c012></rect><rect x="14" y="12" width="20" height="2" fill="#c9a962" data-v-dfd0c012></rect><rect x="36" y="16" width="14" height="2" fill="#c9a962" data-v-dfd0c012></rect></g></g></svg></div><div class="loading-text" data-v-dfd0c012><span class="loading-title" data-v-dfd0c012>Carregando Pipeline</span><div class="loading-dots" data-v-dfd0c012><span class="dot" data-v-dfd0c012></span><span class="dot" data-v-dfd0c012></span><span class="dot" data-v-dfd0c012></span></div></div><div class="loading-progress" data-v-dfd0c012><div class="loading-progress-bar" data-v-dfd0c012></div></div></div>',1)])])):m("",!0)]))}}),Wc=ha(zc,[["__scopeId","data-v-dfd0c012"]]);export{Wc as default};

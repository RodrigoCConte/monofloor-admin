import{d as me,r as f,D as N,$ as u,k as he,c as l,b as e,U as z,m as B,s as v,a as O,F as _,y as x,z as V,a0 as be,t as i,w as F,q as k,e as c,n as L,V as U,W as ke,o,f as M,v as P,_ as we}from"./index-BRoi_Bt8.js";const _e={class:"planejamento-module"},xe={class:"module-header"},Te={class:"header-content"},Ce={class:"header-actions"},Se={class:"stats-section"},Ae={class:"stats-grid"},De={class:"stat-content"},Ee={class:"stat-value"},Oe={class:"stat-label"},Ve={key:0,class:"kanban-section"},Me={class:"kanban-container"},Pe=["onDrop"],Re={class:"column-header"},je={class:"column-title"},Ne={class:"column-count"},Be={class:"column-cards"},Le=["onDragstart","onClick"],Ue={class:"planning-header"},Ge={class:"planning-client"},$e={class:"planning-address"},Ie={class:"planning-details"},ze={key:0,class:"detail-item"},Fe={key:1,class:"detail-item"},He={class:"planning-badges"},qe={key:0,class:"badge vt"},Ye={key:1,class:"badge os"},Je={key:2,class:"badge logistica"},Ke={key:1,class:"calendar-section"},Qe={class:"calendar-header"},Xe={class:"calendar-grid"},We={class:"day-number"},Ze={key:0,class:"day-events"},et={key:0,class:"more-events"},tt={class:"detail-panel"},st={class:"panel-header"},at={class:"panel-title"},nt={class:"panel-tabs"},ot={class:"panel-content"},lt={key:0,class:"tab-content"},it={class:"panel-section"},rt={class:"section-header"},ct={key:0,class:"add-form"},dt={class:"form-row"},ut={class:"form-group"},vt={class:"form-group"},pt={class:"form-group"},gt={class:"form-group"},ft={class:"form-actions"},yt={class:"vt-list"},mt={class:"vt-date"},ht={class:"day"},bt={class:"month"},kt={class:"vt-info"},wt={class:"vt-title"},_t={class:"vt-responsavel"},xt={key:0,class:"vt-obs"},Tt={class:"vt-status"},Ct=["onClick"],St={key:1,class:"completed-badge"},At={key:0,class:"empty-state"},Dt={key:1,class:"tab-content"},Et={key:0,class:"panel-section"},Ot={class:"empty-state"},Vt=["disabled"],Mt={key:0,class:"os-tip"},Pt={key:1,class:"panel-section"},Rt={class:"os-header"},jt={class:"os-info-grid"},Nt={class:"os-info-item"},Bt={class:"os-info-item"},Lt={class:"os-info-item"},Ut={class:"os-info-item full"},Gt={key:0,class:"os-actions"},$t={key:2,class:"tab-content"},It={key:0,class:"panel-section"},zt={class:"empty-state"},Ft=["disabled"],Ht={key:0,class:"os-tip"},qt={key:1,class:"panel-section"},Yt={class:"logistica-header"},Jt={class:"logistica-timeline"},Kt={class:"logistica-info"},Qt={class:"info-row"},Xt={key:0,class:"info-row"},Wt={key:1,class:"info-row"},Zt={key:0,class:"logistica-actions"},es={key:0,class:"loading-overlay"},ts=me({__name:"Planejamento",setup(ss){const d=f(!1),T=f("kanban"),D=f([]),n=f(null),y=f("vt"),C=f(null),b=f(new Date),S=f(!1),G=f(!1),m=f({dataAgendada:"",hora:"",responsavel:"",observacoes:""}),A=f({aguardandoVT:0,vtAgendadas:0,osGeradas:0,prontoExecucao:0}),R=[{id:"AGUARDANDO_VT",label:"Aguardando VT",color:"#f59e0b"},{id:"VT_AGENDADA",label:"VT Agendada",color:"#3b82f6"},{id:"VT_REALIZADA",label:"VT Realizada",color:"#8b5cf6"},{id:"GERANDO_OS",label:"Gerando OS",color:"#06b6d4"},{id:"AGUARDANDO_MATERIAL",label:"Aguardando Material",color:"#f97316"},{id:"PRONTO_EXECUCAO",label:"Pronto Execucao",color:"#22c55e"}],H=["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],q=N(()=>[{label:"Aguardando VT",value:A.value.aguardandoVT,icon:u("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[u("circle",{cx:"12",cy:"12",r:"10"}),u("polyline",{points:"12 6 12 12 16 14"})]),iconClass:"waiting"},{label:"VTs Agendadas",value:A.value.vtAgendadas,icon:u("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[u("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),u("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),u("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),u("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]),iconClass:"scheduled"},{label:"OS Geradas",value:A.value.osGeradas,icon:u("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[u("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),u("polyline",{points:"14 2 14 8 20 8"}),u("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),u("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]),iconClass:"os"},{label:"Pronto Execucao",value:A.value.prontoExecucao,icon:u("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[u("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),u("polyline",{points:"22 4 12 14.01 9 11.01"})]),iconClass:"ready"}]),Y=N(()=>b.value.toLocaleDateString("pt-BR",{month:"long",year:"numeric"})),J=N(()=>{const s=b.value.getFullYear(),t=b.value.getMonth(),a=new Date(s,t,1),p=new Date(s,t+1,0),r=new Date,h=[];for(let g=0;g<a.getDay();g++){const w=new Date(s,t,-g);h.unshift({date:w.toISOString(),day:w.getDate(),otherMonth:!0,isToday:!1,events:[]})}for(let g=1;g<=p.getDate();g++){const w=new Date(s,t,g);h.push({date:w.toISOString(),day:g,otherMonth:!1,isToday:w.toDateString()===r.toDateString(),events:te(w)})}const ye=42-h.length;for(let g=1;g<=ye;g++){const w=new Date(s,t+1,g);h.push({date:w.toISOString(),day:g,otherMonth:!0,isToday:!1,events:[]})}return h});function E(s){return s?new Date(s).toLocaleDateString("pt-BR"):"-"}function K(s){return new Date(s).getDate().toString().padStart(2,"0")}function Q(s){return new Date(s).toLocaleDateString("pt-BR",{month:"short"}).replace(".","")}function $(s){return D.value.filter(t=>t.status===s)}function X(s){return R.find(t=>t.id===s)?.color||"#6b7280"}function W(s){return R.find(t=>t.id===s)?.label||s}function Z(s){return{RASCUNHO:"Rascunho",APROVADA:"Aprovada",EM_EXECUCAO:"Em Execucao",CONCLUIDA:"Concluida"}[s]||s}function ee(s){return{AGUARDANDO_MATERIAL:"Aguardando Material",MATERIAL_SEPARADO:"Material Separado",EM_TRANSITO:"Em Transito",ENTREGUE:"Entregue"}[s]||s}function te(s){const t=[];return D.value.forEach(a=>{a.visitasTecnicas?.forEach(p=>{new Date(p.dataAgendada).toDateString()===s.toDateString()&&t.push({type:"vt"})})}),t}function se(){b.value=new Date(b.value.getFullYear(),b.value.getMonth()-1,1)}function ae(){b.value=new Date(b.value.getFullYear(),b.value.getMonth()+1,1)}function ne(s,t){C.value=t,s.dataTransfer&&(s.dataTransfer.effectAllowed="move")}async function oe(s,t){s.preventDefault(),C.value&&C.value.status!==t&&await ie(C.value.id,t),C.value=null}async function I(){try{const t=await(await fetch("/api/admin/planejamento/stats")).json();t.success&&(A.value=t.stats)}catch(s){console.error("Error fetching stats:",s)}}async function le(){d.value=!0;try{const t=await(await fetch("/api/admin/planejamento")).json();t.success&&(D.value=t.data)}catch(s){console.error("Error fetching plannings:",s)}finally{d.value=!1}}async function ie(s,t){d.value=!0;try{if((await(await fetch(`/api/admin/planejamento/${s}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})})).json()).success){const r=D.value.find(h=>h.id===s);r&&(r.status=t),await I()}}catch(a){console.error("Error changing status:",a)}finally{d.value=!1}}async function re(){if(n.value){d.value=!0;try{const t=await(await fetch(`/api/admin/planejamento/${n.value.id}/vt`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m.value)})).json();t.success&&(n.value.visitasTecnicas||(n.value.visitasTecnicas=[]),n.value.visitasTecnicas.push(t.data),S.value=!1,m.value={dataAgendada:"",hora:"",responsavel:"",observacoes:""})}catch(s){console.error("Error creating VT:",s)}finally{d.value=!1}}}async function ce(s){if(n.value){d.value=!0;try{if((await(await fetch(`/api/admin/planejamento/vt/${s}/complete`,{method:"PUT"})).json()).success&&n.value.visitasTecnicas){const p=n.value.visitasTecnicas.find(r=>r.id===s);p&&(p.realizada=!0)}}catch(t){console.error("Error completing VT:",t)}finally{d.value=!1}}}async function de(){if(n.value){d.value=!0;try{const t=await(await fetch(`/api/admin/planejamento/${n.value.id}/os`,{method:"POST"})).json();t.success&&(n.value.ordemServico=t.data,n.value.osGerada=!0)}catch(s){console.error("Error generating OS:",s)}finally{d.value=!1}}}async function ue(){if(n.value?.ordemServico){d.value=!0;try{const t=await(await fetch(`/api/admin/planejamento/os/${n.value.ordemServico.id}/advance`,{method:"PUT"})).json();t.success&&(n.value.ordemServico=t.data)}catch(s){console.error("Error advancing OS:",s)}finally{d.value=!1}}}async function ve(){if(n.value?.logistica){d.value=!0;try{const t=await(await fetch(`/api/admin/planejamento/logistica/${n.value.logistica.id}/advance`,{method:"PUT"})).json();t.success&&(n.value.logistica=t.data)}catch(s){console.error("Error advancing logistica:",s)}finally{d.value=!1}}}async function pe(){if(n.value?.logistica){d.value=!0;try{const t=await(await fetch(`/api/admin/planejamento/logistica/${n.value.logistica.id}/confirm-delivery`,{method:"PUT"})).json();t.success&&(n.value.logistica=t.data)}catch(s){console.error("Error confirming delivery:",s)}finally{d.value=!1}}}async function ge(){j()}function fe(s){n.value={...s},y.value="vt"}function j(){n.value=null,S.value=!1,G.value=!1}return he(()=>{I(),le()}),(s,t)=>(o(),l("div",_e,[e("header",xe,[e("div",Te,[t[15]||(t[15]=e("div",{class:"title-section"},[e("h1",{class:"module-title"},"Planejamento"),e("p",{class:"module-subtitle"},"Visitas Tecnicas, OS e Logistica")],-1)),e("div",Ce,[e("button",{class:v(["btn-view",{active:T.value==="kanban"}]),onClick:t[0]||(t[0]=a=>T.value="kanban")},[...t[13]||(t[13]=[O('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-527ec076><rect x="3" y="3" width="7" height="7" rx="1" data-v-527ec076></rect><rect x="14" y="3" width="7" height="7" rx="1" data-v-527ec076></rect><rect x="3" y="14" width="7" height="7" rx="1" data-v-527ec076></rect><rect x="14" y="14" width="7" height="7" rx="1" data-v-527ec076></rect></svg> Kanban ',2)])],2),e("button",{class:v(["btn-view",{active:T.value==="calendar"}]),onClick:t[1]||(t[1]=a=>T.value="calendar")},[...t[14]||(t[14]=[O('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-527ec076><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-v-527ec076></rect><line x1="16" y1="2" x2="16" y2="6" data-v-527ec076></line><line x1="8" y1="2" x2="8" y2="6" data-v-527ec076></line><line x1="3" y1="10" x2="21" y2="10" data-v-527ec076></line></svg> Agenda ',2)])],2)])])]),e("section",Se,[e("div",Ae,[(o(!0),l(_,null,x(q.value,(a,p)=>(o(),l("div",{class:"stat-card",key:a.label,style:V({"--delay":p*.1+"s"})},[e("div",{class:v(["stat-icon",a.iconClass])},[(o(),z(be(a.icon)))],2),e("div",De,[e("span",Ee,i(a.value),1),e("span",Oe,i(a.label),1)])],4))),128))])]),T.value==="kanban"?(o(),l("section",Ve,[e("div",Me,[(o(),l(_,null,x(R,(a,p)=>e("div",{class:"kanban-column",key:a.id,style:V({"--column-index":p}),onDragover:t[2]||(t[2]=F(()=>{},["prevent"])),onDrop:r=>oe(r,a.id)},[e("div",Re,[e("div",je,[e("span",{class:"column-dot",style:V({background:a.color})},null,4),k(" "+i(a.label),1)]),e("span",Ne,i($(a.id).length),1)]),e("div",Be,[(o(!0),l(_,null,x($(a.id),r=>(o(),l("div",{class:"planning-card",key:r.id,draggable:"true",onDragstart:h=>ne(h,r),onClick:h=>fe(r)},[e("div",Ue,[e("span",Ge,i(r.project?.cliente),1)]),e("div",$e,[t[16]||(t[16]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e("circle",{cx:"12",cy:"10",r:"3"})],-1)),k(" "+i(r.project?.endereco||"Sem endereco"),1)]),e("div",Ie,[r.project?.m2Total?(o(),l("div",ze,[t[17]||(t[17]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"})],-1)),k(" "+i(r.project.m2Total)+" m2 ",1)])):c("",!0),r.visitasTecnicas?.length?(o(),l("div",Fe,[t[18]||(t[18]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e("line",{x1:"8",y1:"2",x2:"8",y2:"6"})],-1)),k(" "+i(r.visitasTecnicas.length)+" VTs ",1)])):c("",!0)]),e("div",He,[r.vtCompleta?(o(),l("span",qe,[...t[19]||(t[19]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"20 6 9 17 4 12"})],-1),k(" VT OK ",-1)])])):c("",!0),r.osGerada?(o(),l("span",Ye,[...t[20]||(t[20]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"})],-1),k(" OS ",-1)])])):c("",!0),r.logistica?.status==="ENTREGUE"?(o(),l("span",Je,[...t[21]||(t[21]=[O('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-527ec076><rect x="1" y="3" width="15" height="13" data-v-527ec076></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8" data-v-527ec076></polygon><circle cx="5.5" cy="18.5" r="2.5" data-v-527ec076></circle><circle cx="18.5" cy="18.5" r="2.5" data-v-527ec076></circle></svg> Entregue ',2)])])):c("",!0)])],40,Le))),128))])],44,Pe)),64))])])):(o(),l("section",Ke,[e("div",Qe,[e("button",{class:"nav-btn",onClick:se},[...t[22]||(t[22]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"15 18 9 12 15 6"})],-1)])]),e("h2",null,i(Y.value),1),e("button",{class:"nav-btn",onClick:ae},[...t[23]||(t[23]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"9 18 15 12 9 6"})],-1)])])]),e("div",Xe,[(o(),l(_,null,x(H,a=>e("div",{class:"calendar-weekday",key:a},i(a),1)),64)),(o(!0),l(_,null,x(J.value,a=>(o(),l("div",{class:v(["calendar-day",{"other-month":a.otherMonth,today:a.isToday,"has-events":a.events?.length}]),key:a.date},[e("span",We,i(a.day),1),a.events?.length?(o(),l("div",Ze,[(o(!0),l(_,null,x(a.events.slice(0,3),(p,r)=>(o(),l("div",{class:v(["event-dot",p.type]),key:r},null,2))),128)),a.events.length>3?(o(),l("span",et,"+"+i(a.events.length-3),1)):c("",!0)])):c("",!0)],2))),128))]),t[24]||(t[24]=O('<div class="calendar-legend" data-v-527ec076><div class="legend-item" data-v-527ec076><span class="dot vt" data-v-527ec076></span> Visita Tecnica</div><div class="legend-item" data-v-527ec076><span class="dot entrega" data-v-527ec076></span> Entrega Material</div><div class="legend-item" data-v-527ec076><span class="dot inicio" data-v-527ec076></span> Inicio Obra</div></div>',1))])),(o(),z(ke,{to:"body"},[B(U,{name:"panel"},{default:L(()=>[n.value?(o(),l("div",{key:0,class:"detail-panel-overlay",onClick:F(j,["self"])},[e("div",tt,[e("div",st,[e("div",at,[e("h2",null,i(n.value.project?.cliente),1),e("span",{class:"status-badge",style:V({"--status-color":X(n.value.status)})},i(W(n.value.status)),5)]),e("button",{class:"close-btn",onClick:j},[...t[25]||(t[25]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),e("div",nt,[e("button",{class:v({active:y.value==="vt"}),onClick:t[3]||(t[3]=a=>y.value="vt")},"Visitas Tecnicas",2),e("button",{class:v({active:y.value==="os"}),onClick:t[4]||(t[4]=a=>y.value="os")},"Ordem de Servico",2),e("button",{class:v({active:y.value==="logistica"}),onClick:t[5]||(t[5]=a=>y.value="logistica")},"Logistica",2)]),e("div",ot,[y.value==="vt"?(o(),l("div",lt,[e("div",it,[e("div",rt,[e("h3",null,"Visitas Tecnicas ("+i(n.value.visitasTecnicas?.length||0)+")",1),e("button",{class:"btn-small",onClick:t[6]||(t[6]=a=>S.value=!0)},[...t[26]||(t[26]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),k(" Agendar VT ",-1)])])]),B(U,{name:"slide"},{default:L(()=>[S.value?(o(),l("div",ct,[e("div",dt,[e("div",ut,[t[27]||(t[27]=e("label",null,"Data",-1)),M(e("input",{type:"date","onUpdate:modelValue":t[7]||(t[7]=a=>m.value.dataAgendada=a)},null,512),[[P,m.value.dataAgendada]])]),e("div",vt,[t[28]||(t[28]=e("label",null,"Hora",-1)),M(e("input",{type:"time","onUpdate:modelValue":t[8]||(t[8]=a=>m.value.hora=a)},null,512),[[P,m.value.hora]])])]),e("div",pt,[t[29]||(t[29]=e("label",null,"Responsavel",-1)),M(e("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=a=>m.value.responsavel=a),placeholder:"Nome do responsavel"},null,512),[[P,m.value.responsavel]])]),e("div",gt,[t[30]||(t[30]=e("label",null,"Observacoes",-1)),M(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=a=>m.value.observacoes=a),rows:"2"},null,512),[[P,m.value.observacoes]])]),e("div",ft,[e("button",{class:"btn-cancel",onClick:t[11]||(t[11]=a=>S.value=!1)},"Cancelar"),e("button",{class:"btn-save",onClick:re},"Agendar")])])):c("",!0)]),_:1}),e("div",yt,[(o(!0),l(_,null,x(n.value.visitasTecnicas,a=>(o(),l("div",{class:v(["vt-item",{completed:a.realizada}]),key:a.id},[e("div",mt,[e("span",ht,i(K(a.dataAgendada)),1),e("span",bt,i(Q(a.dataAgendada)),1)]),e("div",kt,[e("span",wt,"Visita Tecnica "+i(a.numero),1),e("span",_t,i(a.responsavel||"Sem responsavel"),1),a.observacoes?(o(),l("span",xt,i(a.observacoes),1)):c("",!0)]),e("div",Tt,[a.realizada?(o(),l("span",St,[...t[32]||(t[32]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"20 6 9 17 4 12"})],-1),k(" Realizada ",-1)])])):(o(),l("button",{key:0,class:"btn-complete",onClick:p=>ce(a.id)},[...t[31]||(t[31]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"20 6 9 17 4 12"})],-1),k(" Concluir ",-1)])],8,Ct))])],2))),128)),n.value.visitasTecnicas?.length?c("",!0):(o(),l("div",At,[...t[33]||(t[33]=[e("p",null,"Nenhuma visita tecnica agendada",-1)])]))])])])):c("",!0),y.value==="os"?(o(),l("div",Dt,[n.value.ordemServico?(o(),l("div",Pt,[e("div",Rt,[e("h3",null,"OS #"+i(n.value.ordemServico.numero),1),e("span",{class:v(["os-status",n.value.ordemServico.status.toLowerCase()])},i(Z(n.value.ordemServico.status)),3)]),e("div",jt,[e("div",Nt,[t[36]||(t[36]=e("label",null,"Data Prevista Inicio",-1)),e("span",null,i(E(n.value.ordemServico.dataPrevistaInicio)),1)]),e("div",Bt,[t[37]||(t[37]=e("label",null,"Data Prevista Fim",-1)),e("span",null,i(E(n.value.ordemServico.dataPrevistaFim)),1)]),e("div",Lt,[t[38]||(t[38]=e("label",null,"Equipe Designada",-1)),e("span",null,i(n.value.ordemServico.equipeDesignada||"Nao definida"),1)]),e("div",Ut,[t[39]||(t[39]=e("label",null,"Instrucoes Especiais",-1)),e("span",null,i(n.value.ordemServico.instrucoesEspeciais||"Nenhuma"),1)])]),n.value.ordemServico.status!=="CONCLUIDA"?(o(),l("div",Gt,[e("button",{class:"btn-advance",onClick:ue}," Avancar Status ")])):c("",!0)])):(o(),l("div",Et,[e("div",Ot,[t[34]||(t[34]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"})],-1)),t[35]||(t[35]=e("p",null,"Ordem de Servico nao gerada",-1)),e("button",{class:"btn-generate-os",onClick:de,disabled:!n.value.vtCompleta}," Gerar OS ",8,Vt),n.value.vtCompleta?c("",!0):(o(),l("span",Mt,"Complete a VT antes de gerar a OS"))])]))])):c("",!0),y.value==="logistica"?(o(),l("div",$t,[n.value.logistica?(o(),l("div",qt,[e("div",Yt,[t[42]||(t[42]=e("h3",null,"Entrega de Materiais",-1)),e("span",{class:v(["logistica-status",n.value.logistica.status.toLowerCase()])},i(ee(n.value.logistica.status)),3)]),e("div",Jt,[e("div",{class:v(["timeline-item",{active:n.value.logistica.status==="AGUARDANDO_MATERIAL"}])},[...t[43]||(t[43]=[e("div",{class:"timeline-dot"},null,-1),e("div",{class:"timeline-content"},[e("span",{class:"timeline-title"},"Aguardando Material")],-1)])],2),e("div",{class:v(["timeline-item",{active:n.value.logistica.status==="MATERIAL_SEPARADO"}])},[...t[44]||(t[44]=[e("div",{class:"timeline-dot"},null,-1),e("div",{class:"timeline-content"},[e("span",{class:"timeline-title"},"Material Separado")],-1)])],2),e("div",{class:v(["timeline-item",{active:n.value.logistica.status==="EM_TRANSITO"}])},[...t[45]||(t[45]=[e("div",{class:"timeline-dot"},null,-1),e("div",{class:"timeline-content"},[e("span",{class:"timeline-title"},"Em Transito")],-1)])],2),e("div",{class:v(["timeline-item",{active:n.value.logistica.status==="ENTREGUE"}])},[...t[46]||(t[46]=[e("div",{class:"timeline-dot"},null,-1),e("div",{class:"timeline-content"},[e("span",{class:"timeline-title"},"Entregue")],-1)])],2)]),e("div",Kt,[e("div",Qt,[t[47]||(t[47]=e("label",null,"Data Prevista",-1)),e("span",null,i(E(n.value.logistica.dataPrevistaEntrega)),1)]),n.value.logistica.dataEntrega?(o(),l("div",Xt,[t[48]||(t[48]=e("label",null,"Data Entrega",-1)),e("span",null,i(E(n.value.logistica.dataEntrega)),1)])):c("",!0),n.value.logistica.motorista?(o(),l("div",Wt,[t[49]||(t[49]=e("label",null,"Motorista",-1)),e("span",null,i(n.value.logistica.motorista),1)])):c("",!0)]),n.value.logistica.status!=="ENTREGUE"?(o(),l("div",Zt,[e("button",{class:"btn-advance",onClick:ve}," Avancar Status "),n.value.logistica.status==="EM_TRANSITO"?(o(),l("button",{key:0,class:"btn-confirm-delivery",onClick:pe}," Confirmar Entrega ")):c("",!0)])):c("",!0)])):(o(),l("div",It,[e("div",zt,[t[40]||(t[40]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("rect",{x:"1",y:"3",width:"15",height:"13"}),e("polygon",{points:"16 8 20 8 23 11 23 16 16 16 16 8"}),e("circle",{cx:"5.5",cy:"18.5",r:"2.5"}),e("circle",{cx:"18.5",cy:"18.5",r:"2.5"})],-1)),t[41]||(t[41]=e("p",null,"Logistica nao configurada",-1)),e("button",{class:"btn-generate-os",onClick:t[12]||(t[12]=a=>G.value=!0),disabled:!n.value.osGerada}," Configurar Entrega ",8,Ft),n.value.osGerada?c("",!0):(o(),l("span",Ht,"Gere a OS antes de configurar a entrega"))])]))])):c("",!0)]),e("div",{class:"panel-footer"},[e("button",{class:"btn-save-changes",onClick:ge},"Salvar Alteracoes")])])])):c("",!0)]),_:1})])),B(U,{name:"fade"},{default:L(()=>[d.value?(o(),l("div",es,[...t[50]||(t[50]=[e("div",{class:"loader"},null,-1)])])):c("",!0)]),_:1})]))}}),ns=we(ts,[["__scopeId","data-v-527ec076"]]);export{ns as default};

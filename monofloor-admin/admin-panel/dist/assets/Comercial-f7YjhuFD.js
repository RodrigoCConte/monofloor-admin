import{d as ho,r as u,E as fo,D as z,c as l,b as t,F as M,y as S,f as _,v as y,w as $,s as P,a as ae,q as x,z as ie,t as r,o as i,_ as _o,u as Qa,j as Xa,k as Ya,l as es,e as m,U as pe,m as Be,n as lt,V as vo,Y as mo,I as we,x as ve,W as me,Z as B,L as ts,G as os}from"./index-Nc6DbBpt.js";import{_ as as}from"./saturn-CvwfwOtg.js";import{c as ss,h as is,k as ls,m as ns,n as rs}from"./socket-Dsl3aBbF.js";const ds={class:"pipeline-settings"},cs={class:"pipeline-settings__groups"},us={class:"pipeline-settings__group-header"},ps=["onUpdate:modelValue","onBlur"],vs=["onUpdate:modelValue","onChange"],ms={class:"pipeline-settings__stages"},gs=["onDragstart","onDragover","onDrop"],hs=["onUpdate:modelValue"],fs=["onUpdate:modelValue"],_s={class:"pipeline-settings__stage-probability"},ys=["onUpdate:modelValue"],ws=["disabled","onClick"],bs=["onClick"],ks={class:"pipeline-settings__preview"},xs={class:"pipeline-settings__preview-stages"},Cs={class:"pipeline-settings__preview-name"},Es={class:"pipeline-settings__preview-probability"},As=ho({__name:"PipelineSettings",props:{stages:{}},emits:["save","reset"],setup($t,{emit:le}){const g=$t,K=le,N=u(null),J=u(null),G=u([]),ne=()=>{const E=new Map,f=new Map;[...g.stages].sort((b,k)=>(b.sortOrder??0)-(k.sortOrder??0)).forEach(b=>{const k=b.groupName||"Outros";E.has(k)||(E.set(k,[]),f.set(k,b.color)),E.get(k).push({...b})}),G.value=Array.from(E.entries()).map(([b,k])=>({name:b,color:f.get(b)||"#666",stages:k}))};ne(),fo(()=>g.stages,ne,{deep:!0});const d=z(()=>{const E=[];let f=0;return G.value.forEach(w=>{w.stages.forEach(b=>{E.push({...b,groupName:w.name,sortOrder:f++})})}),E}),Ae=()=>`stage-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,ge=E=>{const f=G.value[E];if(!f)return;const w={id:Ae(),name:"Novo estÃ¡gio",color:f.color,probability:50,groupName:f.name,sortOrder:f.stages.length};f.stages.push(w)},nt=(E,f)=>{const w=G.value[E];if(!w)return;const b=w.stages[f];!b||b.isDefault||w.stages.splice(f,1)},rt=()=>{G.value.push({name:"Novo Grupo",color:"#666666",stages:[]})},j=E=>{const f=G.value[E];f&&f.stages.forEach(w=>{w.groupName=f.name})},Z=E=>{},he=(E,f,w,b)=>{N.value=f,J.value={groupIndex:w,stageIndex:b},E.dataTransfer.effectAllowed="move"},be=()=>{N.value=null,J.value=null},ee=(E,f,w)=>{E.dataTransfer.dropEffect="move"},te=(E,f,w)=>{if(!N.value||!J.value)return;const b=G.value[J.value.groupIndex],k=G.value[f];!b||!k||(b.stages.splice(J.value.stageIndex,1),J.value.groupIndex!==f&&(N.value.groupName=k.name),k.stages.splice(w,0,N.value),N.value=null,J.value=null)},fe=()=>{K("save",d.value)},O=()=>{K("reset")};return(E,f)=>(i(),l("div",ds,[f[6]||(f[6]=t("div",{class:"pipeline-settings__header"},[t("h2",{class:"pipeline-settings__title"},"Configurar Pipeline"),t("p",{class:"pipeline-settings__subtitle"}," Personalize os estÃ¡gios do seu funil de vendas ")],-1)),t("div",cs,[(i(!0),l(M,null,S(G.value,(w,b)=>(i(),l("div",{key:w.name,class:"pipeline-settings__group"},[t("div",us,[_(t("input",{"onUpdate:modelValue":k=>w.name=k,class:"pipeline-settings__group-name-input",placeholder:"Nome do grupo",onBlur:k=>j(b)},null,40,ps),[[y,w.name]]),_(t("input",{type:"color","onUpdate:modelValue":k=>w.color=k,class:"pipeline-settings__color-picker",onChange:k=>Z()},null,40,vs),[[y,w.color]])]),t("div",ms,[(i(!0),l(M,null,S(w.stages,(k,ke)=>(i(),l("div",{key:k.id,class:P(["pipeline-settings__stage",{"pipeline-settings__stage--dragging":N.value?.id===k.id}]),draggable:"true",onDragstart:A=>he(A,k,b,ke),onDragend:be,onDragover:$(A=>ee(A),["prevent"]),onDrop:A=>te(A,b,ke)},[f[2]||(f[2]=ae('<div class="pipeline-settings__stage-handle" data-v-76ba680e><svg viewBox="0 0 24 24" fill="currentColor" data-v-76ba680e><circle cx="9" cy="6" r="1.5" data-v-76ba680e></circle><circle cx="15" cy="6" r="1.5" data-v-76ba680e></circle><circle cx="9" cy="12" r="1.5" data-v-76ba680e></circle><circle cx="15" cy="12" r="1.5" data-v-76ba680e></circle><circle cx="9" cy="18" r="1.5" data-v-76ba680e></circle><circle cx="15" cy="18" r="1.5" data-v-76ba680e></circle></svg></div>',1)),_(t("input",{type:"color","onUpdate:modelValue":A=>k.color=A,class:"pipeline-settings__stage-color"},null,8,hs),[[y,k.color]]),_(t("input",{"onUpdate:modelValue":A=>k.name=A,class:"pipeline-settings__stage-name",placeholder:"Nome do estÃ¡gio"},null,8,fs),[[y,k.name]]),t("div",_s,[_(t("input",{type:"number","onUpdate:modelValue":A=>k.probability=A,min:"0",max:"100",class:"pipeline-settings__probability-input"},null,8,ys),[[y,k.probability,void 0,{number:!0}]]),f[0]||(f[0]=t("span",{class:"pipeline-settings__probability-label"},"%",-1))]),t("button",{class:"pipeline-settings__stage-delete",title:"Remover estÃ¡gio",disabled:k.isDefault,onClick:A=>nt(b,ke)},[...f[1]||(f[1]=[ae('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-76ba680e><polyline points="3 6 5 6 21 6" data-v-76ba680e></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" data-v-76ba680e></path><line x1="10" y1="11" x2="10" y2="17" data-v-76ba680e></line><line x1="14" y1="11" x2="14" y2="17" data-v-76ba680e></line></svg>',1)])],8,ws)],42,gs))),128)),t("button",{class:"pipeline-settings__add-stage",onClick:k=>ge(b)},[...f[3]||(f[3]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),x(" Adicionar estÃ¡gio ",-1)])],8,bs)])]))),128)),t("button",{class:"pipeline-settings__add-group",onClick:rt},[...f[4]||(f[4]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),x(" Adicionar grupo ",-1)])])]),t("div",ks,[f[5]||(f[5]=t("h3",{class:"pipeline-settings__preview-title"},"Preview do Pipeline",-1)),t("div",xs,[(i(!0),l(M,null,S(d.value,w=>(i(),l("div",{key:w.id,class:"pipeline-settings__preview-stage",style:ie({borderColor:w.color})},[t("div",{class:"pipeline-settings__preview-indicator",style:ie({backgroundColor:w.color})},null,4),t("span",Cs,r(w.name),1),t("span",Es,r(w.probability??50)+"%",1)],4))),128))])]),t("div",{class:"pipeline-settings__actions"},[t("button",{class:"pipeline-settings__btn pipeline-settings__btn--secondary",onClick:O}," Restaurar padrÃ£o "),t("button",{class:"pipeline-settings__btn pipeline-settings__btn--primary",onClick:fe}," Salvar alteraÃ§Ãµes ")])]))}}),Ns=_o(As,[["__scopeId","data-v-76ba680e"]]),Ts={class:"crm"},Ms={key:0,class:"crm-header"},Ps={class:"crm-header__top"},Ds={class:"specialist-name pixel-text"},Ss={class:"crm-header__actions"},Os={class:"notification-bell-container"},Is={key:0,class:"notification-bell__eye"},Fs={key:1,class:"notification-bell__badge"},Ls={class:"notification-panel__header"},$s={key:0,class:"notification-panel__section notification-panel__section--live"},Vs={class:"notification-panel__section-header notification-panel__section-header--closeable"},Rs={class:"notification-panel__section-title"},Bs={class:"notification-panel__section-count"},Us={class:"notification-panel__list"},js=["onClick"],zs={class:"notification-item__avatar"},qs={class:"notification-item__avatar-letter"},Hs={class:"notification-item__content"},Gs={class:"notification-item__name"},Ws={class:"notification-item__meta"},Ks={class:"notification-item__device"},Js={class:"notification-item__owner"},Zs={class:"notification-item__stats"},Qs={class:"notification-item__timer"},Xs={class:"notification-item__timer-value"},Ys={class:"notification-item__scroll-bar"},ei={key:1,class:"notification-panel__empty"},ti={key:2,class:"notification-panel__section notification-panel__section--history"},oi={class:"notification-panel__section-title"},ai={class:"notification-panel__section-count"},si={class:"notification-panel__list notification-panel__list--compact"},ii=["onClick"],li=["title"],ni={class:"notification-item__content"},ri={class:"notification-item__name"},di={class:"notification-item__meta"},ci={class:"notification-item__owner-small"},ui={class:"notification-item__time-ago"},pi=["onClick"],vi={class:"toast-notification__icon"},mi={class:"toast-notification__content"},gi={class:"toast-notification__title"},hi={class:"toast-notification__subtitle"},fi=["onClick"],_i={class:"crm-kpis"},yi={class:"kpi-card kpi-card--deals"},wi={class:"kpi-card__content"},bi={class:"kpi-card__value"},ki={class:"kpi-card kpi-card--pipeline"},xi={class:"kpi-card__content"},Ci={class:"kpi-card__value"},Ei={class:"kpi-card kpi-card--won"},Ai={class:"kpi-card__content"},Ni={class:"kpi-card__value"},Ti={class:"kpi-card kpi-card--conversion"},Mi={class:"kpi-card__content"},Pi={class:"kpi-card__value"},Di={class:"kpi-card kpi-card--avg"},Si={class:"kpi-card__content"},Oi={class:"kpi-card__value"},Ii={class:"kpi-card kpi-card--ticket"},Fi={class:"kpi-card__content"},Li={class:"kpi-card__value"},$i={key:1,class:"search-bar-container"},Vi={key:0,class:"search-suggestions"},Ri={key:0,class:"search-suggestions__empty"},Bi=["onMousedown"],Ui={class:"search-suggestion__main"},ji={class:"search-suggestion__name"},zi=["innerHTML"],qi={class:"search-suggestion__details"},Hi={key:0,class:"search-suggestion__phone"},Gi={key:1,class:"search-suggestion__email"},Wi={key:0,class:"search-suggestion__location"},Ki={key:2,class:"filters-bar"},Ji={class:"filter-group"},Zi={class:"filter-group"},Qi=["value"],Xi={class:"filter-group"},Yi={class:"filter-group"},el=["onDragover","onDrop"],tl={class:"pipeline-column__header"},ol={class:"pipeline-column__title"},al=["innerHTML"],sl={class:"pipeline-column__meta"},il={class:"pipeline-column__count"},ll={class:"pipeline-column__value"},nl=["onClick"],rl={class:"pipeline-column__body"},dl=["onDragstart","onClick"],cl={class:"deal-card__header"},ul={class:"deal-card__name"},pl={class:"deal-card__id"},vl={key:0,class:"deal-card__tags"},ml={key:0,class:"deal-card__tag deal-card__tag--tipo"},gl={key:0,class:"deal-card__tag-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},hl={key:1,class:"deal-card__tag-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},fl={key:1,class:"deal-card__tag deal-card__tag--m2"},_l={class:"deal-card__value"},yl={key:1,class:"deal-card__location"},wl={class:"deal-card__footer"},bl=["title"],kl={class:"deal-card__specialist-name"},xl={class:"deal-card__views-count"},Cl={class:"deal-card__actions"},El=["onClick"],Al=["onClick"],Nl=["onClick"],Tl={key:0,class:"pipeline-column__empty"},Ml={class:"modal modal--large"},Pl={class:"modal__header"},Dl={class:"modal__header-content"},Sl={class:"modal__title"},Ol={class:"modal__badges"},Il={key:0,class:"badge badge--tipo"},Fl={key:1,class:"badge badge--projeto"},Ll={class:"modal__actions"},$l=["href"],Vl={class:"pipeline-progress"},Rl={class:"pipeline-progress__track"},Bl=["onClick","title"],Ul={key:0,class:"pipeline-progress__train"},jl={class:"pipeline-progress__days"},zl={class:"pipeline-progress__stage-name"},ql={class:"pipeline-progress__final"},Hl={class:"modal__body modal__body--scroll"},Gl={class:"detail-section"},Wl={class:"detail-grid detail-grid--highlight"},Kl={class:"detail-item detail-item--highlight"},Jl={class:"detail-item"},Zl={class:"detail-item"},Ql={class:"detail-item"},Xl=["value"],Yl={class:"detail-section"},en={class:"detail-grid"},tn={class:"detail-item"},on={class:"detail-item"},an={class:"detail-item"},sn={class:"detail-value"},ln={class:"detail-item"},nn={class:"detail-value"},rn={class:"detail-section"},dn={class:"detail-grid"},cn={class:"detail-item detail-item--full"},un={class:"detail-item"},pn={class:"detail-item"},vn={class:"detail-item"},mn={class:"detail-value"},gn={class:"detail-item"},hn={class:"detail-item"},fn={class:"detail-item"},_n={key:0,class:"detail-section"},yn={class:"detail-grid"},wn={class:"detail-item"},bn={class:"detail-item detail-item--full"},kn={class:"detail-section"},xn={class:"detail-grid"},Cn={class:"detail-item detail-item--full"},En={class:"detail-item detail-item--full"},An={class:"detail-section"},Nn={key:0,class:"detail-loading"},Tn={key:1,class:"detail-empty"},Mn={key:2,class:"anexos-list"},Pn={class:"anexo-item__icon"},Dn={class:"anexo-item__info"},Sn={class:"anexo-item__nome"},On={class:"anexo-item__meta"},In={key:0},Fn={class:"anexo-item__actions"},Ln=["onClick"],$n=["onClick"],Vn={class:"detail-section"},Rn={key:0,class:"detail-loading"},Bn={key:1,class:"detail-empty"},Un={key:2,class:"orcamentos-list"},jn={class:"orcamento-item__date"},zn={class:"orcamento-item__info"},qn={key:0,class:"orcamento-item__valor"},Hn={key:1,class:"orcamento-item__metragem"},Gn={key:2,class:"orcamento-item__proposta"},Wn={key:0,class:"orcamento-item__desc"},Kn=["onClick"],Jn={key:1,class:"detail-section"},Zn={key:0,class:"detail-loading"},Qn={class:"analytics-stats"},Xn={class:"analytics-stat"},Yn={class:"analytics-stat__value"},er={class:"analytics-stat"},tr={class:"analytics-stat__value"},or={class:"analytics-stat"},ar={class:"analytics-stat__value"},sr={class:"analytics-stat"},ir={class:"analytics-stat__value"},lr={class:"analytics-devices"},nr={class:"analytics-device",title:"Desktop"},rr={class:"analytics-device",title:"Mobile"},dr={class:"analytics-device",title:"Tablet"},cr={key:0,class:"analytics-views"},ur={class:"analytics-views__list"},pr=["onClick"],vr=["title"],mr={class:"analytics-view-item__device"},gr=["title"],hr={class:"analytics-view-item__time"},fr={class:"analytics-view-item__duration"},_r=["onClick"],yr={class:"analytics-view-item__scroll"},wr={key:0,class:"analytics-view-item__play",title:"Assistir gravaÃ§Ã£o"},br={key:1,class:"analytics-dates"},kr={class:"analytics-date"},xr={key:0,class:"analytics-date"},Cr={key:2,class:"detail-empty"},Er={class:"detail-section detail-section--meta"},Ar={class:"detail-grid detail-grid--small"},Nr={class:"detail-item"},Tr={class:"detail-value detail-value--mono"},Mr={class:"detail-item"},Pr={class:"detail-value"},Dr={class:"detail-item"},Sr={class:"detail-value"},Or={class:"detail-item"},Ir={class:"detail-value"},Fr={class:"modal__footer modal__footer--proposals"},Lr={class:"modal__footer-right"},$r=["disabled"],Vr={key:0},Rr={key:1},Br=["disabled"],Ur={key:0},jr={key:1},zr=["disabled"],qr={key:0},Hr={key:1},Gr={key:0,class:"html-link-box"},Wr=["href"],Kr={class:"modal"},Jr={class:"modal__body"},Zr={class:"form-group"},Qr={class:"form-row"},Xr={class:"form-group"},Yr={class:"form-group"},ed={class:"form-row"},td={class:"form-group"},od={class:"form-group"},ad={class:"form-group"},sd={class:"form-row"},id={class:"form-group"},ld={class:"form-group"},nd={class:"form-group"},rd={class:"modal__footer"},dd=["disabled"],cd={class:"modal modal--large"},ud={class:"modal__header"},pd={class:"modal__body modal__body--scroll"},vd={class:"specialist-modal"},md={class:"specialist-modal__header"},gd={class:"specialist-modal__list"},hd={class:"specialist-option__count"},fd=["onClick"],_d={class:"specialist-option__avatar"},yd={class:"specialist-option__name"},wd={class:"specialist-option__count"},bd={class:"modal"},kd={class:"modal__body"},xd={class:"form-group"},Cd=["value"],Ed={class:"form-group"},Ad={class:"form-group"},Nd={class:"form-group"},Td={class:"modal__footer"},Md=["disabled"],Pd={class:"modal"},Dd={class:"modal__body"},Sd={class:"form-row"},Od={class:"form-group"},Id={class:"form-group"},Fd={class:"form-row"},Ld={class:"form-group"},$d={key:0,class:"form-group"},Vd=["value"],Rd={class:"form-group"},Bd={class:"form-group"},Ud={class:"modal__footer"},jd=["disabled"],zd={class:"modal modal--replay"},qd={class:"modal__header"},Hd={key:0,class:"replay-info"},Gd={class:"replay-device"},Wd={class:"replay-duration"},Kd={class:"modal__body modal__body--replay"},Jd={key:0,class:"replay-loading"},Zd={key:2,class:"replay-empty"},Qd={class:"modal__footer modal__footer--replay"},Xd={class:"replay-footer-controls"},Yd=["title"],ec=["value"],tc={class:"replay-footer-time"},oc={class:"replay-footer-speeds"},ac=["onClick"],sc={class:"modal modal--page-times"},ic={class:"modal__header"},lc={class:"modal__body"},nc={key:0,class:"page-times-info"},rc={class:"page-times-info__device"},dc={class:"page-times-info__date"},cc={class:"page-times-info__total"},uc={key:1,class:"page-times-chart"},pc={class:"page-time-bar__label"},vc={class:"page-time-bar__track"},mc={class:"page-time-bar__value"},gc={key:2,class:"page-times-empty"},hc={key:3,class:"page-times-pages"},fc={class:"page-times-pages__list"},_c={class:"modal__footer"},yc={key:4,class:"proposal-notifications"},wc={key:0,class:"proposal-notifications__live"},bc={class:"proposal-notifications__header"},kc={class:"proposal-notifications__count"},xc={class:"proposal-notifications__list"},Cc=["onClick"],Ec={class:"proposal-notification__avatar"},Ac={class:"proposal-notification__content"},Nc={class:"proposal-notification__name"},Tc={class:"proposal-notification__meta"},Mc={class:"proposal-notification__time-live"},Pc={class:"proposal-notification__device"},Dc={class:"proposal-notification__scroll"},Sc={key:1,class:"proposal-notifications__history"},Oc={class:"proposal-notifications__list proposal-notifications__list--compact"},Ic=["onClick"],Fc={class:"proposal-notification__type"},Lc={class:"proposal-notification__content"},$c={class:"proposal-notification__name"},Vc={class:"proposal-notification__meta"},Rc=["onClick"],Bc={key:5,class:"loading-overlay"},Uc=30*1e3,jc=1800,go="comercial_deals_cache",zc=300*1e3,qc=ho({__name:"Comercial",setup($t){const le=Qa(),g=Xa(),K=u(!0),N=u([]),J=u(!1),G=u(!1),ne=u(!1),d=u(null),Ae=u(null),ge=u(null),nt=u(null),rt=u(null),j=u(""),Z=u(""),he=u(""),be=u("recent"),ee=u(!1),te=u(-1),fe=u(!1),O=u(""),E=u(!1),f=u(!1),w=u(!1),b=u([]),k=u(null),ke=u(null),A=u(null),C=u(""),dt=u(!1),yo=u(["Renata Garcia Penna","JoÃ£o Farah","Isabela de Moraes","Gabriel Accardo","amanda vantini","Rodrigo","Maria Clara"]),wo={gabriel:"Gabriel Accardo",isabela:"Isabela de Moraes",amanda:"Amanda Vantini",joao:"JoÃ£o Farah",renata:"Renata Garcia Penna",rodrigo:"Rodrigo",maria:"Maria Clara",mariaclara:"Maria Clara"},Ue={179:"SÃ£o Paulo (Capital)",180:"Rio de Janeiro (Capital)",181:"Curitiba",182:"Interior ou Litoral Paulista",183:"Interior ou Litoral Carioca",184:"Santa Catarina",185:"Litoral Paranaense",186:"Outro",SP_CAPITAL:"SÃ£o Paulo (Capital)",RJ_CAPITAL:"Rio de Janeiro (Capital)",CURITIBA:"Curitiba",SP_INTERIOR:"Interior ou Litoral Paulista",SP_LITORAL:"Interior ou Litoral Paulista",RJ_INTERIOR:"Interior ou Litoral Carioca",RJ_LITORAL:"Interior ou Litoral Carioca",SANTA_CATARINA:"Santa Catarina",SC:"Santa Catarina",PR_LITORAL:"Litoral Paranaense",OUTRO:"Outro",OUTROS:"Outro"},ct=a=>{if(!a)return"";if(Ue[a])return Ue[a];const e=a.toUpperCase();return Ue[e]?Ue[e]:a},bo=()=>{const a=le.user?.email?.toLowerCase()||"";if(!a)return;const e=a.split("@")[0]||"";for(const[o,s]of Object.entries(wo))if(e.includes(o)){O.value=s,console.log(`[Comercial] PrÃ©-selecionado vendedor: ${s} (email: ${a})`);return}},je=new Map,Ne=a=>{const e=je.get(a);return e&&Date.now()-e.timestamp<Uc?(console.log(`[FE Cache] HIT: ${a}`),e.data):null},Te=(a,e)=>{je.set(a,{data:e,timestamp:Date.now()}),console.log(`[FE Cache] SET: ${a}`)},ze=a=>{const e=Array.from(je.keys()).filter(o=>o.includes(a));e.forEach(o=>je.delete(o)),console.log(`[FE Cache] INVALIDATED: ${e.length} keys for ${a}`)},T=u(null),qe=u(!1),Vt=u(!1),He=u(!1),Ge=u(!1),xe=u(null),I=u(null),Me=u(!1),We=u([]),Rt=u(!1),ut=u(!1),re=u(null),Pe=u([]),pt=u(!1),De=u(!1),V=u(null),de=u(!1),vt=u(0),mt=u("00:00"),Bt=u("00:00"),gt=u(1),Se=u(!1);let W=null,ht=null,Oe=0;const Q=u([]),Ie=u(!1),ft=u(!1),F=u({nome:"",tipo:"PROJETO_ARQUITETONICO",descricao:"",fileData:"",mimeType:"",fileSize:0}),Ut=[{value:"PROPOSTA",label:"Proposta"},{value:"PROJETO_ARQUITETONICO",label:"Projeto ArquitetÃ´nico"},{value:"PLANTA",label:"Planta"},{value:"DOCUMENTO",label:"Documento"},{value:"IMAGEM",label:"Imagem"},{value:"OUTRO",label:"Outro"}],X=u([]),Fe=u(!1),_t=u(!1),D=u({dataEnvio:new Date().toISOString().split("T")[0],valor:0,descricao:"",metragem:0,observacoes:"",propostaId:""}),ce=u(new Map),L=u([]),yt=u([]),Ke=u(null),Je=u(null),Ze=u(null),Qe=u(null),h=u({cliente:"",personPhone:"",personEmail:"",endereco:"",cidade:"",m2Total:"",tipoCliente:"FINAL",origem:"CRM_MANUAL",detalhes:""}),wt={indigo:"#6366f1",blue:"#3b82f6",sky:"#0ea5e9",cyan:"#06b6d4",teal:"#14b8a6",emerald:"#10b981",green:"#22c55e",lime:"#84cc16",yellow:"#eab308",amber:"#f59e0b",orange:"#f97316","orange-light":"#fb923c",peach:"#fdba74",sand:"#fcd34d",gold:"#c9a962",success:"#22c55e",danger:"#ef4444"},Xe=[{id:"Form OrÃ§amento",name:"Form OrÃ§amento",emoji:"ðŸ“‹",color:"indigo",groupName:"Entrada",probability:5,sortOrder:0},{id:"1Âº Contato",name:"1Âº Contato",emoji:"ðŸ“ž",color:"blue",groupName:"Contato",probability:10,sortOrder:1},{id:"1Âº Contato Feito",name:"1Âº Contato Feito",emoji:"âœ…",color:"blue",groupName:"Contato",probability:15,sortOrder:2},{id:"Follow 1Âº Contato",name:"Follow 1Âº Contato",emoji:"ðŸ”„",color:"sky",groupName:"Contato",probability:18,sortOrder:3},{id:"Follow 1Âº Contato Feito",name:"Follow 1Âº Contato Feito",emoji:"âœ…",color:"sky",groupName:"Contato",probability:20,sortOrder:4},{id:"Form Arquiteto",name:"Form Arquiteto",emoji:"ðŸ“",color:"cyan",groupName:"Arquiteto",probability:22,sortOrder:5},{id:"Contato Arquiteto",name:"Contato Arquiteto",emoji:"ðŸ‘·",color:"cyan",groupName:"Arquiteto",probability:25,sortOrder:6},{id:"Proposta Escopo Minimo",name:"Proposta Escopo MÃ­nimo",emoji:"ðŸ“",color:"teal",groupName:"Levantamento",probability:28,sortOrder:7},{id:"CÃ¡lculo de Projeto",name:"CÃ¡lculo de Projeto",emoji:"ðŸ”¢",color:"teal",groupName:"Levantamento",probability:30,sortOrder:8},{id:"Projeto levantado",name:"Projeto Levantado",emoji:"ðŸ“Š",color:"emerald",groupName:"Levantamento",probability:35,sortOrder:9},{id:"CÃ¡lculo Deslocamento",name:"CÃ¡lculo Deslocamento",emoji:"ðŸš—",color:"emerald",groupName:"Levantamento",probability:38,sortOrder:10},{id:"Deslocamento Levantado",name:"Deslocamento Levantado",emoji:"âœ…",color:"green",groupName:"Levantamento",probability:40,sortOrder:11},{id:"Proposta enviada",name:"Proposta Enviada",emoji:"ðŸ“¤",color:"yellow",groupName:"Proposta",probability:45,sortOrder:12},{id:"Fazer Follow 1",name:"Fazer Follow 1",emoji:"1ï¸âƒ£",color:"amber",groupName:"Follow-up",probability:50,sortOrder:13},{id:"Follow 1 Feito",name:"Follow 1 Feito",emoji:"âœ…",color:"amber",groupName:"Follow-up",probability:55,sortOrder:14},{id:"Fazer Follow 2",name:"Fazer Follow 2",emoji:"2ï¸âƒ£",color:"orange",groupName:"Follow-up",probability:60,sortOrder:15},{id:"Follow 2 Feito",name:"Follow 2 Feito",emoji:"âœ…",color:"orange",groupName:"Follow-up",probability:65,sortOrder:16},{id:"Fazer Follow 3",name:"Fazer Follow 3",emoji:"3ï¸âƒ£",color:"peach",groupName:"Follow-up",probability:70,sortOrder:17},{id:"Follow 3 Feito",name:"Follow 3 Feito",emoji:"âœ…",color:"peach",groupName:"Follow-up",probability:75,sortOrder:18},{id:"NegociaÃ§Ãµes",name:"NegociaÃ§Ãµes",emoji:"ðŸ¤",color:"gold",groupName:"NegociaÃ§Ã£o",probability:80,sortOrder:19},{id:"Ganho",name:"Ganho",emoji:"ðŸ†",color:"success",groupName:"Fechamento",probability:100,sortOrder:20},{id:"Perdido",name:"Perdido",emoji:"âŒ",color:"danger",groupName:"Fechamento",probability:0,sortOrder:21}],U=u([...Xe]),ko=z(()=>N.value.length),jt=z(()=>N.value.reduce((a,e)=>a+(e.value||0),0)),xo=z(()=>{const a=_e("Ganho").length,e=_e("Perdido").length,o=a+e;return o>0?Math.round(a/o*100):0}),Co=z(()=>{const a=N.value.filter(o=>(o.daysInStage??0)>0);if(a.length===0)return 0;const e=a.reduce((o,s)=>o+(s.daysInStage||0),0);return Math.round(e/a.length)}),Eo=z(()=>{const a=N.value.filter(e=>(e.value??0)>0);return a.length===0?0:Math.round(jt.value/a.length)}),Ao=["x","admin","admin final","admin test","administrador","rodrigo"],zt=z(()=>{const a=new Set;return N.value.forEach(e=>{e.consultor&&a.add(e.consultor)}),Array.from(a).filter(e=>!Ao.includes(e.toLowerCase())).sort()}),No=z(()=>O.value?(O.value.split(" ")[0]??"").toUpperCase():""),To=z(()=>{let a=[...N.value];if(j.value){const e=j.value.toLowerCase();a=a.filter(o=>o.clientName?.toLowerCase().includes(e)||o.endereco?.toLowerCase().includes(e)||o.personEmail?.toLowerCase().includes(e)||o.phone?.includes(e))}if(he.value){const e=parseInt(he.value),o=new Date;o.setDate(o.getDate()-e),a=a.filter(s=>s.dealAddTime?new Date(s.dealAddTime)>=o:!0)}switch(Z.value&&(a=a.filter(e=>e.consultor===Z.value)),O.value&&(a=a.filter(e=>e.consultor===O.value)),be.value){case"recent":a.sort((e,o)=>{const s=new Date(e.dealAddTime||0).getTime();return new Date(o.dealAddTime||0).getTime()-s});break;case"oldest":a.sort((e,o)=>{const s=new Date(e.dealAddTime||0).getTime(),n=new Date(o.dealAddTime||0).getTime();return s-n});break;case"value-high":a.sort((e,o)=>(o.value||0)-(e.value||0));break;case"value-low":a.sort((e,o)=>(e.value||0)-(o.value||0));break;case"name-az":a.sort((e,o)=>(e.clientName||"").localeCompare(o.clientName||""));break;case"name-za":a.sort((e,o)=>(o.clientName||"").localeCompare(e.clientName||""));break;case"days-high":a.sort((e,o)=>(o.daysInStage||0)-(e.daysInStage||0));break;case"days-low":a.sort((e,o)=>(e.daysInStage||0)-(o.daysInStage||0));break}return a}),Mo=z(()=>U.value.map((a,e)=>({id:a.id,name:a.name,color:wt[a.color]||a.color,groupName:a.groupName,probability:a.probability??50,sortOrder:a.sortOrder??e,isDefault:Xe.some(o=>o.id===a.id)}))),Y=z(()=>{const a=Array.from(ce.value.values());if(!O.value)return a;const e=O.value.toLowerCase();return a.filter(o=>o.ownerUserName?.toLowerCase()===e)}),Le=z(()=>{if(!O.value)return yt.value;const a=O.value.toLowerCase();return yt.value.filter(e=>e.ownerUserName?.toLowerCase()===a)}),bt=z(()=>{if(!O.value)return L.value;const a=O.value.toLowerCase();return L.value.filter(e=>e.ownerUserName?.toLowerCase()===a)}),Ye=z(()=>Y.value.length+Le.value.length),Po=()=>{E.value=!E.value},qt=a=>{if(!a||a<0)return"0:00";const e=Math.floor(a/60),o=Math.floor(a%60);return`${e}:${o.toString().padStart(2,"0")}`},Do=a=>{const o=Date.now()-a,s=Math.floor(o/6e4),n=Math.floor(o/36e5);return s<1?"agora":s<60?`${s}min`:n<24?`${n}h`:`${Math.floor(n/24)}d`},kt=a=>{b.value=b.value.filter(e=>e.id!==a)},So=a=>{const e=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;b.value.find(s=>s.leadId===a.leadId)||(b.value.unshift({id:e,clientName:a.clientName,ownerUserName:a.ownerUserName,leadId:a.leadId,deviceType:a.deviceType,sessionId:a.sessionId||e,timestamp:new Date}),b.value.length>3&&(b.value=b.value.slice(0,3)),setTimeout(()=>{kt(e)},8e3),w.value=!0)},Ht=a=>{if(!E.value)return;const e=a.target,o=ke.value,s=k.value;o&&!o.contains(e)&&s&&!s.contains(e)&&(E.value=!1)},$e=z(()=>{if(!j.value||j.value.length<2)return[];const a=j.value.toLowerCase();return N.value.filter(e=>e.clientName?.toLowerCase().includes(a)||e.personEmail?.toLowerCase().includes(a)||e.phone?.includes(a)||e.cidadeExecucao?.toLowerCase().includes(a)).slice(0,8)}),Gt={"Form OrÃ§amento":'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1" ry="1"/><path d="M12 11h4"/><path d="M12 16h4"/><path d="M8 11h.01"/><path d="M8 16h.01"/></svg>',FORM_ORCAMENTO:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1" ry="1"/><path d="M12 11h4"/><path d="M12 16h4"/><path d="M8 11h.01"/><path d="M8 16h.01"/></svg>',"1Âº Contato":'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>',PRIMEIRO_CONTATO:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>',CONTATO_ARQUITETO:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M2 18v3h20v-3"/><path d="M6 14v4"/><path d="M18 14v4"/><path d="M12 14v4"/><path d="M4 10h16"/><path d="M4 10 12 3l8 7"/></svg>',AGUARDANDO_ARQ:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M5 22h14"/><path d="M5 2h14"/><path d="M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22"/><path d="M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2"/></svg>',LEVANTAMENTO:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v18h18"/><path d="M8 17V9"/><path d="M12 17V5"/><path d="M16 17v-4"/><path d="M20 17v-8"/></svg>',VISITA_AGENDADA:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/><path d="M9 16l2 2 4-4"/></svg>',VISITA_REALIZADA:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>',PROPOSTA_EM_ELABORACAO:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>',PROPOSTA_ENVIADA:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>',FOLLOW_1:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>',FOLLOW_2:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>',FOLLOW_3:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>',FOLLOW_4:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>',FOLLOW_5:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>',NEGOCIACAO:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>',Ganho:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>',Perdido:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>'},Wt=a=>Gt[a]||Gt["Form OrÃ§amento"],Oo=a=>U.value.find(o=>o.id===a)?.name||a,Io=a=>U.value.find(o=>o.id===a)?.color||"gray",Fo=()=>{setTimeout(()=>{ee.value=!1,te.value=-1},200)},Lo=()=>{const a=$e.value[te.value];te.value>=0&&a&&Jt(a)},Kt=a=>{if(!ee.value||$e.value.length===0)return;const e=te.value+a;e>=-1&&e<$e.value.length&&(te.value=e)},Jt=a=>{ee.value=!1,te.value=-1,Tt(a)},$o=()=>{j.value="",ee.value=!1,te.value=-1},_e=a=>To.value.filter(e=>e.status===a),Vo=a=>_e(a).reduce((e,o)=>e+(o.value||0),0),Ce=a=>a>=1e6?`R$ ${(a/1e6).toFixed(1)}M`:a>=1e3?`R$ ${(a/1e3).toFixed(0)}K`:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0}).format(a),Ro=a=>a?a.split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase():"??",Bo={"gabriel accardo":"#e63946","isabela de moraes":"#2563eb","amanda vantini":"#16a34a","joÃ£o farah":"#f59e0b","joao farah":"#f59e0b","renata garcia penna":"#7c3aed",rodrigo:"#06b6d4","maria clara":"#ec4899"},Zt=["#e63946","#2563eb","#16a34a","#f59e0b","#7c3aed","#06b6d4","#ec4899","#84cc16","#f97316","#0d9488"],xt=new Map,Uo=a=>{if(!a||a==="N/A")return"#6b7280";const e=a.toLowerCase().trim(),o=xt.get(e);if(o)return o;const s=Bo[e];if(s)return xt.set(e,s),s;let n=0;for(let v=0;v<e.length;v++)n=(n<<5)-n+e.charCodeAt(v),n=n&n;const p=Math.abs(n)%Zt.length,c=Zt[p]??"#6b7280";return xt.set(e,c),c},jo=a=>{if(!a||a==="N/A")return"";const e=a.split(" ")[0]||"";return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},Qt=a=>a?a>14?"deal-card__days--danger":a>7?"deal-card__days--warning":"":"",zo=a=>{const e=U.value.find(o=>o.id===a);return e&&(wt[e.color]||e.color)||"#6366f1"},et=a=>a?U.value.filter(o=>o.id!=="Ganho"&&o.id!=="Perdido").findIndex(o=>o.id===a):-1,qo=a=>d.value?.status===a&&d.value?.daysInStage||0,Ct=async a=>{if(!d.value||d.value.status===a)return;const e=d.value,o=e.status,s=e.id;e.status=a,e.daysInStage=0;const n=N.value.findIndex(p=>p.id===s);if(n>=0){const p=N.value[n];p&&(p.status=a,p.daysInStage=0)}try{if(!(await fetch(`/api/admin/comercial/${s}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:a})})).ok)throw new Error("Falha ao atualizar estÃ¡gio");g.success(`Movido para ${U.value.find(c=>c.id===a)?.name||a}`)}catch(p){if(e.status=o,n>=0){const c=N.value[n];c&&(c.status=o)}g.error("Erro ao atualizar estÃ¡gio"),console.error("Error updating stage:",p)}},Et=a=>{if(!a)return"N/A";const e=new Date(a);return isNaN(e.getTime())?"N/A":e.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},tt=a=>{if(!a)return"N/A";const e=new Date(a);if(isNaN(e.getTime()))return"N/A";const s=new Date().getTime()-e.getTime(),n=Math.floor(s/6e4),p=Math.floor(s/36e5),c=Math.floor(s/864e5);return n<60?n<=1?"agora":`hÃ¡ ${n}min`:p<24?`hÃ¡ ${p}h`:c<7?`hÃ¡ ${c}d`:e.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})},Xt=a=>!!(a.gpsRoad||a.gpsNeighbourhood||a.gpsCity||a.gpsState||a.city||a.region||a.country),Yt=["ðŸ¦Š","ðŸ±","ðŸ¶","ðŸ¦","ðŸ¯","ðŸ»","ðŸ¼","ðŸ¨","ðŸµ","ðŸ¦„","ðŸ¸","ðŸ™","ðŸ¦‹","ðŸ¦…","ðŸ¦‰","ðŸ¬","ðŸ¦ˆ","ðŸ¢","ðŸ¦©","ðŸ¦œ","ðŸŒ¸","ðŸŒº","ðŸŒ»","ðŸŒ¹","ðŸŒ·","ðŸ€","ðŸ","ðŸŒ¿","ðŸŒµ","ðŸŒ´","â­","ðŸŒ™","â˜€ï¸","âš¡","ðŸ”¥","ðŸ’§","â„ï¸","ðŸŒˆ","ðŸ’Ž","ðŸŽ¯","ðŸŽ¨","ðŸŽ­","ðŸŽª","ðŸŽ¡","ðŸš€","âœˆï¸","ðŸŽ¸","ðŸŽ¹","ðŸŽº","ðŸŽ»"],eo=new Map,At=a=>{if(!a)return"ðŸ‘¤";const e=eo.get(a);if(e)return e;let o=0;for(let p=0;p<a.length;p++){const c=a.charCodeAt(p);o=(o<<5)-o+c,o=o&o}const s=Math.abs(o)%Yt.length,n=Yt[s]??"ðŸ‘¤";return eo.set(a,n),n},Ho=a=>{const e=[];return a.gpsRoad&&e.push(a.gpsRoad),a.gpsNeighbourhood&&e.push(a.gpsNeighbourhood),a.gpsCity&&e.push(a.gpsCity),a.gpsState&&e.push(a.gpsState),e.length>0?e.join(", "):a.city&&a.region?`${a.city}, ${a.region}`:a.city?a.city:a.region?a.region:a.country?a.country:"LocalizaÃ§Ã£o nÃ£o disponÃ­vel"},Go=(a,e)=>{Ae.value=e,a.dataTransfer.effectAllowed="move",a.dataTransfer.setData("text/plain",e.id),setTimeout(()=>{a.target.classList.add("deal-card--dragging")},0)},Wo=()=>{Ae.value=null,ge.value=null},Ko=(a,e)=>{a.preventDefault(),ge.value=e},Jo=()=>{ge.value=null},Zo=async(a,e)=>{a.preventDefault(),ge.value=null;const o=a.dataTransfer?.getData("text/plain");if(!o)return;const s=N.value.find(p=>p.id===o);if(!s||s.status===e)return;const n=s.status;s.status=e,s.daysInStage=0;try{if(!(await fetch(`/api/admin/comercial/${o}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e})})).ok)throw new Error("Falha ao mover deal");const c=U.value.find(v=>v.id===e)?.name;g.success(`Deal movido para ${c}`)}catch{s.status=n,g.error("Erro ao mover deal")}},Qo=()=>{J.value=!J.value},Xo=()=>{j.value="",Z.value="",he.value="",be.value="recent"},to=a=>{O.value=a,fe.value=!1},Yo=a=>N.value.filter(e=>e.consultor===a).length,oo=a=>{h.value={cliente:"",personPhone:"",personEmail:"",endereco:"",cidade:"",m2Total:"",tipoCliente:"FINAL",origem:"CRM_MANUAL",detalhes:""},G.value=!0},ot=()=>{G.value=!1},Nt=u(null),ea=async()=>{if(!h.value.cliente||!h.value.personPhone)return;const a=le.user?.name||le.user?.email||"";try{const e=await B.create({cliente:h.value.cliente,personPhone:h.value.personPhone,personEmail:h.value.personEmail||void 0,endereco:h.value.endereco||void 0,cidade:h.value.cidade||void 0,m2Total:h.value.m2Total?parseFloat(h.value.m2Total):void 0,tipoCliente:h.value.tipoCliente,origem:h.value.origem,detalhes:h.value.detalhes||void 0,consultor:a});if(e.data?.success&&e.data?.data){const o=e.data.data,s=o.comercialData?.id||o.id,n={id:s,personName:o.cliente||h.value.cliente,clientName:o.cliente||h.value.cliente,consultor:a,ownerUserName:a,status:"Form OrÃ§amento",stageName:"Form OrÃ§amento",dealValue:void 0,m2Total:h.value.m2Total?parseFloat(h.value.m2Total):void 0,addTime:new Date().toISOString(),dealAddTime:new Date().toISOString(),stageId:"Form OrÃ§amento",stageChangedTime:new Date().toISOString(),pipedriveId:void 0,personPhone:h.value.personPhone,phone:h.value.personPhone,personEmail:h.value.personEmail||void 0,cidadeExecucao:h.value.cidade||void 0,endereco:h.value.endereco||void 0,tipoCliente:h.value.tipoCliente,origem:h.value.origem,resumo:h.value.detalhes||void 0,daysInStage:0};ot(),Nt.value=s,N.value.unshift(n),g.success(`Lead "${h.value.cliente}" criado com sucesso!`),setTimeout(()=>{Nt.value=null},3e3)}else throw new Error(e.data?.error||"Falha ao criar lead")}catch(e){console.error("Erro ao criar lead:",e),g.error(e.message||"Erro ao criar lead")}},Tt=async a=>{d.value=a,T.value=null,I.value=null,Q.value=[],X.value=[],await ao(a.id)},ao=async(a,e=!1)=>{const o=`details:${a}`,s=Date.now();if(!e){const n=Ne(o);if(n){console.log(`[FE] Cache HIT details (${Date.now()-s}ms)`),T.value=n.proposta,I.value=n.analytics,Q.value=n.anexos||[],X.value=n.orcamentos||[],n.proposta?.id&&Dt(n.proposta.id);return}}qe.value=!0,Me.value=!0,Ie.value=!0,Fe.value=!0;try{const n=await B.getLeadDetails(a);n.data.success&&(T.value=n.data.proposta,I.value=n.data.analytics,Q.value=n.data.anexos||[],X.value=n.data.orcamentos||[],Te(o,n.data),console.log(`[FE] Loaded all details in ${n.data.loadTime}ms (total: ${Date.now()-s}ms)`),n.data.proposta?.id&&Dt(n.data.proposta.id))}catch(n){console.error("Erro ao buscar detalhes do lead:",n),await Promise.all([Pt(a),ca(a),_a(a)]);const p=T.value;p?.id&&(ta(p.id),Dt(p.id))}finally{qe.value=!1,Me.value=!1,Ie.value=!1,Fe.value=!1}},Mt=()=>{d.value=null,T.value=null,I.value=null,We.value=[],Q.value=[],X.value=[]},Pt=async(a,e=!1)=>{const o=`proposta:${a}`;if(!e){const s=Ne(o);if(s){T.value=s;return}}qe.value=!0;try{const s=await B.getUltimaProposta(a);s.data?.proposta&&(T.value=s.data.proposta,Te(o,s.data.proposta))}catch(s){s.response?.status!==404&&console.error("Erro ao buscar proposta:",s)}finally{qe.value=!1}},ta=async(a,e=!1)=>{const o=`analytics:${a}`;if(!e){const s=Ne(o);if(s){I.value=s;return}}Me.value=!0;try{const s=await B.getPropostaAnalytics(a);s.data?.stats&&(I.value=s.data,Te(o,s.data))}catch(s){s.response?.status!==404&&console.error("Erro ao buscar analytics:",s)}finally{Me.value=!1}},Dt=async a=>{Rt.value=!0;try{const e=await B.getRecordings(a);e.data?.recordings&&(We.value=e.data.recordings)}catch(e){e.response?.status!==404&&console.error("Erro ao buscar recordings:",e),We.value=[]}finally{Rt.value=!1}},oa=async a=>{re.value=a,pt.value=!0,ut.value=!0;try{const e=await B.getRecording(a.id);e.data?.events&&(Pe.value=e.data.events)}catch(e){console.error("Erro ao carregar eventos do recording:",e),g.error("Erro ao carregar gravaÃ§Ã£o"),Pe.value=[]}finally{pt.value=!1}},St=()=>{ut.value=!1,re.value=null,Pe.value=[]},aa=a=>{V.value=a,De.value=!0},sa=a=>{if(!V.value?.pageTimes)return 0;const e=Object.values(V.value.pageTimes),o=Math.max(...e,1);return Math.min(100,a/o*100)},Ot=a=>{if(a)return We.value.find(e=>e.sessionId===a)},ia=a=>{const e=Ot(a);e&&oa(e)},so=a=>{const e=Math.floor(Math.max(0,a)/60).toString().padStart(2,"0"),o=Math.floor(Math.max(0,a)%60).toString().padStart(2,"0");return`${e}:${o}`},It=()=>{if(!W)return;const a=Math.max(0,W.getCurrentTime()),e=a/1e3;mt.value=so(e),Oe>0&&(vt.value=a/Oe*100),de.value&&(ht=requestAnimationFrame(It))},la=()=>{W&&(de.value?(W.pause(),ht&&cancelAnimationFrame(ht),de.value=!1):(W.play(),de.value=!0,It()))},na=a=>{if(!W)return;const o=parseInt(a.target.value)/100*Oe;W.pause(),W.play(o),de.value=!0,It()},ra=a=>{W&&(gt.value=a,W.setConfig({speed:a}))},da=()=>{W&&(Se.value=!Se.value,W.setConfig({skipInactive:Se.value}))};fo(Pe,async a=>{if(a.length>0){if(await os(),de.value=!1,vt.value=0,mt.value="00:00",gt.value=1,Se.value=!1,!a.some(n=>n.type===2)){console.warn("[Replay] GravaÃ§Ã£o sem FullSnapshot - nÃ£o Ã© possÃ­vel reproduzir"),g.error("Esta gravaÃ§Ã£o estÃ¡ incompleta (sem snapshot inicial)");return}const o=document.getElementById("rrweb-player");o&&(o.innerHTML="");const s=document.createElement("script");s.src="https://cdn.jsdelivr.net/npm/rrweb@1.1.3/dist/rrweb.min.js",s.onload=()=>{if(!document.getElementById("rrweb-css")){const n=document.createElement("link");n.id="rrweb-css",n.rel="stylesheet",n.href="https://cdn.jsdelivr.net/npm/rrweb@1.1.3/dist/rrweb.min.css",document.head.appendChild(n)}setTimeout(()=>{const n=window.rrweb;if(o&&n?.Replayer)try{const p=a.find(R=>R.type===4);console.log("[Replay] Meta event:",p),p?.data&&console.log("[Replay] Recorded viewport:",p.data.width,"x",p.data.height),W=new n.Replayer(a,{root:o,skipInactive:!1,showWarning:!1,showDebug:!1,blockClass:"rr-block",speed:1}),setTimeout(()=>{const R=o.querySelector(".replayer-wrapper"),ue=o.querySelector("iframe");console.log("[Replay] Wrapper element:",R),console.log("[Replay] Wrapper dimensions:",R?.offsetWidth,"x",R?.offsetHeight),console.log("[Replay] Iframe element:",ue),console.log("[Replay] Iframe dimensions:",ue?.offsetWidth,"x",ue?.offsetHeight),ue&&(console.log("[Replay] Iframe style.width:",ue.style.width),console.log("[Replay] Iframe style.height:",ue.style.height))},500);const c=a[0],v=a[a.length-1];Oe=Math.max(0,v.timestamp-c.timestamp),Bt.value=so(Oe/1e3)}catch(p){console.error("[Replay] Error initializing player:",p),g.error("Erro ao inicializar o player")}},200)},s.onerror=()=>{g.error("Erro ao carregar biblioteca de replay")},document.head.appendChild(s)}});const ca=async(a,e=!1)=>{const o=`anexos:${a}`;if(!e){const s=Ne(o);if(s){Q.value=s;return}}Ie.value=!0;try{const s=await B.getAnexos(a);s.data.success&&(Q.value=s.data.anexos,Te(o,s.data.anexos))}catch(s){console.error("Erro ao buscar anexos:",s)}finally{Ie.value=!1}},ua=()=>{F.value={nome:"",tipo:"PROJETO_ARQUITETONICO",descricao:"",fileData:"",mimeType:"",fileSize:0},ft.value=!0},at=()=>{ft.value=!1},pa=a=>{const o=a.target.files?.[0];if(!o)return;if(o.size>10*1024*1024){g.error("Arquivo muito grande. MÃ¡ximo 10MB");return}const s=new FileReader;s.onload=n=>{const c=n.target?.result?.split(",")[1]||"";F.value.fileData=c,F.value.mimeType=o.type,F.value.fileSize=o.size,F.value.nome=F.value.nome||o.name},s.readAsDataURL(o)},va=async()=>{if(!d.value||!F.value.nome){g.warning("Nome Ã© obrigatÃ³rio");return}try{const a=await B.createAnexo(d.value.id,{nome:F.value.nome,tipo:F.value.tipo,descricao:F.value.descricao||void 0,fileData:F.value.fileData||void 0,mimeType:F.value.mimeType||void 0,fileSize:F.value.fileSize||void 0});a.data.success&&(g.success("Anexo adicionado!"),Q.value.unshift(a.data.anexo),ze(d.value.id),at())}catch(a){console.error("Erro ao criar anexo:",a),g.error("Erro ao adicionar anexo")}},ma=async a=>{if(d.value)try{const e=await B.downloadAnexo(d.value.id,a.id);if(e.data.success&&e.data.anexo.fileData){const o=atob(e.data.anexo.fileData),s=new Array(o.length);for(let R=0;R<o.length;R++)s[R]=o.charCodeAt(R);const n=new Uint8Array(s),p=new Blob([n],{type:a.mimeType||"application/octet-stream"}),c=window.URL.createObjectURL(p),v=document.createElement("a");v.href=c,v.download=a.nome,v.click(),window.URL.revokeObjectURL(c)}else g.warning("Anexo sem arquivo para download")}catch(e){console.error("Erro ao baixar anexo:",e),g.error("Erro ao baixar anexo")}},ga=async a=>{if(d.value&&confirm(`Excluir anexo "${a.nome}"?`))try{(await B.deleteAnexo(d.value.id,a.id)).data.success&&(g.success("Anexo excluÃ­do!"),Q.value=Q.value.filter(o=>o.id!==a.id),ze(d.value.id))}catch(e){console.error("Erro ao excluir anexo:",e),g.error("Erro ao excluir anexo")}},ha=a=>a?a<1024?`${a} B`:a<1024*1024?`${(a/1024).toFixed(1)} KB`:`${(a/(1024*1024)).toFixed(1)} MB`:"",fa=a=>Ut.find(e=>e.value===a)?.label||a,_a=async(a,e=!1)=>{const o=`orcamentos:${a}`;if(!e){const s=Ne(o);if(s){X.value=s;return}}Fe.value=!0;try{const s=await B.getOrcamentosEnviados(a);s.data.success&&(X.value=s.data.orcamentos,Te(o,s.data.orcamentos))}catch(s){console.error("Erro ao buscar orÃ§amentos:",s)}finally{Fe.value=!1}},ya=()=>{D.value={dataEnvio:new Date().toISOString().split("T")[0],valor:T.value?.valorTotal?Number(T.value.valorTotal):0,descricao:"",metragem:d.value?.metragemEstimada||d.value?.m2Total||0,observacoes:"",propostaId:T.value?.id||""},_t.value=!0},st=()=>{_t.value=!1},wa=async()=>{if(!d.value||!D.value.dataEnvio){g.warning("Data de envio Ã© obrigatÃ³ria");return}try{const a=await B.createOrcamentoEnviado(d.value.id,{dataEnvio:D.value.dataEnvio,valor:D.value.valor||void 0,descricao:D.value.descricao||void 0,metragem:D.value.metragem||void 0,observacoes:D.value.observacoes||void 0,propostaId:D.value.propostaId||void 0});a.data.success&&(g.success("OrÃ§amento registrado!"),X.value.unshift(a.data.orcamento),ze(d.value.id),st())}catch(a){console.error("Erro ao criar orÃ§amento:",a),g.error("Erro ao registrar orÃ§amento")}},ba=async a=>{if(d.value&&confirm("Excluir registro de orÃ§amento enviado?"))try{(await B.deleteOrcamentoEnviado(d.value.id,a.id)).data.success&&(g.success("Registro excluÃ­do!"),X.value=X.value.filter(o=>o.id!==a.id),ze(d.value.id))}catch(e){console.error("Erro ao excluir orÃ§amento:",e),g.error("Erro ao excluir registro")}},ka=a=>new Date(a).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}),xa=async()=>{if(!d.value)return;const a=d.value,e=new URLSearchParams;a.clientName&&e.set("cliente",a.clientName),a.phone&&e.set("telefone",a.phone),a.personEmail&&e.set("email",a.personEmail),a.endereco&&e.set("endereco",a.endereco),a.cidadeExecucao&&e.set("cidade",a.cidadeExecucao);const o=a.metragemEstimada||a.m2Total||a.metragemEstimadaN1;o&&e.set("metragem",String(o)),a.tipoProjeto&&e.set("tipoProjeto",a.tipoProjeto),a.descritivoArea&&e.set("area",a.descritivoArea),a.estadoObra&&e.set("estadoObra",a.estadoObra),a.nomeEscritorio&&e.set("arquiteto",a.nomeEscritorio),a.resumo&&e.set("detalhes",a.resumo),!a.resumo&&a.descritivoArea&&e.set("detalhes",a.descritivoArea),e.set("dealId",a.id);const s=O.value||Z.value||a.consultor;if(s&&e.set("consultor",s),a.dataPrevistaExec){const p=new Date(a.dataPrevistaExec);if(!isNaN(p.getTime())){const c=p.toISOString().split("T")[0];e.set("dataPrevistaExec",c)}}const n=`/propostas.html?${e.toString()}`;window.open(n,"_blank"),g.info("Gerador de propostas aberto em nova aba")},Ca=()=>{if(!T.value||!T.value.pdfBase64){g.warning("Proposta sem PDF. Gere uma nova proposta primeiro.");return}try{const a=atob(T.value.pdfBase64),e=new Array(a.length);for(let p=0;p<a.length;p++)e[p]=a.charCodeAt(p);const o=new Uint8Array(e),s=new Blob([o],{type:"application/pdf"}),n=window.URL.createObjectURL(s);window.open(n,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(n),1e4),g.success("Proposta aberta em nova aba")}catch(a){console.error("Erro ao abrir proposta:",a),g.error("Erro ao abrir proposta")}},Ea=async()=>{if(!d.value||!T.value)return;const a=d.value,e=T.value;if(!a.phone){g.warning("Lead sem telefone cadastrado");return}if(!e.pdfBase64){g.warning("Proposta sem PDF gerado. Gere uma nova proposta primeiro.");return}He.value=!0;try{const o=a.phone.replace(/\D/g,""),s=a.primeiroNomeZapi||a.clientName?.split(" ")[0]||"Cliente",n=O.value?.split(" ")[0]||Z.value?.split(" ")[0]||a.consultor?.split(" ")[0]||le.user?.name?.split(" ")[0]||"especialista",p=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.valorTotal),c=`OlÃ¡ ${s}! Aqui Ã© o ${n} da Monofloor. Conforme conversamos, segue a proposta no valor de ${p}. Qualquer dÃºvida estou Ã  disposiÃ§Ã£o!`,v=atob(e.pdfBase64),R=new Array(v.length);for(let se=0;se<v.length;se++)R[se]=v.charCodeAt(se);const ue=new Uint8Array(R),ro=new Blob([ue],{type:"application/pdf"}),Ja=new Date().toISOString().split("T")[0],co=`Proposta-Monofloor-${a.clientName?.replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"-")||"Cliente"}-${Ja}.pdf`,uo=new File([ro],co,{type:"application/pdf"});if(navigator.share&&navigator.canShare&&navigator.canShare({files:[uo]}))try{await navigator.share({title:`Proposta Monofloor - ${a.clientName}`,text:c,files:[uo]}),g.success("âœ… Compartilhamento aberto! Selecione WhatsApp para enviar."),await B.enviarPropostaWhatsApp(a.id,e.id,{phoneNumber:o,message:c}),await Pt(a.id);return}catch(se){if(se.name!=="AbortError")console.log("Web Share falhou, usando fallback:",se);else return}const po=window.URL.createObjectURL(ro),Re=document.createElement("a");Re.href=po,Re.download=co,document.body.appendChild(Re),Re.click(),document.body.removeChild(Re),window.URL.revokeObjectURL(po),await new Promise(se=>setTimeout(se,500));const Za=`https://wa.me/55${o}?text=${encodeURIComponent(c)}`;window.open(Za,"_blank"),g.info("ðŸ“¥ PDF baixado! Arraste para a conversa do WhatsApp ou clique em ðŸ“Ž",{duration:6e3}),await B.enviarPropostaWhatsApp(a.id,e.id,{phoneNumber:o,message:c}),await Pt(a.id)}catch(o){console.error("Erro ao enviar proposta:",o),g.error("Erro ao enviar proposta via WhatsApp")}finally{He.value=!1}},Aa=async()=>{if(!d.value||!T.value){g.warning("Selecione um lead e gere uma proposta primeiro");return}Ge.value=!0;try{const a=d.value,e=T.value,o=e.dadosCalculo||{},s={propostaId:e.id,clienteNome:a.personName||a.title||"Cliente",metragemTotalStelion:o.metragemTotalStelion||0,materiaisStelion:o.materiaisStelion||0,maoObraStelion:o.maoObraStelion||0,impostosStelion:o.impostosStelion||0,valorTotalStelion:o.valorTotalStelion||0,metragemTotalLilit:o.metragemTotalLilit||0,materiaisLilit:o.materiaisLilit||0,maoObraLilit:o.maoObraLilit||0,impostosLilit:o.impostosLilit||0,valorTotalLilit:o.valorTotalLilit||0,metragemTotal:o.metragemTotal||Number(e.metragem)||0,materiaisTotal:o.materiaisTotal||0,maoObraTotal:o.maoObraTotal||0,impostosTotal:o.impostosTotal||0,valorTotal:Number(e.valorTotal)||0,precoBaseStelion:o.precoBaseStelion||910,precoBaseLilit:o.precoBaseLilit||590,pisoStelion:o.pisoStelion||0,paredeStelion:o.paredeStelion||0,pisoLilit:o.pisoLilit||0,paredeLilit:o.paredeLilit||0},n=await fetch("/api/proposals/generate-html",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){const c=await n.json();throw new Error(c.message||"Erro ao gerar HTML")}const p=await n.json();xe.value=p.url,g.success("Link HTML gerado com sucesso!")}catch(a){console.error("Erro ao gerar HTML:",a),g.error(a.message||"Erro ao gerar proposta HTML")}finally{Ge.value=!1}},Na=()=>{xe.value&&navigator.clipboard.writeText(xe.value).then(()=>{g.success("Link copiado para a Ã¡rea de transferÃªncia!")})},q=(a,e)=>{A.value=a,C.value=String(e||"")},Ee=()=>{A.value=null,C.value=""},Ft=async a=>{if(!d.value||dt.value)return;const e=d.value.id,o=C.value.trim(),s=String(Ta(d.value,a)||"");if(o===s){Ee();return}dt.value=!0;try{const p={clientName:"personName",phone:"personPhone",personEmail:"personEmail",endereco:"endereco",cidadeExecucao:"cidadeExecucao",metragemEstimada:"metragemEstimada",estadoObra:"estadoObra",budgetEstimado:"budgetEstimado",dataPrevistaExec:"dataPrevistaExec",nomeEscritorio:"nomeEscritorio",detalhesArquiteto:"detalhesArquiteto",resumo:"resumo",descritivoArea:"descritivoArea",consultor:"consultorId",value:"dealValue"}[a]||a,c={};if(a==="value"||a==="metragemEstimada"?c[p]=parseFloat(o)||0:c[p]=o,await B.update(e,c),d.value){d.value[a]=a==="value"?parseFloat(o)||0:o;const v=N.value.findIndex(R=>R.id===e);v!==-1&&(N.value[v][a]=a==="value"?parseFloat(o)||0:o)}g.success("Campo atualizado")}catch(n){console.error("Error saving field:",n),g.error("Erro ao salvar campo")}finally{dt.value=!1,Ee()}},Ta=(a,e)=>a[e],H=a=>{Ft(a)},oe=(a,e)=>{a.key==="Enter"?(a.preventDefault(),Ft(e)):a.key==="Escape"&&Ee()},Lt=a=>{if(a.phone){const e=a.phone.replace(/\D/g,""),o=a.primeiroNomeZapi||a.clientName?.split(" ")[0]||"Cliente";let s="especialista";O.value?s=O.value.split(" ")[0]||"especialista":Z.value?s=Z.value.split(" ")[0]||"especialista":a.consultor&&a.consultor!=="N/A"?s=a.consultor.split(" ")[0]||"especialista":le.user?.name&&(s=le.user.name.split(" ")[0]||"especialista");const n=a.metragemEstimada||a.m2||"sua Ã¡rea",c=["joÃ£o","joao","gabriel"].includes(s.toLowerCase())?"o":"a",v=`OlÃ¡ ${o}, tudo bem? Sou ${s}, especialista da Monofloor e serei ${c} responsÃ¡vel por cuidar do seu projeto. Vi que fez uma solicitaÃ§Ã£o de ${n}mÂ². Quer me falar um pouco mais sobre o projeto?`,R=encodeURIComponent(v);window.open(`https://wa.me/55${e}?text=${R}`,"_blank")}else g.warning("Deal sem telefone cadastrado")},Ma=a=>{a?window.open(a,"_blank"):g.warning("Link do Pipedrive nÃ£o disponÃ­vel")},Pa=(a,e)=>{console.log("Open menu for:",a)},io=Object.entries(wt).reduce((a,[e,o])=>({...a,[o]:e}),{}),Da=a=>{U.value=a.map(e=>{const s=(U.value.find(p=>p.id===e.id)||Xe.find(p=>p.id===e.id))?.emoji||"ðŸ“Œ",n=io[e.color]||Oa(e.color);return{id:e.id,name:e.name,emoji:s,color:n,groupName:e.groupName,probability:e.probability,sortOrder:e.sortOrder}}),localStorage.setItem("monofloor_pipeline_stages",JSON.stringify(U.value)),ne.value=!1,g.success("Pipeline atualizado com sucesso!")},Sa=()=>{U.value=[...Xe],localStorage.removeItem("monofloor_pipeline_stages"),g.info("Pipeline restaurado para configuraÃ§Ã£o padrÃ£o")},Oa=a=>io[a.toLowerCase()]||a,Ia=()=>{const a=localStorage.getItem("monofloor_pipeline_stages");if(a)try{const e=JSON.parse(a);Array.isArray(e)&&e.length>0&&(U.value=e)}catch{}},Fa=()=>{try{const a=sessionStorage.getItem(go);if(!a)return null;const{data:e,timestamp:o}=JSON.parse(a),s=Date.now()-o;return s<zc?(console.log(`[Cache] HIT - ${e.length} deals (age: ${Math.round(s/1e3)}s)`),e):(console.log(`[Cache] EXPIRED (age: ${Math.round(s/1e3)}s)`),null)}catch{return null}},La=a=>{try{const e={data:a,timestamp:Date.now()};sessionStorage.setItem(go,JSON.stringify(e)),console.log(`[Cache] SAVED - ${a.length} deals`)}catch(e){console.warn("[Cache] Failed to save:",e)}},$a=async(a=!1)=>{K.value=!0;const e=Date.now();try{if(!a){const o=Fa();if(o){N.value=o,K.value=!1,setTimeout(()=>lo(!0),100);return}}await lo(!1)}catch(o){console.error("Error fetching deals:",o),g.error("Erro ao carregar deals")}finally{const o=Date.now()-e,s=jc-o;s>0&&K.value&&await new Promise(n=>setTimeout(n,s)),K.value=!1}},lo=async a=>{const e=Date.now(),o=await fetch("/api/admin/comercial");if(!o.ok)throw new Error("Falha ao carregar deals");const s=await o.json();console.log(`[API] ${a?"Background":"Direct"} fetch: ${Date.now()-e}ms`);let n=[];Array.isArray(s)?n=s:s.deals&&Array.isArray(s.deals)?n=s.deals:s.data&&Array.isArray(s.data)&&(n=s.data);const p=n.map(c=>({...c,clientName:c.personName||c.project?.cliente||c.pipedriveRawData?.title||"Sem nome",value:parseFloat(c.dealValue)||parseFloat(c.pipedriveRawData?.value)||0,status:Ra(c.stageName||c.status),consultor:c.consultorId||c.ownerUserName||"N/A",phone:c.personPhone||"",endereco:c.project?.endereco||c.cidadeExecucaoDesc||"",m2Total:parseFloat(c.project?.m2Total)||parseFloat(c.metragemEstimada)||0,daysInStage:Va(c.stageChangeTime||c.dealAddTime),personEmail:c.personEmail||"",tipoCliente:c.tipoCliente||"",tipoProjeto:c.tipoProjeto||"",nomeEscritorio:c.nomeEscritorio||"",budgetEstimado:c.budgetEstimado||"",cidadeExecucao:c.cidadeExecucao||"",metragemEstimada:c.metragemEstimada||"",metragemEstimadaN1:c.metragemEstimadaN1||"",estadoObra:c.estadoObra||"",dataPrevistaExec:c.dataPrevistaExec||"",detalhesArquiteto:c.detalhesArquiteto||"",descritivoArea:c.descritivoArea||"",resumo:c.resumo||"",primeiroNomeZapi:c.primeiroNomeZapi||"",telefoneZapi:c.telefoneZapi||"",pipedriveUrl:c.pipedriveUrl||`https://monofloor.pipedrive.com/deal/${c.pipedriveDealId}`,pipedriveDealId:c.pipedriveDealId||"",dealAddTime:c.dealAddTime,dealUpdateTime:c.dealUpdateTime,pipedriveSyncedAt:c.pipedriveSyncedAt}));La(p),(!a||N.value.length===0)&&(N.value=p)},Va=a=>{if(!a)return 0;const e=new Date(a),s=Math.abs(new Date().getTime()-e.getTime());return Math.ceil(s/(1e3*60*60*24))},Ra=a=>{if(!a)return"Form OrÃ§amento";const e=a.toLowerCase().trim(),o={"form orÃ§amento":"Form OrÃ§amento","form orcamento":"Form OrÃ§amento","1Âº contato":"1Âº Contato","1o contato":"1Âº Contato","primeiro contato":"1Âº Contato","1Âº contato feito":"1Âº Contato Feito","1o contato feito":"1Âº Contato Feito","follow 1Âº contato":"Follow 1Âº Contato","follow 1o contato":"Follow 1Âº Contato","follow 1Âº contato feito":"Follow 1Âº Contato Feito","follow 1o contato feito":"Follow 1Âº Contato Feito","form arquiteto":"Form Arquiteto","contato arquiteto":"Contato Arquiteto","proposta escopo minimo":"Proposta Escopo Minimo","proposta escopo mÃ­nimo":"Proposta Escopo Minimo","cÃ¡lculo de projeto":"CÃ¡lculo de Projeto","calculo de projeto":"CÃ¡lculo de Projeto","projeto levantado":"Projeto levantado","cÃ¡lculo deslocamento":"CÃ¡lculo Deslocamento","calculo deslocamento":"CÃ¡lculo Deslocamento","deslocamento levantado":"Deslocamento Levantado","proposta enviada":"Proposta enviada","fazer follow 1":"Fazer Follow 1","follow 1 feito":"Follow 1 Feito","fazer follow 2":"Fazer Follow 2","follow 2 feito":"Follow 2 Feito","fazer follow 3":"Fazer Follow 3","follow 3 feito":"Follow 3 Feito",negociaÃ§Ãµes:"NegociaÃ§Ãµes",negociacoes:"NegociaÃ§Ãµes",negociaÃ§Ã£o:"NegociaÃ§Ãµes",negociacao:"NegociaÃ§Ãµes",ganho:"Ganho",won:"Ganho",perdido:"Perdido",lost:"Perdido",lead:"Form OrÃ§amento",primeiro_contato:"1Âº Contato",contato_arquiteto:"Contato Arquiteto",levantamento:"CÃ¡lculo de Projeto",proposta_enviada:"Proposta enviada",follow_up:"Fazer Follow 1"};if(o[e])return o[e];for(const[n,p]of Object.entries(o))if(e.includes(n)||n.includes(e))return p;return e.includes("ganho")||e.includes("won")?"Ganho":e.includes("perdido")||e.includes("lost")?"Perdido":e.includes("negoci")?"NegociaÃ§Ãµes":e.includes("follow")&&e.includes("3")?"Fazer Follow 3":e.includes("follow")&&e.includes("2")?"Fazer Follow 2":e.includes("follow")&&e.includes("1")&&e.includes("feito")?"Follow 1 Feito":e.includes("follow")&&e.includes("1")||e.includes("follow")?"Fazer Follow 1":e.includes("proposta")&&e.includes("enviada")?"Proposta enviada":e.includes("proposta")&&e.includes("escopo")?"Proposta Escopo Minimo":e.includes("deslocamento")&&e.includes("levant")?"Deslocamento Levantado":e.includes("deslocamento")?"CÃ¡lculo Deslocamento":e.includes("projeto")&&e.includes("levant")?"Projeto levantado":e.includes("cÃ¡lculo")||e.includes("calculo")?"CÃ¡lculo de Projeto":e.includes("arquiteto")&&e.includes("form")?"Form Arquiteto":e.includes("arquiteto")?"Contato Arquiteto":e.includes("contato")&&e.includes("feito")?"1Âº Contato Feito":e.includes("contato")?"1Âº Contato":e.includes("form")||e.includes("orÃ§amento")||e.includes("orcamento")?"Form OrÃ§amento":["Form OrÃ§amento","1Âº Contato","1Âº Contato Feito","Follow 1Âº Contato","Follow 1Âº Contato Feito","Form Arquiteto","Contato Arquiteto","Proposta Escopo Minimo","CÃ¡lculo de Projeto","Projeto levantado","CÃ¡lculo Deslocamento","Deslocamento Levantado","Proposta enviada","Fazer Follow 1","Follow 1 Feito","Fazer Follow 2","Follow 2 Feito","Fazer Follow 3","Follow 3 Feito","NegociaÃ§Ãµes","Ganho","Perdido"].includes(a)?a:"Form OrÃ§amento"},ye=a=>{if(a<60)return`${a}s`;const e=Math.floor(a/60),o=a%60;return`${e}m ${o}s`},Ba=a=>{console.log("[CRM] Proposta aberta:",a.clientName),ce.value.set(a.sessionId,{sessionId:a.sessionId,propostaId:a.propostaId,leadId:a.leadId,clientName:a.clientName,ownerUserName:a.ownerUserName,deviceType:a.deviceType,timeOnPage:0,scrollDepth:0,startedAt:new Date(a.timestamp),timestamp:new Date(a.timestamp)}),L.value.unshift({id:`opened-${a.sessionId}`,type:"opened",clientName:a.clientName,ownerUserName:a.ownerUserName,leadId:a.leadId,deviceType:a.deviceType,timestamp:new Date(a.timestamp)}),L.value.length>20&&(L.value=L.value.slice(0,20))},Ua=a=>{const e=ce.value.get(a.sessionId);e&&(e.timeOnPage=a.timeOnPage,e.scrollDepth=a.scrollDepth,e.timestamp=new Date(a.timestamp))},ja=a=>{console.log("[CRM] Proposta fechada:",a.clientName,`(${a.totalTimeOnPage}s)`),ce.value.delete(a.sessionId),L.value.unshift({id:`closed-${a.sessionId}`,type:"closed",clientName:a.clientName,ownerUserName:a.ownerUserName,leadId:a.leadId,timeOnPage:a.totalTimeOnPage,timestamp:new Date(a.timestamp)}),L.value.length>20&&(L.value=L.value.slice(0,20))},za=a=>{console.log("[CRM] GPS atualizado:",a.clientName,a.city,a.state),d.value&&d.value.id===a.leadId&&(console.log("[CRM] Lead aberto - recarregando detalhes (force refresh)..."),ao(a.leadId,!0)),L.value.unshift({id:`gps-${a.sessionId}`,type:"gps",clientName:a.clientName,ownerUserName:"",leadId:a.leadId,location:a.city&&a.state?`${a.city}, ${a.state}`:a.city||"Local detectado",timestamp:new Date(a.timestamp)}),L.value.length>20&&(L.value=L.value.slice(0,20))},qa=a=>{L.value=L.value.filter(e=>e.id!==a)},Ve=a=>{const e=N.value.find(o=>o.id===a);e&&Tt(e)},Ha=()=>{ss(),Ke.value=is(Ba),Je.value=ls(Ua),Ze.value=ns(ja),Qe.value=rs(za),console.log("[CRM] Listeners de proposta configurados")},Ga=()=>{Ke.value&&(Ke.value(),Ke.value=null),Je.value&&(Je.value(),Je.value=null),Ze.value&&(Ze.value(),Ze.value=null),Qe.value&&(Qe.value(),Qe.value=null),console.log("[CRM] Listeners de proposta limpos")};let it=null;const no=async()=>{try{const a=await B.getAllViews();if(a.data?.success){const{activeViewers:e,historyViews:o,totalActive:s,totalHistory:n}=a.data,p=new Set(ce.value.keys()),c=new Set(e.map(v=>v.sessionId).filter(Boolean));e.forEach(v=>{v.sessionId&&(ce.value.get(v.sessionId)||(L.value.unshift({id:`opened-${v.sessionId}`,type:"opened",clientName:v.clientName,ownerUserName:v.ownerUserName,leadId:v.leadId,deviceType:v.deviceType,timestamp:new Date(v.viewedAt)}),L.value.length>20&&(L.value=L.value.slice(0,20)),So({clientName:v.clientName,ownerUserName:v.ownerUserName,leadId:v.leadId,deviceType:v.deviceType,sessionId:v.sessionId})),ce.value.set(v.sessionId,{sessionId:v.sessionId,propostaId:v.propostaId,leadId:v.leadId,clientName:v.clientName,ownerUserName:v.ownerUserName,deviceType:v.deviceType,timeOnPage:v.timeOnPage,scrollDepth:v.scrollDepth,startedAt:new Date(v.viewedAt),timestamp:new Date(v.viewedAt)}))}),p.forEach(v=>{c.has(v)||ce.value.delete(v)}),yt.value=o.map(v=>({id:v.id,sessionId:v.sessionId,propostaId:v.propostaId,leadId:v.leadId,clientName:v.clientName,ownerUserName:v.ownerUserName,deviceType:v.deviceType,timeOnPage:v.timeOnPage,scrollDepth:v.scrollDepth,viewedAt:new Date(v.viewedAt)})),console.log(`[CRM] Polling: ${s} ativo(s), ${n} no histÃ³rico`)}}catch(a){console.error("[CRM] Erro no polling:",a)}},Wa=()=>{no(),it=setInterval(no,1e4),console.log("[CRM] Polling de visualizaÃ§Ãµes iniciado (10s)")},Ka=()=>{it&&(clearInterval(it),it=null,console.log("[CRM] Polling de visualizaÃ§Ãµes ativas parado"))};return Ya(()=>{Ia(),bo(),$a(),Ha(),Wa(),document.addEventListener("click",Ht)}),es(()=>{Ga(),Ka(),document.removeEventListener("click",Ht)}),(a,e)=>(i(),l("div",Ts,[K.value?m("",!0):(i(),l("header",Ms,[t("div",Ps,[e[118]||(e[118]=ae('<div class="crm-header__title-row" data-v-7026c116><div class="pixel-train" data-v-7026c116><svg class="train-svg" viewBox="0 0 64 40" fill="none" data-v-7026c116><g transform="translate(64,0) scale(-1,1)" data-v-7026c116><circle class="smoke smoke-1" cx="20" cy="8" r="3" fill="#666" data-v-7026c116></circle><circle class="smoke smoke-2" cx="14" cy="5" r="2.5" fill="#888" data-v-7026c116></circle><circle class="smoke smoke-3" cx="8" cy="3" r="2" fill="#aaa" data-v-7026c116></circle><circle class="smoke smoke-4" cx="24" cy="4" r="2" fill="#777" data-v-7026c116></circle><rect x="18" y="12" width="6" height="8" fill="#1a1a1a" data-v-7026c116></rect><rect x="12" y="18" width="24" height="14" rx="2" fill="#1a1a1a" data-v-7026c116></rect><rect x="36" y="14" width="14" height="18" fill="#1a1a1a" data-v-7026c116></rect><rect x="38" y="16" width="4" height="4" fill="#FFE566" data-v-7026c116></rect><rect x="44" y="16" width="4" height="4" fill="#FFE566" data-v-7026c116></rect><circle cx="18" cy="34" r="5" fill="#1a1a1a" data-v-7026c116></circle><circle cx="18" cy="34" r="2" fill="#c9a962" data-v-7026c116></circle><circle cx="30" cy="34" r="5" fill="#1a1a1a" data-v-7026c116></circle><circle cx="30" cy="34" r="2" fill="#c9a962" data-v-7026c116></circle><circle cx="44" cy="34" r="4" fill="#1a1a1a" data-v-7026c116></circle><circle cx="44" cy="34" r="1.5" fill="#c9a962" data-v-7026c116></circle><rect x="8" y="22" width="4" height="6" rx="1" fill="#FFE566" data-v-7026c116></rect><rect x="14" y="24" width="20" height="2" fill="#c9a962" data-v-7026c116></rect><rect x="36" y="28" width="14" height="2" fill="#c9a962" data-v-7026c116></rect></g></svg></div><div class="crm-header__title-text" data-v-7026c116><span class="title-prefix" data-v-7026c116>A MÃQUINA DE VENDAS DA</span><svg class="monofloor-logo-svg pixel-logo" viewBox="0 0 268 32" fill="#1a1a1a" data-v-7026c116><rect x="0" y="8" width="4" height="24" data-v-7026c116></rect><rect x="4" y="6" width="2" height="4" data-v-7026c116></rect><rect x="6" y="4" width="2" height="4" data-v-7026c116></rect><rect x="8" y="2" width="2" height="4" data-v-7026c116></rect><rect x="10" y="0" width="6" height="4" data-v-7026c116></rect><rect x="16" y="2" width="2" height="4" data-v-7026c116></rect><rect x="18" y="4" width="2" height="4" data-v-7026c116></rect><rect x="20" y="6" width="2" height="4" data-v-7026c116></rect><rect x="22" y="8" width="4" height="24" data-v-7026c116></rect><rect x="26" y="6" width="2" height="4" data-v-7026c116></rect><rect x="28" y="4" width="2" height="4" data-v-7026c116></rect><rect x="30" y="2" width="2" height="4" data-v-7026c116></rect><rect x="32" y="0" width="6" height="4" data-v-7026c116></rect><rect x="38" y="2" width="2" height="4" data-v-7026c116></rect><rect x="40" y="4" width="2" height="4" data-v-7026c116></rect><rect x="42" y="6" width="2" height="4" data-v-7026c116></rect><rect x="44" y="8" width="4" height="24" data-v-7026c116></rect><rect x="56" y="4" width="2" height="2" data-v-7026c116></rect><rect x="58" y="2" width="2" height="2" data-v-7026c116></rect><rect x="60" y="0" width="8" height="4" data-v-7026c116></rect><rect x="68" y="2" width="2" height="2" data-v-7026c116></rect><rect x="70" y="4" width="2" height="2" data-v-7026c116></rect><rect x="54" y="6" width="4" height="20" data-v-7026c116></rect><rect x="70" y="6" width="4" height="20" data-v-7026c116></rect><rect x="56" y="26" width="2" height="2" data-v-7026c116></rect><rect x="58" y="28" width="2" height="2" data-v-7026c116></rect><rect x="60" y="28" width="8" height="4" data-v-7026c116></rect><rect x="68" y="28" width="2" height="2" data-v-7026c116></rect><rect x="70" y="26" width="2" height="2" data-v-7026c116></rect><rect x="82" y="8" width="4" height="24" data-v-7026c116></rect><rect x="86" y="6" width="2" height="4" data-v-7026c116></rect><rect x="88" y="4" width="2" height="4" data-v-7026c116></rect><rect x="90" y="2" width="2" height="4" data-v-7026c116></rect><rect x="92" y="0" width="8" height="4" data-v-7026c116></rect><rect x="100" y="2" width="2" height="4" data-v-7026c116></rect><rect x="102" y="4" width="2" height="4" data-v-7026c116></rect><rect x="104" y="6" width="2" height="4" data-v-7026c116></rect><rect x="106" y="8" width="4" height="24" data-v-7026c116></rect><rect x="118" y="4" width="2" height="2" data-v-7026c116></rect><rect x="120" y="2" width="2" height="2" data-v-7026c116></rect><rect x="122" y="0" width="8" height="4" data-v-7026c116></rect><rect x="130" y="2" width="2" height="2" data-v-7026c116></rect><rect x="132" y="4" width="2" height="2" data-v-7026c116></rect><rect x="116" y="6" width="4" height="20" data-v-7026c116></rect><rect x="132" y="6" width="4" height="20" data-v-7026c116></rect><rect x="118" y="26" width="2" height="2" data-v-7026c116></rect><rect x="120" y="28" width="2" height="2" data-v-7026c116></rect><rect x="122" y="28" width="8" height="4" data-v-7026c116></rect><rect x="130" y="28" width="2" height="2" data-v-7026c116></rect><rect x="132" y="26" width="2" height="2" data-v-7026c116></rect><rect x="146" y="4" width="2" height="2" data-v-7026c116></rect><rect x="148" y="2" width="2" height="2" data-v-7026c116></rect><rect x="150" y="0" width="10" height="4" data-v-7026c116></rect><rect x="144" y="6" width="4" height="26" data-v-7026c116></rect><rect x="144" y="14" width="12" height="4" data-v-7026c116></rect><rect x="164" y="0" width="4" height="26" data-v-7026c116></rect><rect x="168" y="24" width="2" height="4" data-v-7026c116></rect><rect x="170" y="26" width="2" height="4" data-v-7026c116></rect><rect x="172" y="28" width="8" height="4" data-v-7026c116></rect><rect x="186" y="4" width="2" height="2" data-v-7026c116></rect><rect x="188" y="2" width="2" height="2" data-v-7026c116></rect><rect x="190" y="0" width="8" height="4" data-v-7026c116></rect><rect x="198" y="2" width="2" height="2" data-v-7026c116></rect><rect x="200" y="4" width="2" height="2" data-v-7026c116></rect><rect x="184" y="6" width="4" height="20" data-v-7026c116></rect><rect x="200" y="6" width="4" height="20" data-v-7026c116></rect><rect x="186" y="26" width="2" height="2" data-v-7026c116></rect><rect x="188" y="28" width="2" height="2" data-v-7026c116></rect><rect x="190" y="28" width="8" height="4" data-v-7026c116></rect><rect x="198" y="28" width="2" height="2" data-v-7026c116></rect><rect x="200" y="26" width="2" height="2" data-v-7026c116></rect><rect x="214" y="4" width="2" height="2" data-v-7026c116></rect><rect x="216" y="2" width="2" height="2" data-v-7026c116></rect><rect x="218" y="0" width="8" height="4" data-v-7026c116></rect><rect x="226" y="2" width="2" height="2" data-v-7026c116></rect><rect x="228" y="4" width="2" height="2" data-v-7026c116></rect><rect x="212" y="6" width="4" height="20" data-v-7026c116></rect><rect x="228" y="6" width="4" height="20" data-v-7026c116></rect><rect x="214" y="26" width="2" height="2" data-v-7026c116></rect><rect x="216" y="28" width="2" height="2" data-v-7026c116></rect><rect x="218" y="28" width="8" height="4" data-v-7026c116></rect><rect x="226" y="28" width="2" height="2" data-v-7026c116></rect><rect x="228" y="26" width="2" height="2" data-v-7026c116></rect><rect x="240" y="8" width="4" height="24" data-v-7026c116></rect><rect x="244" y="6" width="2" height="4" data-v-7026c116></rect><rect x="246" y="4" width="2" height="4" data-v-7026c116></rect><rect x="248" y="2" width="2" height="4" data-v-7026c116></rect><rect x="250" y="0" width="8" height="4" data-v-7026c116></rect><rect x="258" y="2" width="2" height="4" data-v-7026c116></rect><rect x="260" y="4" width="2" height="4" data-v-7026c116></rect><rect x="264" y="0" width="1" height="1" data-v-7026c116></rect><rect x="265" y="0" width="2" height="1" data-v-7026c116></rect><rect x="267" y="0" width="1" height="1" data-v-7026c116></rect><rect x="263" y="1" width="1" height="1" data-v-7026c116></rect><rect x="268" y="1" width="1" height="1" data-v-7026c116></rect><rect x="263" y="2" width="1" height="2" data-v-7026c116></rect><rect x="268" y="2" width="1" height="2" data-v-7026c116></rect><rect x="263" y="4" width="1" height="1" data-v-7026c116></rect><rect x="268" y="4" width="1" height="1" data-v-7026c116></rect><rect x="264" y="5" width="1" height="1" data-v-7026c116></rect><rect x="265" y="5" width="2" height="1" data-v-7026c116></rect><rect x="267" y="5" width="1" height="1" data-v-7026c116></rect><rect x="265" y="1" width="1" height="3" data-v-7026c116></rect><rect x="266" y="1" width="1" height="1" data-v-7026c116></rect><rect x="266" y="2" width="1" height="1" data-v-7026c116></rect><rect x="267" y="3" width="1" height="2" data-v-7026c116></rect></svg></div></div>',1)),t("div",{class:"specialist-selector",onClick:e[0]||(e[0]=o=>fe.value=!0)},[e[99]||(e[99]=t("span",{class:"specialist-label"},"ESPECIALISTA",-1)),t("span",Ds,r(No.value||"TODOS"),1),e[100]||(e[100]=t("svg",{class:"specialist-chevron",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"6 9 12 15 18 9"})],-1))]),t("div",Ss,[t("button",{class:"btn btn--outline",onClick:Qo},[...e[101]||(e[101]=[t("svg",{class:"btn__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})],-1),x(" Filtros ",-1)])]),t("div",Os,[t("button",{class:P(["notification-bell",{"notification-bell--active":Y.value.length>0,"notification-bell--has-notifications":Ye.value>0}]),onClick:Po,ref_key:"bellButtonRef",ref:k},[e[103]||(e[103]=t("svg",{class:"notification-bell__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),t("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})],-1)),Y.value.length>0?(i(),l("div",Is,[...e[102]||(e[102]=[t("div",{class:"notification-bell__eye-pupil"},null,-1)])])):m("",!0),Ye.value>0?(i(),l("span",Fs,r(Ye.value>9?"9+":Ye.value),1)):m("",!0)],2),Be(vo,{name:"panel-slide"},{default:lt(()=>[E.value?(i(),l("div",{key:0,class:"notification-panel",ref_key:"notificationPanelRef",ref:ke},[t("div",Ls,[e[105]||(e[105]=t("div",{class:"notification-panel__title"},[t("svg",{class:"notification-panel__title-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("polyline",{points:"12 6 12 12 16 14"})]),x(" CENTRAL DE ATIVIDADE ")],-1)),t("button",{class:"notification-panel__close",onClick:e[1]||(e[1]=o=>E.value=!1)},[...e[104]||(e[104]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),w.value&&Y.value.length>0?(i(),l("div",$s,[t("div",Vs,[t("div",Rs,[e[106]||(e[106]=t("span",{class:"notification-panel__section-dot notification-panel__section-dot--live"},null,-1)),e[107]||(e[107]=x(" AO VIVO ",-1)),t("span",Bs,r(Y.value.length),1)]),t("button",{class:"notification-panel__section-close",onClick:e[2]||(e[2]=o=>w.value=!1),title:"Fechar"},[...e[108]||(e[108]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),t("div",Us,[(i(!0),l(M,null,S(Y.value,(o,s)=>(i(),l("div",{key:o.sessionId,class:"notification-item notification-item--live",style:ie({"--item-delay":s*.05+"s"}),onClick:n=>{Ve(o.leadId),E.value=!1}},[t("div",zs,[t("span",qs,r(o.clientName?.charAt(0)?.toUpperCase()||"?"),1),e[109]||(e[109]=t("span",{class:"notification-item__avatar-pulse"},null,-1))]),t("div",Hs,[t("div",Gs,r(o.clientName),1),t("div",Ws,[t("span",Ks,r(o.deviceType==="mobile"?"ðŸ“±":"ðŸ’»"),1),t("span",Js,r(o.ownerUserName),1)])]),t("div",Zs,[t("div",Qs,[e[110]||(e[110]=t("svg",{class:"notification-item__timer-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("polyline",{points:"12 6 12 12 16 14"})],-1)),t("span",Xs,r(qt(o.timeOnPage)),1)]),t("div",Ys,[t("div",{class:"notification-item__scroll-fill",style:ie({width:o.scrollDepth+"%"})},null,4)])])],12,js))),128))])])):m("",!0),Y.value.length===0&&Le.value.length===0?(i(),l("div",ei,[...e[111]||(e[111]=[t("div",{class:"notification-panel__empty-icon"},"ðŸ‘ï¸",-1),t("div",{class:"notification-panel__empty-text"},"Nenhuma visualizaÃ§Ã£o registrada",-1),t("div",{class:"notification-panel__empty-subtext"},"VocÃª serÃ¡ notificado quando um cliente abrir",-1)])])):m("",!0),Le.value.length>0?(i(),l("div",ti,[t("div",{class:"notification-panel__section-header notification-panel__section-header--toggle",onClick:e[3]||(e[3]=o=>f.value=!f.value)},[t("div",oi,[e[112]||(e[112]=t("span",{class:"notification-panel__section-dot notification-panel__section-dot--history"},null,-1)),e[113]||(e[113]=x(" HISTÃ“RICO (24H) ",-1)),t("span",ai,r(Le.value.length),1)]),t("button",{class:P(["notification-panel__section-toggle",{"notification-panel__section-toggle--minimized":f.value}])},[...e[114]||(e[114]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("polyline",{points:"6 9 12 15 18 9"})],-1)])],2)]),Be(vo,{name:"collapse"},{default:lt(()=>[_(t("div",si,[(i(!0),l(M,null,S(Le.value.slice(0,15),o=>(i(),l("div",{key:o.id,class:"notification-item notification-item--history",onClick:s=>{Ve(o.leadId),E.value=!1}},[t("div",{class:"notification-item__type-badge",title:o.deviceType==="mobile"?"Mobile":"Desktop"},r(At(o.sessionId)),9,li),t("div",ni,[t("div",ri,r(o.clientName),1),t("div",di,[t("span",null,r(qt(o.timeOnPage))+" â€¢ "+r(o.scrollDepth)+"% scroll",1),t("span",ci,r(o.ownerUserName),1)])]),t("div",ui,r(o.deviceType==="mobile"?"ðŸ“±":"ðŸ’»")+" "+r(Do(o.viewedAt.getTime())),1)],8,ii))),128))],512),[[ts,!f.value]])]),_:1})])):m("",!0)],512)):m("",!0)]),_:1}),Be(mo,{name:"toast-slide",tag:"div",class:"toast-notifications"},{default:lt(()=>[(i(!0),l(M,null,S(b.value,o=>(i(),l("div",{key:o.id,class:"toast-notification toast-notification--live",onClick:s=>{Ve(o.leadId),kt(o.id)}},[e[116]||(e[116]=t("div",{class:"toast-notification__pulse"},null,-1)),t("div",vi,r(At(o.sessionId)),1),t("div",mi,[t("div",gi,r(o.clientName),1),t("div",hi,r(o.deviceType==="mobile"?"ðŸ“±":"ðŸ’»")+" estÃ¡ visualizando a proposta ",1)]),t("button",{class:"toast-notification__close",onClick:$(s=>kt(o.id),["stop"])},[...e[115]||(e[115]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,fi)],8,pi))),128))]),_:1})]),t("button",{class:"btn btn--primary",onClick:e[4]||(e[4]=o=>oo())},[...e[117]||(e[117]=[t("svg",{class:"btn__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),x(" Novo Deal ",-1)])])])]),t("div",_i,[t("div",yi,[e[120]||(e[120]=ae('<div class="kpi-card__icon" data-v-7026c116><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" data-v-7026c116><circle cx="12" cy="12" r="10" data-v-7026c116></circle><circle cx="12" cy="12" r="6" data-v-7026c116></circle><circle cx="12" cy="12" r="2" fill="currentColor" data-v-7026c116></circle></svg></div>',1)),t("div",wi,[t("span",bi,r(ko.value),1),e[119]||(e[119]=t("span",{class:"kpi-card__label"},"Deals Ativos",-1))])]),t("div",ki,[e[122]||(e[122]=ae('<div class="kpi-card__icon" data-v-7026c116><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" data-v-7026c116><circle cx="9" cy="9" r="7" data-v-7026c116></circle><path d="M9 6v6M6 9h6" data-v-7026c116></path><circle cx="15" cy="15" r="7" fill="var(--yellow)" stroke="currentColor" data-v-7026c116></circle><path d="M15 12v6M12 15h6" data-v-7026c116></path></svg></div>',1)),t("div",xi,[t("span",Ci,r(Ce(jt.value)),1),e[121]||(e[121]=t("span",{class:"kpi-card__label"},"Em Pipeline",-1))])]),t("div",Ei,[e[124]||(e[124]=ae('<div class="kpi-card__icon" data-v-7026c116><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" data-v-7026c116><path d="M6 4h12v6a6 6 0 01-12 0V4z" fill="var(--yellow)" data-v-7026c116></path><path d="M6 4H4a2 2 0 000 4h2M18 4h2a2 2 0 010 4h-2" data-v-7026c116></path><path d="M12 16v4M8 22h8" data-v-7026c116></path></svg></div>',1)),t("div",Ai,[t("span",Ni,r(_e("Ganho").length),1),e[123]||(e[123]=t("span",{class:"kpi-card__label"},"Ganhos",-1))])]),t("div",Ti,[e[126]||(e[126]=t("div",{class:"kpi-card__icon"},[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("polyline",{points:"4 16 8 12 12 14 20 6"}),t("polyline",{points:"14 6 20 6 20 12"})])],-1)),t("div",Mi,[t("span",Pi,r(xo.value)+"%",1),e[125]||(e[125]=t("span",{class:"kpi-card__label"},"Taxa ConversÃ£o",-1))])]),t("div",Di,[e[128]||(e[128]=t("div",{class:"kpi-card__icon"},[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("polyline",{points:"12 6 12 12 16 14"})])],-1)),t("div",Si,[t("span",Oi,r(Co.value)+"d",1),e[127]||(e[127]=t("span",{class:"kpi-card__label"},"Tempo MÃ©dio",-1))])]),t("div",Ii,[e[130]||(e[130]=t("div",{class:"kpi-card__icon"},[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M4 6h16a2 2 0 012 2v2a2 2 0 00-2 2 2 2 0 002 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-2a2 2 0 002-2 2 2 0 00-2-2V8a2 2 0 012-2z",fill:"var(--yellow)"}),t("line",{x1:"10",y1:"6",x2:"10",y2:"18","stroke-dasharray":"2 2"})])],-1)),t("div",Fi,[t("span",Li,r(Ce(Eo.value)),1),e[129]||(e[129]=t("span",{class:"kpi-card__label"},"Ticket MÃ©dio",-1))])])])])),K.value?m("",!0):(i(),l("div",$i,[t("div",{class:P(["search-bar",{"search-bar--focused":ee.value}])},[e[131]||(e[131]=t("img",{class:"search-bar__saturn",src:as,alt:"Saturn"},null,-1)),_(t("input",{type:"text",class:"search-bar__input",placeholder:"Buscar por nome, telefone ou email...","onUpdate:modelValue":e[5]||(e[5]=o=>j.value=o),onFocus:e[6]||(e[6]=o=>ee.value=!0),onBlur:Fo,onKeydown:[e[7]||(e[7]=we(o=>ee.value=!1,["escape"])),we(Lo,["enter"]),e[8]||(e[8]=we($(o=>Kt(1),["prevent"]),["down"])),e[9]||(e[9]=we($(o=>Kt(-1),["prevent"]),["up"]))]},null,544),[[y,j.value]]),j.value?(i(),l("button",{key:0,class:"search-bar__clear",onClick:$o},"âœ•")):m("",!0)],2),ee.value&&j.value.length>=2?(i(),l("div",Vi,[$e.value.length===0?(i(),l("div",Ri," Nenhum resultado encontrado ")):m("",!0),(i(!0),l(M,null,S($e.value,(o,s)=>(i(),l("div",{key:o.id,class:P(["search-suggestion",{"search-suggestion--active":te.value===s}]),onMousedown:$(n=>Jt(o),["prevent"])},[t("div",Ui,[t("span",ji,r(o.clientName||"Sem nome"),1),t("span",{class:P(["search-suggestion__stage",`search-suggestion__stage--${Io(o.status||"")}`])},[t("span",{class:"search-suggestion__stage-icon",innerHTML:Wt(o.status||"")},null,8,zi),x(" "+r(Oo(o.status||"")),1)],2)]),t("div",qi,[o.phone?(i(),l("span",Hi,[e[132]||(e[132]=t("svg",{class:"search-suggestion__detail-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})],-1)),x(" "+r(o.phone),1)])):m("",!0),o.personEmail?(i(),l("span",Gi,[e[133]||(e[133]=t("svg",{class:"search-suggestion__detail-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),t("polyline",{points:"22,6 12,13 2,6"})],-1)),x(" "+r(o.personEmail),1)])):m("",!0)]),o.cidadeExecucao?(i(),l("div",Wi,[e[134]||(e[134]=t("svg",{class:"search-suggestion__detail-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),t("circle",{cx:"12",cy:"10",r:"3"})],-1)),x(" "+r(ct(o.cidadeExecucao)),1)])):m("",!0)],42,Bi))),128))])):m("",!0)])),J.value&&!K.value?(i(),l("div",Ki,[t("div",Ji,[e[135]||(e[135]=t("label",{class:"filter-label"},"Buscar",-1)),_(t("input",{type:"text",class:"filter-input",placeholder:"Nome do cliente...","onUpdate:modelValue":e[10]||(e[10]=o=>j.value=o)},null,512),[[y,j.value]])]),t("div",Zi,[e[137]||(e[137]=t("label",{class:"filter-label"},"Consultor",-1)),_(t("select",{class:"filter-select","onUpdate:modelValue":e[11]||(e[11]=o=>Z.value=o)},[e[136]||(e[136]=t("option",{value:""},"Todos",-1)),(i(!0),l(M,null,S(zt.value,o=>(i(),l("option",{key:o,value:o},r(o),9,Qi))),128))],512),[[ve,Z.value]])]),t("div",Xi,[e[139]||(e[139]=t("label",{class:"filter-label"},"PerÃ­odo",-1)),_(t("select",{class:"filter-select","onUpdate:modelValue":e[12]||(e[12]=o=>he.value=o)},[...e[138]||(e[138]=[ae('<option value="" data-v-7026c116>Todos</option><option value="7" data-v-7026c116>Ãšltimos 7 dias</option><option value="30" data-v-7026c116>Ãšltimos 30 dias</option><option value="90" data-v-7026c116>Ãšltimos 90 dias</option><option value="365" data-v-7026c116>Este ano</option>',5)])],512),[[ve,he.value]])]),t("div",Yi,[e[141]||(e[141]=t("label",{class:"filter-label"},"Ordenar por",-1)),_(t("select",{class:"filter-select","onUpdate:modelValue":e[13]||(e[13]=o=>be.value=o)},[...e[140]||(e[140]=[ae('<option value="recent" data-v-7026c116>Mais Recentes</option><option value="oldest" data-v-7026c116>Mais Antigos</option><option value="value-high" data-v-7026c116>Maior Valor</option><option value="value-low" data-v-7026c116>Menor Valor</option><option value="name-az" data-v-7026c116>Nome A-Z</option><option value="name-za" data-v-7026c116>Nome Z-A</option><option value="days-high" data-v-7026c116>Mais Dias no EstÃ¡gio</option><option value="days-low" data-v-7026c116>Menos Dias no EstÃ¡gio</option>',8)])],512),[[ve,be.value]])]),t("button",{class:"btn btn--small btn--outline",onClick:Xo}," Limpar ")])):m("",!0),K.value?m("",!0):(i(),l("div",{key:3,class:"pipeline",ref_key:"pipelineRef",ref:nt},[(i(!0),l(M,null,S(U.value,(o,s)=>(i(),l("div",{key:o.id,class:P(["pipeline-column",[`pipeline-column--${o.color}`,{"pipeline-column--drag-over":ge.value===o.id}]]),style:ie({"--delay":s*.05+"s"}),onDragover:$(n=>Ko(n,o.id),["prevent"]),onDragleave:Jo,onDrop:n=>Zo(n,o.id)},[t("div",tl,[t("div",ol,[t("span",{class:"pipeline-column__icon",innerHTML:Wt(o.id)},null,8,al),t("span",null,r(o.name),1)]),t("div",sl,[t("span",il,r(_e(o.id).length),1),t("span",ll,r(Ce(Vo(o.id))),1)])]),t("button",{class:"pipeline-column__add",onClick:n=>oo(o.id)}," + Adicionar deal ",8,nl),t("div",rl,[Be(mo,{name:"card",tag:"div",class:"pipeline-column__cards"},{default:lt(()=>[(i(!0),l(M,null,S(_e(o.id),n=>(i(),l("div",{key:n.id,class:P(["deal-card",{"deal-card--dragging":Ae.value?.id===n.id,"deal-card--new":Nt.value===n.id}]),draggable:"true",onDragstart:p=>Go(p,n),onDragend:Wo,onClick:p=>Tt(n)},[t("div",cl,[t("span",ul,r(n.clientName||"Sem nome"),1),t("span",pl,"#"+r(n.pipedriveDealId||n.id.slice(-4)),1)]),n.tipoCliente||n.metragemEstimadaN1?(i(),l("div",vl,[n.tipoCliente?(i(),l("span",ml,[n.tipoCliente==="Consumidor Final"?(i(),l("svg",gl,[...e[142]||(e[142]=[t("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},null,-1),t("polyline",{points:"9 22 9 12 15 12 15 22"},null,-1)])])):(i(),l("svg",hl,[...e[143]||(e[143]=[t("path",{d:"M2 18v3h20v-3"},null,-1),t("path",{d:"M6 14v4"},null,-1),t("path",{d:"M18 14v4"},null,-1),t("path",{d:"M12 14v4"},null,-1),t("path",{d:"M4 10h16"},null,-1),t("path",{d:"M4 10 12 3l8 7"},null,-1)])])),x(" "+r(n.tipoCliente),1)])):m("",!0),n.metragemEstimadaN1?(i(),l("span",fl,[e[144]||(e[144]=t("svg",{class:"deal-card__tag-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M3 3v18h18"}),t("path",{d:"M8 17V9"}),t("path",{d:"M12 17V5"}),t("path",{d:"M16 17v-4"}),t("path",{d:"M20 17v-8"})],-1)),x(" "+r(n.metragemEstimadaN1),1)])):m("",!0)])):m("",!0),t("div",_l,r(Ce(n.value||0)),1),n.cidadeExecucao?(i(),l("div",yl," ðŸ“ "+r(ct(n.cidadeExecucao)),1)):m("",!0),t("div",wl,[t("div",{class:"deal-card__specialist",title:n.consultor},[t("span",{class:"deal-card__specialist-dot",style:ie({backgroundColor:Uo(n.consultor)})},null,4),t("span",kl,r(jo(n.consultor)),1)],8,bl),t("div",{class:P(["deal-card__views",{"deal-card__views--active":(n.proposalViews||0)>0}])},[e[145]||(e[145]=t("svg",{class:"deal-card__views-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t("circle",{cx:"12",cy:"12",r:"3"})],-1)),t("span",xl,r(n.proposalViews||0),1)],2),t("div",{class:P(["deal-card__days",Qt(n.daysInStage)])},r(n.daysInStage||0)+"d ",3)]),t("div",Cl,[t("button",{class:"deal-action deal-action--whatsapp",title:"WhatsApp",onClick:$(p=>Lt(n),["stop"])},[...e[146]||(e[146]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})],-1)])],8,El),t("button",{class:"deal-action deal-action--link",title:"Pipedrive",onClick:$(p=>Ma(n.pipedriveUrl),["stop"])},[...e[147]||(e[147]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),t("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})],-1)])],8,Al),t("button",{class:"deal-action deal-action--menu",title:"Mais",onClick:$(p=>Pa(n,p),["stop"])},[...e[148]||(e[148]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"12",cy:"12",r:"1.5",fill:"currentColor"}),t("circle",{cx:"12",cy:"5",r:"1.5",fill:"currentColor"}),t("circle",{cx:"12",cy:"19",r:"1.5",fill:"currentColor"})],-1)])],8,Nl)])],42,dl))),128))]),_:2},1024),_e(o.id).length===0?(i(),l("div",Tl,[...e[149]||(e[149]=[ae('<span class="pipeline-column__empty-icon" data-v-7026c116><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" data-v-7026c116><circle cx="12" cy="12" r="10" data-v-7026c116></circle><circle cx="12" cy="12" r="6" data-v-7026c116></circle><circle cx="12" cy="12" r="2" fill="currentColor" data-v-7026c116></circle></svg></span><span data-v-7026c116>Arraste deals aqui</span>',2)])])):m("",!0)])],46,el))),128)),t("div",{class:"pipeline-settings-column",onClick:e[14]||(e[14]=o=>ne.value=!0)},[...e[150]||(e[150]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"12",cy:"12",r:"3"}),t("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})],-1)])])],512)),(i(),pe(me,{to:"body"},[d.value?(i(),l("div",{key:0,class:"modal-overlay",onClick:$(Mt,["self"])},[t("div",Ml,[t("div",Pl,[t("div",Dl,[t("h2",Sl,r(d.value.clientName),1),t("div",Ol,[d.value.tipoCliente?(i(),l("span",Il,r(d.value.tipoCliente),1)):m("",!0),d.value.tipoProjeto?(i(),l("span",Fl,r(d.value.tipoProjeto),1)):m("",!0)])]),t("div",Ll,[d.value.pipedriveUrl?(i(),l("a",{key:0,href:d.value.pipedriveUrl,target:"_blank",class:"btn btn--ghost btn--icon",title:"Abrir no Pipedrive"},[...e[151]||(e[151]=[t("svg",{class:"btn__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),t("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})],-1)])],8,$l)):m("",!0),t("button",{class:"modal__close",onClick:Mt},[...e[152]||(e[152]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])])]),t("div",Vl,[t("div",Rl,[(i(!0),l(M,null,S(U.value.filter(o=>o.id!=="Ganho"&&o.id!=="Perdido"),(o,s)=>(i(),l(M,{key:o.id},[s>0?(i(),l("div",{key:0,class:P(["pipeline-progress__connector",{"pipeline-progress__connector--completed":et(d.value.status)>=s,"pipeline-progress__connector--pending":et(d.value.status)<s}])},null,2)):m("",!0),t("div",{class:P(["pipeline-progress__stage",{"pipeline-progress__stage--completed":et(d.value.status)>s,"pipeline-progress__stage--current":d.value.status===o.id,"pipeline-progress__stage--pending":et(d.value.status)<s}]),onClick:n=>Ct(o.id),title:`${o.name} - Clique para mover`},[d.value.status===o.id?(i(),l("div",Ul,[...e[153]||(e[153]=[t("svg",{viewBox:"0 0 64 40",fill:"none"},[t("g",{transform:"translate(64,0) scale(-1,1)"},[t("rect",{x:"18",y:"12",width:"6",height:"8",fill:"#1a1a1a"}),t("rect",{x:"12",y:"18",width:"24",height:"14",rx:"2",fill:"#1a1a1a"}),t("rect",{x:"36",y:"14",width:"14",height:"18",fill:"#1a1a1a"}),t("rect",{x:"38",y:"16",width:"4",height:"4",fill:"#FFE566"}),t("rect",{x:"44",y:"16",width:"4",height:"4",fill:"#FFE566"}),t("circle",{cx:"18",cy:"34",r:"5",fill:"#1a1a1a"}),t("circle",{cx:"18",cy:"34",r:"2",fill:"#c9a962"}),t("circle",{cx:"30",cy:"34",r:"5",fill:"#1a1a1a"}),t("circle",{cx:"30",cy:"34",r:"2",fill:"#c9a962"}),t("circle",{cx:"44",cy:"34",r:"4",fill:"#1a1a1a"}),t("circle",{cx:"44",cy:"34",r:"1.5",fill:"#c9a962"}),t("rect",{x:"8",y:"22",width:"4",height:"6",rx:"1",fill:"#FFE566"}),t("rect",{x:"14",y:"24",width:"20",height:"2",fill:"#c9a962"}),t("rect",{x:"36",y:"28",width:"14",height:"2",fill:"#c9a962"})])],-1)])])):m("",!0),t("span",jl,r(qo(o.id))+"d ",1),t("span",zl,r(o.name),1)],10,Bl)],64))),128))]),t("div",ql,[t("button",{class:P(["pipeline-progress__final-btn pipeline-progress__final-btn--ganho",{"pipeline-progress__final-btn--active":d.value.status==="Ganho"}]),onClick:e[15]||(e[15]=o=>Ct("Ganho"))},[...e[154]||(e[154]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}),t("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}),t("path",{d:"M4 22h16"}),t("path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"}),t("path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"}),t("path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z"})],-1),x(" Ganho ",-1)])],2),t("button",{class:P(["pipeline-progress__final-btn pipeline-progress__final-btn--perdido",{"pipeline-progress__final-btn--active":d.value.status==="Perdido"}]),onClick:e[16]||(e[16]=o=>Ct("Perdido"))},[...e[155]||(e[155]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),t("line",{x1:"9",y1:"9",x2:"15",y2:"15"})],-1),x(" Perdido ",-1)])],2)])]),t("div",Hl,[t("div",Gl,[e[161]||(e[161]=t("h3",{class:"detail-section__title"},"Resumo",-1)),t("div",Wl,[t("div",Kl,[e[156]||(e[156]=t("span",{class:"detail-label"},"Valor",-1)),A.value==="value"?_((i(),l("input",{key:0,type:"number",class:"inline-edit-input inline-edit-input--large","onUpdate:modelValue":e[17]||(e[17]=o=>C.value=o),onBlur:e[18]||(e[18]=o=>H("value")),onKeydown:e[19]||(e[19]=o=>oe(o,"value")),ref:"editInput",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--large detail-value--editable",onClick:e[20]||(e[20]=o=>q("value",d.value.value)),title:"Clique para editar"},r(Ce(d.value.value||0)),1))]),t("div",Jl,[e[157]||(e[157]=t("span",{class:"detail-label"},"EstÃ¡gio",-1)),t("span",{class:"detail-value detail-value--stage",style:ie({"--stage-color":zo(d.value.status)})},r(U.value.find(o=>o.id===d.value?.status)?.emoji)+" "+r(U.value.find(o=>o.id===d.value?.status)?.name||"N/A"),5)]),t("div",Zl,[e[158]||(e[158]=t("span",{class:"detail-label"},"Dias no EstÃ¡gio",-1)),t("span",{class:P(["detail-value",Qt(d.value.daysInStage)])},r(d.value.daysInStage||0)+" dias ",3)]),t("div",Ql,[e[160]||(e[160]=t("span",{class:"detail-label"},"Consultor",-1)),A.value==="consultor"?_((i(),l("select",{key:0,class:"inline-edit-select","onUpdate:modelValue":e[21]||(e[21]=o=>C.value=o),onBlur:e[22]||(e[22]=o=>H("consultor")),onChange:e[23]||(e[23]=o=>Ft("consultor")),autofocus:""},[e[159]||(e[159]=t("option",{value:""},"Selecione...",-1)),(i(!0),l(M,null,S(yo.value,o=>(i(),l("option",{key:o,value:o},r(o),9,Xl))),128))],544)),[[ve,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--editable",onClick:e[24]||(e[24]=o=>q("consultor",d.value.consultor)),title:"Clique para editar"},r(d.value.consultor||"N/A"),1))])])]),t("div",Yl,[e[166]||(e[166]=t("h3",{class:"detail-section__title"},"Contato",-1)),t("div",en,[t("div",tn,[e[162]||(e[162]=t("span",{class:"detail-label"},"Telefone",-1)),A.value==="phone"?_((i(),l("input",{key:0,type:"tel",class:"inline-edit-input","onUpdate:modelValue":e[25]||(e[25]=o=>C.value=o),onBlur:e[26]||(e[26]=o=>H("phone")),onKeydown:e[27]||(e[27]=o=>oe(o,"phone")),placeholder:"(11) 99999-9999",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--editable",onClick:e[29]||(e[29]=o=>q("phone",d.value.phone)),title:"Clique para editar"},[x(" ðŸ“± "+r(d.value.phone||"N/A")+" ",1),t("span",{class:"edit-action",onClick:e[28]||(e[28]=$(o=>Lt(d.value),["stop"]))},"ðŸ’¬")]))]),t("div",on,[e[163]||(e[163]=t("span",{class:"detail-label"},"Email",-1)),A.value==="personEmail"?_((i(),l("input",{key:0,type:"email",class:"inline-edit-input","onUpdate:modelValue":e[30]||(e[30]=o=>C.value=o),onBlur:e[31]||(e[31]=o=>H("personEmail")),onKeydown:e[32]||(e[32]=o=>oe(o,"personEmail")),placeholder:"email@exemplo.com",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--editable",onClick:e[33]||(e[33]=o=>q("personEmail",d.value.personEmail)),title:"Clique para editar"},r(d.value.personEmail||"N/A"),1))]),t("div",an,[e[164]||(e[164]=t("span",{class:"detail-label"},"WhatsApp (Z-API)",-1)),t("span",sn,r(d.value.telefoneZapi||d.value.phone||"N/A"),1)]),t("div",ln,[e[165]||(e[165]=t("span",{class:"detail-label"},"Nome Z-API",-1)),t("span",nn,r(d.value.primeiroNomeZapi||"N/A"),1)])])]),t("div",rn,[e[174]||(e[174]=t("h3",{class:"detail-section__title"},"Dados do Projeto",-1)),t("div",dn,[t("div",cn,[e[167]||(e[167]=t("span",{class:"detail-label"},"EndereÃ§o",-1)),A.value==="endereco"?_((i(),l("input",{key:0,type:"text",class:"inline-edit-input inline-edit-input--full","onUpdate:modelValue":e[34]||(e[34]=o=>C.value=o),onBlur:e[35]||(e[35]=o=>H("endereco")),onKeydown:e[36]||(e[36]=o=>oe(o,"endereco")),placeholder:"Rua, nÃºmero, bairro, cidade",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--editable",onClick:e[37]||(e[37]=o=>q("endereco",d.value.endereco||d.value.cidadeExecucaoDesc)),title:"Clique para editar"},r(d.value.endereco||d.value.cidadeExecucaoDesc||"N/A"),1))]),t("div",un,[e[168]||(e[168]=t("span",{class:"detail-label"},"Cidade",-1)),A.value==="cidadeExecucao"?_((i(),l("input",{key:0,type:"text",class:"inline-edit-input","onUpdate:modelValue":e[38]||(e[38]=o=>C.value=o),onBlur:e[39]||(e[39]=o=>H("cidadeExecucao")),onKeydown:e[40]||(e[40]=o=>oe(o,"cidadeExecucao")),placeholder:"SÃ£o Paulo",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--editable",onClick:e[41]||(e[41]=o=>q("cidadeExecucao",d.value.cidadeExecucao)),title:"Clique para editar"},r(ct(d.value.cidadeExecucao)||"N/A"),1))]),t("div",pn,[e[169]||(e[169]=t("span",{class:"detail-label"},"MÂ² Estimado",-1)),A.value==="metragemEstimada"?_((i(),l("input",{key:0,type:"number",class:"inline-edit-input","onUpdate:modelValue":e[42]||(e[42]=o=>C.value=o),onBlur:e[43]||(e[43]=o=>H("metragemEstimada")),onKeydown:e[44]||(e[44]=o=>oe(o,"metragemEstimada")),placeholder:"150",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--metric detail-value--editable",onClick:e[45]||(e[45]=o=>q("metragemEstimada",d.value.metragemEstimada||d.value.m2Total)),title:"Clique para editar"},r(d.value.metragemEstimada||d.value.m2Total||0)+" mÂ² ",1))]),t("div",vn,[e[170]||(e[170]=t("span",{class:"detail-label"},"Faixa Metragem",-1)),t("span",mn,r(d.value.metragemEstimadaN1||"N/A"),1)]),t("div",gn,[e[171]||(e[171]=t("span",{class:"detail-label"},"Estado da Obra",-1)),A.value==="estadoObra"?_((i(),l("input",{key:0,type:"text",class:"inline-edit-input","onUpdate:modelValue":e[46]||(e[46]=o=>C.value=o),onBlur:e[47]||(e[47]=o=>H("estadoObra")),onKeydown:e[48]||(e[48]=o=>oe(o,"estadoObra")),placeholder:"Em andamento",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--editable",onClick:e[49]||(e[49]=o=>q("estadoObra",d.value.estadoObra)),title:"Clique para editar"},r(d.value.estadoObra||"N/A"),1))]),t("div",hn,[e[172]||(e[172]=t("span",{class:"detail-label"},"Budget Estimado",-1)),A.value==="budgetEstimado"?_((i(),l("input",{key:0,type:"text",class:"inline-edit-input","onUpdate:modelValue":e[50]||(e[50]=o=>C.value=o),onBlur:e[51]||(e[51]=o=>H("budgetEstimado")),onKeydown:e[52]||(e[52]=o=>oe(o,"budgetEstimado")),placeholder:"R$ 50.000 - R$ 100.000",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--editable",onClick:e[53]||(e[53]=o=>q("budgetEstimado",d.value.budgetEstimado)),title:"Clique para editar"},r(d.value.budgetEstimado||"N/A"),1))]),t("div",fn,[e[173]||(e[173]=t("span",{class:"detail-label"},"Data Prevista ExecuÃ§Ã£o",-1)),A.value==="dataPrevistaExec"?_((i(),l("input",{key:0,type:"text",class:"inline-edit-input","onUpdate:modelValue":e[54]||(e[54]=o=>C.value=o),onBlur:e[55]||(e[55]=o=>H("dataPrevistaExec")),onKeydown:e[56]||(e[56]=o=>oe(o,"dataPrevistaExec")),placeholder:"Jan/2026",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--editable",onClick:e[57]||(e[57]=o=>q("dataPrevistaExec",d.value.dataPrevistaExec)),title:"Clique para editar"},r(d.value.dataPrevistaExec||"N/A"),1))])])]),d.value.tipoCliente==="Arquiteto"||d.value.nomeEscritorio?(i(),l("div",_n,[e[177]||(e[177]=t("h3",{class:"detail-section__title"},"Arquiteto / EscritÃ³rio",-1)),t("div",yn,[t("div",wn,[e[175]||(e[175]=t("span",{class:"detail-label"},"Nome do EscritÃ³rio",-1)),A.value==="nomeEscritorio"?_((i(),l("input",{key:0,type:"text",class:"inline-edit-input","onUpdate:modelValue":e[58]||(e[58]=o=>C.value=o),onBlur:e[59]||(e[59]=o=>H("nomeEscritorio")),onKeydown:e[60]||(e[60]=o=>oe(o,"nomeEscritorio")),placeholder:"Nome do escritÃ³rio",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--editable",onClick:e[61]||(e[61]=o=>q("nomeEscritorio",d.value.nomeEscritorio)),title:"Clique para editar"},r(d.value.nomeEscritorio||"N/A"),1))]),t("div",bn,[e[176]||(e[176]=t("span",{class:"detail-label"},"Detalhes do Arquiteto",-1)),A.value==="detalhesArquiteto"?_((i(),l("textarea",{key:0,class:"inline-edit-textarea","onUpdate:modelValue":e[62]||(e[62]=o=>C.value=o),onBlur:e[63]||(e[63]=o=>H("detalhesArquiteto")),onKeydown:we(Ee,["esc"]),placeholder:"Detalhes sobre o arquiteto...",rows:"3",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--editable",onClick:e[64]||(e[64]=o=>q("detalhesArquiteto",d.value.detalhesArquiteto)),title:"Clique para editar"},r(d.value.detalhesArquiteto||"N/A"),1))])])])):m("",!0),t("div",kn,[e[180]||(e[180]=t("h3",{class:"detail-section__title"},"ObservaÃ§Ãµes",-1)),t("div",xn,[t("div",Cn,[e[178]||(e[178]=t("span",{class:"detail-label"},"Resumo",-1)),A.value==="resumo"?_((i(),l("textarea",{key:0,class:"inline-edit-textarea","onUpdate:modelValue":e[65]||(e[65]=o=>C.value=o),onBlur:e[66]||(e[66]=o=>H("resumo")),onKeydown:we(Ee,["esc"]),placeholder:"Resumo do projeto...",rows:"3",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--text detail-value--editable",onClick:e[67]||(e[67]=o=>q("resumo",d.value.resumo)),title:"Clique para editar"},r(d.value.resumo||"Clique para adicionar..."),1))]),t("div",En,[e[179]||(e[179]=t("span",{class:"detail-label"},"Descritivo da Ãrea",-1)),A.value==="descritivoArea"?_((i(),l("textarea",{key:0,class:"inline-edit-textarea","onUpdate:modelValue":e[68]||(e[68]=o=>C.value=o),onBlur:e[69]||(e[69]=o=>H("descritivoArea")),onKeydown:we(Ee,["esc"]),placeholder:"DescriÃ§Ã£o da Ã¡rea...",rows:"3",autofocus:""},null,544)),[[y,C.value]]):(i(),l("span",{key:1,class:"detail-value detail-value--text detail-value--editable",onClick:e[70]||(e[70]=o=>q("descritivoArea",d.value.descritivoArea)),title:"Clique para editar"},r(d.value.descritivoArea||"Clique para adicionar..."),1))])])]),t("div",An,[t("div",{class:"detail-section__header"},[e[181]||(e[181]=t("h3",{class:"detail-section__title"},"ðŸ“Ž Anexos",-1)),t("button",{class:"btn btn--sm btn--primary",onClick:ua}," + Adicionar ")]),Ie.value?(i(),l("div",Nn,"Carregando anexos...")):Q.value.length===0?(i(),l("div",Tn," Nenhum anexo. Adicione projetos arquitetÃ´nicos, plantas e documentos. ")):(i(),l("div",Mn,[(i(!0),l(M,null,S(Q.value,o=>(i(),l("div",{key:o.id,class:"anexo-item"},[t("div",Pn,r(o.mimeType?.includes("pdf")?"ðŸ“„":o.mimeType?.includes("image")?"ðŸ–¼ï¸":"ðŸ“"),1),t("div",Dn,[t("span",Sn,r(o.nome),1),t("span",On,[x(r(fa(o.tipo))+" ",1),o.fileSize?(i(),l("span",In," â€¢ "+r(ha(o.fileSize)),1)):m("",!0)])]),t("div",Fn,[t("button",{class:"btn btn--ghost btn--sm",onClick:s=>ma(o),title:"Baixar"}," â¬‡ï¸ ",8,Ln),t("button",{class:"btn btn--ghost btn--sm btn--danger",onClick:s=>ga(o),title:"Excluir"}," ðŸ—‘ï¸ ",8,$n)])]))),128))]))]),t("div",Vn,[t("div",{class:"detail-section__header"},[e[182]||(e[182]=t("h3",{class:"detail-section__title"},[t("svg",{class:"detail-section__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),t("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]),x(" OrÃ§amentos Enviados ")],-1)),t("button",{class:"btn btn--sm btn--primary",onClick:ya}," + Registrar Envio ")]),Fe.value?(i(),l("div",Rn,"Carregando orÃ§amentos...")):X.value.length===0?(i(),l("div",Bn," Nenhum orÃ§amento enviado registrado. ")):(i(),l("div",Un,[(i(!0),l(M,null,S(X.value,o=>(i(),l("div",{key:o.id,class:"orcamento-item"},[t("div",jn,r(ka(o.dataEnvio)),1),t("div",zn,[o.valor?(i(),l("span",qn,r(Ce(o.valor)),1)):m("",!0),o.metragem?(i(),l("span",Hn,r(o.metragem)+"mÂ² ",1)):m("",!0),o.proposta?(i(),l("span",Gn," Proposta v"+r(o.proposta.versao),1)):m("",!0)]),o.descricao||o.observacoes?(i(),l("div",Wn,r(o.descricao||o.observacoes),1)):m("",!0),t("button",{class:"btn btn--ghost btn--sm btn--danger",onClick:s=>ba(o),title:"Excluir"}," ðŸ—‘ï¸ ",8,Kn)]))),128))]))]),T.value?(i(),l("div",Jn,[e[189]||(e[189]=t("div",{class:"detail-section__header"},[t("h3",{class:"detail-section__title"},[t("svg",{class:"detail-section__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t("circle",{cx:"12",cy:"12",r:"3"})]),x(" HistÃ³rico de VisualizaÃ§Ãµes ")])],-1)),Me.value?(i(),l("div",Zn,[...e[183]||(e[183]=[t("span",{class:"detail-loading__spinner"},null,-1),x(" Carregando analytics... ",-1)])])):I.value?.stats?(i(),l(M,{key:1},[t("div",Qn,[t("div",Xn,[t("span",Yn,r(I.value.stats.humanViews),1),e[184]||(e[184]=t("span",{class:"analytics-stat__label"},"VisualizaÃ§Ãµes",-1))]),t("div",er,[t("span",tr,r(I.value.stats.uniqueVisitors),1),e[185]||(e[185]=t("span",{class:"analytics-stat__label"},"Visitantes Ãšnicos",-1))]),t("div",or,[t("span",ar,r(ye(I.value.stats.avgTimeOnPage)),1),e[186]||(e[186]=t("span",{class:"analytics-stat__label"},"Tempo MÃ©dio",-1))]),t("div",sr,[t("span",ir,r(I.value.stats.maxScrollDepth)+"%",1),e[187]||(e[187]=t("span",{class:"analytics-stat__label"},"Max Scroll",-1))])]),t("div",lr,[t("span",nr," ðŸ’» "+r(I.value.stats.deviceBreakdown.desktop),1),t("span",rr," ðŸ“± "+r(I.value.stats.deviceBreakdown.mobile),1),t("span",dr," ðŸ“Ÿ "+r(I.value.stats.deviceBreakdown.tablet),1)]),I.value.views.length>0?(i(),l("div",cr,[e[188]||(e[188]=t("div",{class:"analytics-views__header"}," Ãšltimas VisualizaÃ§Ãµes ",-1)),t("div",ur,[(i(!0),l(M,null,S(I.value.views.slice(0,5),o=>(i(),l("div",{key:o.id,class:P(["analytics-view-item",{"analytics-view-item--bot":o.isBot,"analytics-view-item--has-recording":Ot(o.sessionId)}]),onClick:s=>ia(o.sessionId)},[t("span",{class:"analytics-view-item__visitor",title:`Visitante: ${o.sessionId?.slice(0,8)||"anÃ´nimo"}`},r(At(o.sessionId)),9,vr),t("span",mr,r(o.deviceType==="mobile"?"ðŸ“±":o.deviceType==="tablet"?"ðŸ“Ÿ":"ðŸ’»"),1),t("span",{class:P(["analytics-view-item__location",{"analytics-view-item__location--unknown":!Xt(o)}]),title:Ho(o),style:ie({cursor:Xt(o)?"help":"default"})}," ðŸ“ ",14,gr),t("span",hr,r(tt(o.viewedAt)),1),t("span",fr,r(ye(o.timeOnPage)),1),t("span",{class:"analytics-view-item__report",title:"Ver detalhes da sessÃ£o",onClick:$(s=>aa(o),["stop"])}," ðŸ“Š ",8,_r),t("span",yr,r(o.scrollDepth)+"% ",1),Ot(o.sessionId)?(i(),l("span",wr," â–¶ï¸ ")):m("",!0)],10,pr))),128))])])):m("",!0),I.value.stats.firstView?(i(),l("div",br,[t("span",kr," Primeira: "+r(tt(I.value.stats.firstView)),1),I.value.stats.lastView?(i(),l("span",xr," Ãšltima: "+r(tt(I.value.stats.lastView)),1)):m("",!0)])):m("",!0)],64)):(i(),l("div",Cr," A proposta ainda nÃ£o foi visualizada pelo cliente. "))])):m("",!0),t("div",Er,[e[194]||(e[194]=t("h3",{class:"detail-section__title"},"Metadados",-1)),t("div",Ar,[t("div",Nr,[e[190]||(e[190]=t("span",{class:"detail-label"},"ID Pipedrive",-1)),t("span",Tr,r(d.value.pipedriveDealId||"N/A"),1)]),t("div",Mr,[e[191]||(e[191]=t("span",{class:"detail-label"},"Criado em",-1)),t("span",Pr,r(Et(d.value.dealAddTime)),1)]),t("div",Dr,[e[192]||(e[192]=t("span",{class:"detail-label"},"Atualizado em",-1)),t("span",Sr,r(Et(d.value.dealUpdateTime)),1)]),t("div",Or,[e[193]||(e[193]=t("span",{class:"detail-label"},"Ãšltima sync",-1)),t("span",Ir,r(Et(d.value.pipedriveSyncedAt)),1)])])])]),t("div",Fr,[t("div",{class:"modal__footer-left"},[t("button",{class:"btn btn--outline",onClick:Mt},"Fechar")]),t("div",Lr,[T.value&&T.value.pdfBase64?(i(),l("button",{key:0,class:"btn btn--info",onClick:Ca},[e[195]||(e[195]=t("svg",{class:"btn__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t("polyline",{points:"7 10 12 15 17 10"}),t("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)),x(" Ver Proposta v"+r(T.value.versao),1)])):m("",!0),T.value?(i(),l("button",{key:1,class:"btn btn--success",onClick:Ea,disabled:He.value},[He.value?(i(),l("span",Vr,"Enviando...")):(i(),l("span",Rr,[e[196]||(e[196]=t("svg",{class:"btn__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),t("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})],-1)),x(" Enviar Proposta v"+r(T.value.versao),1)]))],8,$r)):m("",!0),T.value?(i(),l("button",{key:2,class:"btn btn--info",onClick:Aa,disabled:Ge.value},[Ge.value?(i(),l("span",Ur,"Gerando HTML...")):(i(),l("span",jr,[...e[197]||(e[197]=[t("svg",{class:"btn__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),t("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})],-1),x(" Gerar Link HTML ",-1)])]))],8,Br)):m("",!0),t("button",{class:"btn btn--gold",onClick:xa,disabled:Vt.value},[Vt.value?(i(),l("span",qr,"Gerando...")):(i(),l("span",Hr,[...e[198]||(e[198]=[t("svg",{class:"btn__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),x(" Gerar Proposta ",-1)])]))],8,zr),t("button",{class:"btn btn--secondary",onClick:e[71]||(e[71]=o=>Lt(d.value))},[...e[199]||(e[199]=[t("svg",{class:"btn__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})],-1),x(" WhatsApp ",-1)])])]),xe.value?(i(),l("div",Gr,[t("div",{class:"html-link-box__header"},[e[201]||(e[201]=t("span",null,[t("svg",{class:"html-link-box__icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),t("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]),x(" Link da proposta com tracking: ")],-1)),t("button",{class:"btn btn--small btn--secondary",onClick:Na},[...e[200]||(e[200]=[t("svg",{class:"btn__icon--small",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),t("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})],-1),x(" Copiar ",-1)])])]),t("a",{href:xe.value,target:"_blank",class:"html-link-box__url"},r(xe.value),9,Wr)])):m("",!0)])])])):m("",!0)])),(i(),pe(me,{to:"body"},[G.value?(i(),l("div",{key:0,class:"modal-overlay",onClick:$(ot,["self"])},[t("div",Kr,[t("div",{class:"modal__header"},[e[202]||(e[202]=t("h2",{class:"modal__title"},"ðŸš€ Novo Lead",-1)),t("button",{class:"modal__close",onClick:ot},"âœ•")]),t("div",Jr,[t("div",Zr,[e[203]||(e[203]=t("label",{class:"form-label"},"Nome do Cliente *",-1)),_(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[72]||(e[72]=o=>h.value.cliente=o),placeholder:"Ex: JoÃ£o Silva"},null,512),[[y,h.value.cliente]])]),t("div",Qr,[t("div",Xr,[e[204]||(e[204]=t("label",{class:"form-label"},"Telefone *",-1)),_(t("input",{type:"tel",class:"form-input","onUpdate:modelValue":e[73]||(e[73]=o=>h.value.personPhone=o),placeholder:"(11) 99999-9999"},null,512),[[y,h.value.personPhone]])]),t("div",Yr,[e[205]||(e[205]=t("label",{class:"form-label"},"E-mail",-1)),_(t("input",{type:"email",class:"form-input","onUpdate:modelValue":e[74]||(e[74]=o=>h.value.personEmail=o),placeholder:"email@exemplo.com"},null,512),[[y,h.value.personEmail]])])]),t("div",ed,[t("div",td,[e[206]||(e[206]=t("label",{class:"form-label"},"Cidade",-1)),_(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[75]||(e[75]=o=>h.value.cidade=o),placeholder:"Ex: SÃ£o Paulo"},null,512),[[y,h.value.cidade]])]),t("div",od,[e[207]||(e[207]=t("label",{class:"form-label"},"Metragem (mÂ²)",-1)),_(t("input",{type:"number",class:"form-input","onUpdate:modelValue":e[76]||(e[76]=o=>h.value.m2Total=o),placeholder:"Ex: 150"},null,512),[[y,h.value.m2Total]])])]),t("div",ad,[e[208]||(e[208]=t("label",{class:"form-label"},"EndereÃ§o",-1)),_(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[77]||(e[77]=o=>h.value.endereco=o),placeholder:"Rua, nÃºmero, bairro"},null,512),[[y,h.value.endereco]])]),t("div",sd,[t("div",id,[e[210]||(e[210]=t("label",{class:"form-label"},"Tipo de Cliente",-1)),_(t("select",{class:"form-select","onUpdate:modelValue":e[78]||(e[78]=o=>h.value.tipoCliente=o)},[...e[209]||(e[209]=[t("option",{value:"FINAL"},"Cliente Final",-1),t("option",{value:"ARQUITETO"},"Arquiteto",-1),t("option",{value:"CONSTRUTORA"},"Construtora",-1),t("option",{value:"DESIGNER"},"Designer",-1)])],512),[[ve,h.value.tipoCliente]])]),t("div",ld,[e[212]||(e[212]=t("label",{class:"form-label"},"Origem",-1)),_(t("select",{class:"form-select","onUpdate:modelValue":e[79]||(e[79]=o=>h.value.origem=o)},[...e[211]||(e[211]=[t("option",{value:"CRM_MANUAL"},"Cadastro Manual",-1),t("option",{value:"INDICACAO"},"IndicaÃ§Ã£o",-1),t("option",{value:"SITE"},"Site",-1),t("option",{value:"INSTAGRAM"},"Instagram",-1),t("option",{value:"WHATSAPP"},"WhatsApp",-1)])],512),[[ve,h.value.origem]])])]),t("div",nd,[e[213]||(e[213]=t("label",{class:"form-label"},"Detalhes / ObservaÃ§Ãµes",-1)),_(t("textarea",{class:"form-input","onUpdate:modelValue":e[80]||(e[80]=o=>h.value.detalhes=o),placeholder:"InformaÃ§Ãµes adicionais sobre o lead...",rows:"3"},null,512),[[y,h.value.detalhes]])])]),t("div",rd,[t("button",{class:"btn btn--outline",onClick:ot},"Cancelar"),t("button",{class:"btn btn--primary",onClick:ea,disabled:!h.value.cliente||!h.value.personPhone}," Criar Lead ",8,dd)])])])):m("",!0)])),(i(),pe(me,{to:"body"},[ne.value?(i(),l("div",{key:0,class:"modal-overlay modal-overlay--large",onClick:e[82]||(e[82]=$(o=>ne.value=!1,["self"]))},[t("div",cd,[t("div",ud,[e[214]||(e[214]=t("h2",{class:"modal__title"},"âš™ï¸ Configurar Pipeline",-1)),t("button",{class:"modal__close",onClick:e[81]||(e[81]=o=>ne.value=!1)},"âœ•")]),t("div",pd,[Be(Ns,{stages:Mo.value,onSave:Da,onReset:Sa},null,8,["stages"])])])])):m("",!0)])),(i(),pe(me,{to:"body"},[fe.value?(i(),l("div",{key:0,class:"modal-overlay",onClick:e[85]||(e[85]=$(o=>fe.value=!1,["self"]))},[t("div",vd,[t("div",md,[e[215]||(e[215]=t("h3",null,"Selecionar Especialista",-1)),t("button",{class:"modal__close",onClick:e[83]||(e[83]=o=>fe.value=!1)},"âœ•")]),t("div",gd,[t("button",{class:P(["specialist-option",{"specialist-option--active":!O.value}]),onClick:e[84]||(e[84]=o=>to(""))},[e[216]||(e[216]=t("span",{class:"specialist-option__name"},"TODOS",-1)),t("span",hd,r(N.value.length)+" deals",1)],2),(i(!0),l(M,null,S(zt.value,o=>(i(),l("button",{key:o,class:P(["specialist-option",{"specialist-option--active":O.value===o}]),onClick:s=>to(o)},[t("span",_d,r(Ro(o)),1),t("span",yd,r(o),1),t("span",wd,r(Yo(o))+" deals",1)],10,fd))),128))])])])):m("",!0)])),(i(),pe(me,{to:"body"},[ft.value?(i(),l("div",{key:0,class:"modal-overlay",onClick:$(at,["self"])},[t("div",bd,[t("div",{class:"modal__header"},[e[217]||(e[217]=t("h2",{class:"modal__title"},"ðŸ“Ž Adicionar Anexo",-1)),t("button",{class:"modal__close",onClick:at},"âœ•")]),t("div",kd,[t("div",xd,[e[218]||(e[218]=t("label",{class:"form-label"},"Tipo *",-1)),_(t("select",{class:"form-select","onUpdate:modelValue":e[86]||(e[86]=o=>F.value.tipo=o)},[(i(),l(M,null,S(Ut,o=>t("option",{key:o.value,value:o.value},r(o.label),9,Cd)),64))],512),[[ve,F.value.tipo]])]),t("div",Ed,[e[219]||(e[219]=t("label",{class:"form-label"},"Arquivo",-1)),t("input",{type:"file",class:"form-input",onChange:pa,accept:"*/*"},null,32),e[220]||(e[220]=t("p",{class:"form-hint"},"MÃ¡ximo 10MB. PDF, imagens, documentos.",-1))]),t("div",Ad,[e[221]||(e[221]=t("label",{class:"form-label"},"Nome *",-1)),_(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[87]||(e[87]=o=>F.value.nome=o),placeholder:"Nome do arquivo"},null,512),[[y,F.value.nome]])]),t("div",Nd,[e[222]||(e[222]=t("label",{class:"form-label"},"DescriÃ§Ã£o",-1)),_(t("textarea",{class:"form-textarea","onUpdate:modelValue":e[88]||(e[88]=o=>F.value.descricao=o),placeholder:"DescriÃ§Ã£o opcional...",rows:"2"},null,512),[[y,F.value.descricao]])])]),t("div",Td,[t("button",{class:"btn btn--outline",onClick:at},"Cancelar"),t("button",{class:"btn btn--primary",onClick:va,disabled:!F.value.nome}," Adicionar Anexo ",8,Md)])])])):m("",!0)])),(i(),pe(me,{to:"body"},[_t.value?(i(),l("div",{key:0,class:"modal-overlay",onClick:$(st,["self"])},[t("div",Pd,[t("div",{class:"modal__header"},[e[224]||(e[224]=t("h2",{class:"modal__title"},[t("svg",{class:"modal__title-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),t("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]),x(" Registrar OrÃ§amento Enviado ")],-1)),t("button",{class:"modal__close",onClick:st},[...e[223]||(e[223]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),t("div",Dd,[t("div",Sd,[t("div",Od,[e[225]||(e[225]=t("label",{class:"form-label"},"Data de Envio *",-1)),_(t("input",{type:"date",class:"form-input","onUpdate:modelValue":e[89]||(e[89]=o=>D.value.dataEnvio=o)},null,512),[[y,D.value.dataEnvio]])]),t("div",Id,[e[226]||(e[226]=t("label",{class:"form-label"},"Valor (R$)",-1)),_(t("input",{type:"number",class:"form-input","onUpdate:modelValue":e[90]||(e[90]=o=>D.value.valor=o),step:"0.01"},null,512),[[y,D.value.valor]])])]),t("div",Fd,[t("div",Ld,[e[227]||(e[227]=t("label",{class:"form-label"},"Metragem (mÂ²)",-1)),_(t("input",{type:"number",class:"form-input","onUpdate:modelValue":e[91]||(e[91]=o=>D.value.metragem=o),step:"0.01"},null,512),[[y,D.value.metragem]])]),T.value?(i(),l("div",$d,[e[229]||(e[229]=t("label",{class:"form-label"},"Vincular Proposta",-1)),_(t("select",{class:"form-select","onUpdate:modelValue":e[92]||(e[92]=o=>D.value.propostaId=o)},[e[228]||(e[228]=t("option",{value:""},"Nenhuma",-1)),t("option",{value:T.value.id},"Proposta v"+r(T.value.versao),9,Vd)],512),[[ve,D.value.propostaId]])])):m("",!0)]),t("div",Rd,[e[230]||(e[230]=t("label",{class:"form-label"},"DescriÃ§Ã£o",-1)),_(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[93]||(e[93]=o=>D.value.descricao=o),placeholder:"Ex: OrÃ§amento enviado por email"},null,512),[[y,D.value.descricao]])]),t("div",Bd,[e[231]||(e[231]=t("label",{class:"form-label"},"ObservaÃ§Ãµes",-1)),_(t("textarea",{class:"form-textarea","onUpdate:modelValue":e[94]||(e[94]=o=>D.value.observacoes=o),placeholder:"ObservaÃ§Ãµes adicionais...",rows:"2"},null,512),[[y,D.value.observacoes]])])]),t("div",Ud,[t("button",{class:"btn btn--outline",onClick:st},"Cancelar"),t("button",{class:"btn btn--primary",onClick:wa,disabled:!D.value.dataEnvio}," Registrar Envio ",8,jd)])])])):m("",!0)])),(i(),pe(me,{to:"body"},[ut.value?(i(),l("div",{key:0,class:"modal-overlay modal-overlay--dark",onClick:$(St,["self"])},[t("div",zd,[t("div",qd,[e[233]||(e[233]=t("h2",{class:"modal__title"},[t("svg",{class:"modal__title-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("polygon",{points:"10 8 16 12 10 16 10 8"})]),x(" GravaÃ§Ã£o de SessÃ£o ")],-1)),re.value?(i(),l("div",Hd,[t("span",Gd,r(re.value.deviceType==="mobile"?"ðŸ“±":re.value.deviceType==="tablet"?"ðŸ“Ÿ":"ðŸ’»")+" "+r(re.value.screenWidth)+"x"+r(re.value.screenHeight),1),t("span",Wd,r(ye(re.value.duration||0)),1)])):m("",!0),t("button",{class:"modal__close",onClick:St},[...e[232]||(e[232]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),t("div",Kd,[pt.value?(i(),l("div",Jd,[...e[234]||(e[234]=[t("div",{class:"replay-loading__spinner"},null,-1),t("span",null,"Carregando gravaÃ§Ã£o...",-1)])])):Pe.value.length>0?(i(),l("div",{key:1,class:"replay-player-container",ref_key:"replayContainer",ref:rt},[...e[235]||(e[235]=[t("div",{id:"rrweb-player"},null,-1)])],512)):(i(),l("div",Zd," Nenhum evento encontrado nesta gravaÃ§Ã£o. "))]),t("div",Qd,[t("div",Xd,[t("button",{class:"replay-footer-btn replay-footer-btn--play",onClick:la,title:de.value?"Pausar":"Reproduzir"},r(de.value?"â¸":"â–¶"),9,Yd),t("input",{type:"range",class:"replay-footer-progress",min:"0",max:"100",value:vt.value,onInput:e[95]||(e[95]=o=>na(o))},null,40,ec),t("span",tc,r(mt.value)+" / "+r(Bt.value),1),t("button",{class:P(["replay-footer-btn replay-footer-btn--skip",{active:Se.value}]),onClick:da,title:"Pular perÃ­odos inativos"},"â©",2),t("div",oc,[(i(),l(M,null,S([1,2,4],o=>t("button",{key:o,class:P(["replay-footer-btn replay-footer-btn--speed",{active:gt.value===o}]),onClick:s=>ra(o)},r(o)+"x",11,ac)),64))])]),t("button",{class:"btn btn--outline",onClick:St},"Fechar")])])])):m("",!0)])),(i(),pe(me,{to:"body"},[De.value?(i(),l("div",{key:0,class:"modal-overlay",onClick:e[98]||(e[98]=$(o=>De.value=!1,["self"]))},[t("div",sc,[t("div",ic,[e[237]||(e[237]=t("h2",{class:"modal__title"},[t("svg",{class:"modal__title-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M3 3v18h18"}),t("path",{d:"M8 17V9"}),t("path",{d:"M12 17V5"}),t("path",{d:"M16 17v-4"}),t("path",{d:"M20 17v-8"})]),x(" Tempo por PÃ¡gina ")],-1)),t("button",{class:"modal__close",onClick:e[96]||(e[96]=o=>De.value=!1)},[...e[236]||(e[236]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),t("div",lc,[V.value?(i(),l("div",nc,[t("span",rc,r(V.value.deviceType==="mobile"?"ðŸ“±":V.value.deviceType==="tablet"?"ðŸ“Ÿ":"ðŸ’»"),1),t("span",dc,r(tt(V.value.viewedAt)),1),t("span",cc," Total: "+r(ye(V.value.timeOnPage)),1)])):m("",!0),V.value?.pageTimes&&Object.keys(V.value.pageTimes).length>0?(i(),l("div",uc,[(i(!0),l(M,null,S(V.value.pageTimes,(o,s)=>(i(),l("div",{key:s,class:"page-time-bar"},[t("span",pc,"PÃ¡gina "+r(s),1),t("div",vc,[t("div",{class:"page-time-bar__fill",style:ie({width:sa(o)+"%"})},null,4)]),t("span",mc,r(ye(o)),1)]))),128))])):m("",!0),!V.value?.pageTimes||Object.keys(V.value.pageTimes).length===0?(i(),l("div",gc,[...e[238]||(e[238]=[t("p",null,"Dados detalhados de pÃ¡ginas nÃ£o disponÃ­veis para esta sessÃ£o.",-1),t("p",{class:"page-times-empty__hint"},"SessÃµes muito curtas podem nÃ£o ter tempo suficiente para coletar dados por pÃ¡gina.",-1)])])):m("",!0),V.value?.pagesViewed&&V.value.pagesViewed.length>0?(i(),l("div",hc,[e[239]||(e[239]=t("span",{class:"page-times-pages__label"},"PÃ¡ginas vistas:",-1)),t("span",fc,r(Array.isArray(V.value.pagesViewed)?V.value.pagesViewed.join(", "):V.value.pagesViewed),1)])):m("",!0)]),t("div",_c,[t("button",{class:"btn btn--outline",onClick:e[97]||(e[97]=o=>De.value=!1)},"Fechar")])])])):m("",!0)])),Y.value.length>0||bt.value.length>0?(i(),l("div",yc,[Y.value.length>0?(i(),l("div",wc,[t("div",bc,[e[240]||(e[240]=t("span",{class:"proposal-notifications__icon"},"ðŸ‘ï¸",-1)),e[241]||(e[241]=t("span",{class:"proposal-notifications__title"},"Visualizando Agora",-1)),t("span",kc,r(Y.value.length),1)]),t("div",xc,[(i(!0),l(M,null,S(Y.value,o=>(i(),l("div",{key:o.sessionId,class:"proposal-notification proposal-notification--live",onClick:s=>Ve(o.leadId)},[t("div",Ec,r(o.clientName?.charAt(0)?.toUpperCase()||"?"),1),t("div",Ac,[t("span",Nc,r(o.clientName),1),t("span",Tc,[t("span",Mc,r(ye(o.timeOnPage)),1),t("span",Pc,r(o.deviceType==="mobile"?"ðŸ“±":"ðŸ’»"),1),t("span",Dc,r(o.scrollDepth)+"%",1)])]),e[242]||(e[242]=t("div",{class:"proposal-notification__pulse"},null,-1))],8,Cc))),128))])])):m("",!0),bt.value.length>0?(i(),l("div",Sc,[e[243]||(e[243]=t("div",{class:"proposal-notifications__header"},[t("span",{class:"proposal-notifications__icon"},"ðŸ“‹"),t("span",{class:"proposal-notifications__title"},"HistÃ³rico")],-1)),t("div",Oc,[(i(!0),l(M,null,S(bt.value.slice(0,5),o=>(i(),l("div",{key:o.id,class:P(["proposal-notification proposal-notification--history",{"proposal-notification--closed":o.type==="closed"}]),onClick:s=>Ve(o.leadId)},[t("div",Fc,r(o.type==="opened"?"ðŸŸ¢":"ðŸ”´"),1),t("div",Lc,[t("span",$c,r(o.clientName),1),t("span",Vc,[x(r(o.type==="opened"?"Abriu":"Fechou")+" ",1),o.timeOnPage?(i(),l(M,{key:0},[x(" â€¢ "+r(ye(o.timeOnPage)),1)],64)):m("",!0)])]),t("button",{class:"proposal-notification__dismiss",onClick:$(s=>qa(o.id),["stop"]),title:"Dispensar"},"Ã—",8,Rc)],10,Ic))),128))])])):m("",!0)])):m("",!0),K.value?(i(),l("div",Bc,[...e[244]||(e[244]=[ae('<div class="loading-content" data-v-7026c116><div class="infinity-track-container" data-v-7026c116><svg class="infinity-track" viewBox="0 0 240 100" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-7026c116><defs data-v-7026c116><path id="infinityPath" d="M120,50 C120,75 160,75 160,50 C160,25 120,25 120,50 C120,75 80,75 80,50 C80,25 120,25 120,50" data-v-7026c116></path></defs><use href="#infinityPath" stroke="#1a1a1a" stroke-width="3" fill="none" data-v-7026c116></use><circle r="4" fill="#888" data-v-7026c116><animateMotion dur="3.5s" repeatCount="indefinite" rotate="auto" begin="-0.1s" data-v-7026c116><mpath href="#infinityPath" data-v-7026c116></mpath></animateMotion><animate attributeName="r" values="3;7;12" dur="0.6s" repeatCount="indefinite" data-v-7026c116></animate><animate attributeName="opacity" values="0.5;0.2;0" dur="0.6s" repeatCount="indefinite" data-v-7026c116></animate><animate attributeName="cy" values="-8;-20;-35" dur="0.6s" repeatCount="indefinite" data-v-7026c116></animate></circle><g data-v-7026c116><animateMotion dur="3.5s" repeatCount="indefinite" rotate="auto" data-v-7026c116><mpath href="#infinityPath" data-v-7026c116></mpath></animateMotion><g transform="scale(-0.4, 0.4) translate(-32, -20)" data-v-7026c116><rect x="18" y="0" width="6" height="8" fill="#1a1a1a" data-v-7026c116></rect><rect x="12" y="6" width="24" height="14" rx="2" fill="#1a1a1a" data-v-7026c116></rect><rect x="36" y="2" width="14" height="18" fill="#1a1a1a" data-v-7026c116></rect><rect x="38" y="4" width="4" height="4" fill="#FFE566" data-v-7026c116></rect><rect x="44" y="4" width="4" height="4" fill="#FFE566" data-v-7026c116></rect><circle cx="18" cy="22" r="5" fill="#1a1a1a" data-v-7026c116></circle><circle cx="18" cy="22" r="2" fill="#c9a962" data-v-7026c116></circle><circle cx="30" cy="22" r="5" fill="#1a1a1a" data-v-7026c116></circle><circle cx="30" cy="22" r="2" fill="#c9a962" data-v-7026c116></circle><circle cx="44" cy="22" r="4" fill="#1a1a1a" data-v-7026c116></circle><circle cx="44" cy="22" r="1.5" fill="#c9a962" data-v-7026c116></circle><rect x="8" y="10" width="4" height="6" rx="1" fill="#FFE566" data-v-7026c116></rect><rect x="14" y="12" width="20" height="2" fill="#c9a962" data-v-7026c116></rect><rect x="36" y="16" width="14" height="2" fill="#c9a962" data-v-7026c116></rect></g></g></svg></div><div class="loading-text" data-v-7026c116><span class="loading-title" data-v-7026c116>Carregando Pipeline</span><div class="loading-dots" data-v-7026c116><span class="dot" data-v-7026c116></span><span class="dot" data-v-7026c116></span><span class="dot" data-v-7026c116></span></div></div><div class="loading-progress" data-v-7026c116><div class="loading-progress-bar" data-v-7026c116></div></div></div>',1)])])):m("",!0)]))}}),Kc=_o(qc,[["__scopeId","data-v-7026c116"]]);export{Kc as default};

<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gerador de Propostas - Monofloor</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- FUNÃ‡Ã•ES GLOBAIS - DEFINIDAS PRIMEIRO PARA oninput funcionar -->
  <script>
    console.log('âœ… HEAD SCRIPT: Definindo window.calcularPrecos COMPLETO...');

    const MAO_OBRA_M2 = 120;
    const IMPOSTOS_PERCENT = 0.17;
    let pisoProduto = 'stelion'; // Produto selecionado para o piso

    function formatarMoeda(valor) {
      return valor.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    }

    // FunÃ§Ã£o simples para alternar produto do piso
    window.togglePisoProduto = function(produto) {
      pisoProduto = produto;
      const btnS = document.getElementById('pisoProdutoStelion');
      const btnL = document.getElementById('pisoProdutoLilit');
      if (produto === 'stelion') {
        btnS.classList.add('active');
        btnL.classList.remove('active');
      } else {
        btnL.classList.add('active');
        btnS.classList.remove('active');
      }
      window.calcularPrecos();
    };

    window.calcularPrecos = function() {
      console.log('ðŸ”„ calcularPrecos() CHAMADA - ATUALIZANDO PAGINA INTEIRA!');

      const precoBaseStelion = parseFloat(document.getElementById('precoBaseStelion')?.value) || 910;
      const precoBaseLilit = parseFloat(document.getElementById('precoBaseLilit')?.value) || 590;

      const metrosPiso = parseFloat(document.getElementById('metrosPiso')?.value) || 0;
      const metrosParede = parseFloat(document.getElementById('metrosParede')?.value) || 0;
      const metrosTeto = parseFloat(document.getElementById('metrosTeto')?.value) || 0;
      const metrosBancadas = parseFloat(document.getElementById('metrosBancadas')?.value) || 0;
      const metrosEscadas = parseFloat(document.getElementById('metrosEscadas')?.value) || 0;
      const metrosEspeciaisPequenos = parseFloat(document.getElementById('metrosEspeciaisPequenos')?.value) || 0;
      const metrosEspeciaisGrandes = parseFloat(document.getElementById('metrosEspeciaisGrandes')?.value) || 0;
      const metrosPiscina = parseFloat(document.getElementById('metrosPiscina')?.value) || 0;

      let valorTotalStelion = 0;
      let valorTotalLilit = 0;
      let metragemTotalStelion = 0;
      let metragemTotalLilit = 0;

      // PISO â†’ STELION ou LILIT (dependendo da seleÃ§Ã£o do usuÃ¡rio)
      if (metrosPiso > 0) {
        const metrosComPerda = metrosPiso / 0.9;
        if (pisoProduto === 'stelion') {
          valorTotalStelion += metrosComPerda * precoBaseStelion * 1.0;
          metragemTotalStelion += metrosComPerda;
        } else {
          // LILIT para piso usa multiplicador 1.0x (mesmo que parede usa 0.8x)
          valorTotalLilit += metrosComPerda * precoBaseLilit * 1.0;
          metragemTotalLilit += metrosComPerda;
        }
      }

      // PAREDE â†’ LILIT (0.8x)
      if (metrosParede > 0) {
        const metrosComPerda = metrosParede / 0.9;
        valorTotalLilit += metrosComPerda * precoBaseLilit * 0.8;
        metragemTotalLilit += metrosComPerda;
      }

      // TETO â†’ LILIT (0.8x)
      if (metrosTeto > 0) {
        const metrosComPerda = metrosTeto / 0.9;
        valorTotalLilit += metrosComPerda * precoBaseLilit * 0.8;
        metragemTotalLilit += metrosComPerda;
      }

      // ESPECIAIS PEQUENOS â†’ STELION (0.5x)
      if (metrosEspeciaisPequenos > 0) {
        const metrosComPerda = metrosEspeciaisPequenos / 0.9;
        valorTotalStelion += metrosComPerda * precoBaseStelion * 0.5;
        metragemTotalStelion += metrosComPerda;
      }

      // ESPECIAIS GRANDES â†’ STELION (1.5x)
      if (metrosEspeciaisGrandes > 0) {
        const metrosComPerda = metrosEspeciaisGrandes / 0.9;
        valorTotalStelion += metrosComPerda * precoBaseStelion * 1.5;
        metragemTotalStelion += metrosComPerda;
      }

      // BANCADAS â†’ STELION (1.5x)
      if (metrosBancadas > 0) {
        const metrosComPerda = metrosBancadas / 0.9;
        valorTotalStelion += metrosComPerda * precoBaseStelion * 1.5;
        metragemTotalStelion += metrosComPerda;
      }

      // ESCADAS â†’ STELION (1.5x)
      if (metrosEscadas > 0) {
        const metrosComPerda = metrosEscadas / 0.9;
        valorTotalStelion += metrosComPerda * precoBaseStelion * 1.5;
        metragemTotalStelion += metrosComPerda;
      }

      // PISCINA â†’ STELION (1.5x)
      if (metrosPiscina > 0) {
        const metrosComPerda = metrosPiscina / 0.9;
        valorTotalStelion += metrosComPerda * precoBaseStelion * 1.5;
        metragemTotalStelion += metrosComPerda;
      }

      // Calcular totais gerais
      const metragemOriginalTotal = metrosPiso + metrosParede + metrosTeto + metrosBancadas + metrosEscadas + metrosEspeciaisPequenos + metrosEspeciaisGrandes + metrosPiscina;
      const metragemComPerdaTotal = metragemTotalStelion + metragemTotalLilit;
      const valorGeral = valorTotalStelion + valorTotalLilit;

      // 1. ATUALIZAR RESUMO DE METRAGEM (topo)
      const metragemOriginalEl = document.getElementById('metragemOriginal');
      const metragemTotalEl = document.getElementById('metragemTotal');
      if (metragemOriginalEl) metragemOriginalEl.textContent = metragemOriginalTotal.toFixed(2) + ' mÂ²';
      if (metragemTotalEl) metragemTotalEl.textContent = metragemComPerdaTotal.toFixed(2) + ' mÂ²';

      // 2. CALCULAR E ATUALIZAR COMPOSIÃ‡ÃƒO DE PREÃ‡OS - STELION
      const impostosStelion = valorTotalStelion * IMPOSTOS_PERCENT;
      const maoObraStelion = MAO_OBRA_M2 * metragemTotalStelion;
      const materiaisStelion = valorTotalStelion - impostosStelion - maoObraStelion;

      const metragemTotalStelionDisplayEl = document.getElementById('metragemTotalStelionDisplay');
      const materiaisStelionEl = document.getElementById('materiaisStelion');
      const maoObraStelionEl = document.getElementById('maoObraStelion');
      const impostosStelionEl = document.getElementById('impostosStelion');
      const totalStelionEl = document.getElementById('totalStelion');

      if (metragemTotalStelionDisplayEl) metragemTotalStelionDisplayEl.textContent = metragemTotalStelion.toFixed(2);
      if (materiaisStelionEl) materiaisStelionEl.textContent = formatarMoeda(materiaisStelion);
      if (maoObraStelionEl) maoObraStelionEl.textContent = formatarMoeda(maoObraStelion);
      if (impostosStelionEl) impostosStelionEl.textContent = formatarMoeda(impostosStelion);
      if (totalStelionEl) totalStelionEl.textContent = formatarMoeda(valorTotalStelion);

      // 3. CALCULAR E ATUALIZAR COMPOSIÃ‡ÃƒO DE PREÃ‡OS - LILIT
      const impostosLilit = valorTotalLilit * IMPOSTOS_PERCENT;
      const maoObraLilit = MAO_OBRA_M2 * metragemTotalLilit;
      const materiaisLilit = valorTotalLilit - impostosLilit - maoObraLilit;

      const metragemTotalLilitDisplayEl = document.getElementById('metragemTotalLilitDisplay');
      const materiaisLilitEl = document.getElementById('materiaisLilit');
      const maoObraLilitEl = document.getElementById('maoObraLilit');
      const impostosLilitEl = document.getElementById('impostosLilit');
      const totalLilitEl = document.getElementById('totalLilit');

      if (metragemTotalLilitDisplayEl) metragemTotalLilitDisplayEl.textContent = metragemTotalLilit.toFixed(2);
      if (materiaisLilitEl) materiaisLilitEl.textContent = formatarMoeda(materiaisLilit);
      if (maoObraLilitEl) maoObraLilitEl.textContent = formatarMoeda(maoObraLilit);
      if (impostosLilitEl) impostosLilitEl.textContent = formatarMoeda(impostosLilit);
      if (totalLilitEl) totalLilitEl.textContent = formatarMoeda(valorTotalLilit);

      // 4. ATUALIZAR RESUMO GERAL
      const resumoTotalStelionEl = document.getElementById('resumoTotalStelion');
      const resumoMetragemStelionEl = document.getElementById('resumoMetragemStelion');
      const resumoTotalLilitEl = document.getElementById('resumoTotalLilit');
      const resumoMetragemLilitEl = document.getElementById('resumoMetragemLilit');
      const resumoTotalGeralEl = document.getElementById('resumoTotalGeral');
      const resumoMetragemGeralEl = document.getElementById('resumoMetragemGeral');

      if (resumoTotalStelionEl) resumoTotalStelionEl.textContent = formatarMoeda(valorTotalStelion);
      if (resumoMetragemStelionEl) resumoMetragemStelionEl.textContent = metragemTotalStelion.toFixed(2);
      if (resumoTotalLilitEl) resumoTotalLilitEl.textContent = formatarMoeda(valorTotalLilit);
      if (resumoMetragemLilitEl) resumoMetragemLilitEl.textContent = metragemTotalLilit.toFixed(2);
      if (resumoTotalGeralEl) resumoTotalGeralEl.textContent = formatarMoeda(valorGeral);
      if (resumoMetragemGeralEl) resumoMetragemGeralEl.textContent = metragemComPerdaTotal.toFixed(2);

      // Calcular e atualizar valor mÃ©dio por mÂ² (separado por produto)
      const valorMedioM2StelionEl = document.getElementById('valorMedioM2Stelion');
      const valorMedioM2LilitEl = document.getElementById('valorMedioM2Lilit');

      const valorMedioM2Stelion = metragemTotalStelion > 0 ? valorTotalStelion / metragemTotalStelion : 0;
      const valorMedioM2Lilit = metragemTotalLilit > 0 ? valorTotalLilit / metragemTotalLilit : 0;

      if (valorMedioM2StelionEl) valorMedioM2StelionEl.textContent = formatarMoeda(valorMedioM2Stelion);
      if (valorMedioM2LilitEl) valorMedioM2LilitEl.textContent = formatarMoeda(valorMedioM2Lilit);

      // 5. CALCULAR E ATUALIZAR CONDIÃ‡Ã•ES DE PAGAMENTO
      const percentualRT = parseFloat(document.getElementById('percentualRT')?.value) || 10;
      const descontoVista = parseFloat(document.getElementById('descontoVista')?.value) || 5;
      const percentualEntrada = parseFloat(document.getElementById('percentualEntrada')?.value) || 50;
      const numeroParcelas = parseInt(document.getElementById('numeroParcelas')?.value) || 2;

      // Aplicar RT (RetenÃ§Ã£o TÃ©cnica) ao valor total
      // RT 10% Ã© o valor neutro (jÃ¡ embutido nos preÃ§os base)
      // Valores acima de 10% aumentam o preÃ§o, abaixo diminuem
      const valorGeralComRT = valorGeral * (1 + (percentualRT - 10) / 100);

      // Ã€ VISTA (com desconto)
      const valorAVista = valorGeralComRT * (1 - descontoVista / 100);
      const economiaVista = valorGeralComRT - valorAVista;

      // PARCELADO (sem juros - apenas divisÃ£o do valor)
      const valorEntrada = valorGeralComRT * (percentualEntrada / 100);
      const valorSaldo = valorGeralComRT - valorEntrada;
      const valorParcela = valorSaldo / numeroParcelas;
      const totalParcelado = valorGeralComRT; // Sem juros

      // CARTÃƒO DE CRÃ‰DITO
      // Taxa total = Taxa de transaÃ§Ã£o + (Taxa por parcela Ã— NÃºmero de parcelas)
      const taxaTransacaoCartao = parseFloat(document.getElementById('taxaTransacaoCartao')?.value) || 2.36;
      const taxaPorParcelaCartao = parseFloat(document.getElementById('taxaPorParcelaCartao')?.value) || 1;
      const numeroParcelasCartao = parseInt(document.getElementById('numeroParcelasCartao')?.value) || 6;
      const totalJurosCartao = taxaTransacaoCartao + (taxaPorParcelaCartao * numeroParcelasCartao);
      const valorTotalCartao = valorGeralComRT * (1 + totalJurosCartao / 100);
      const valorParcelaCartao = valorTotalCartao / numeroParcelasCartao;

      // Atualizar DOM - Pagamento
      const valorAVistaEl = document.getElementById('valorAVista');
      const economiaVistaEl = document.getElementById('economiaVista');
      const valorEntradaEl = document.getElementById('valorEntrada');
      const valorParcelaEl = document.getElementById('valorParcela');
      const numParcelasDisplayEl = document.getElementById('numParcelasDisplay');
      const totalParceladoEl = document.getElementById('totalParcelado');
      const tituloAVistaEl = document.getElementById('tituloAVista');
      const tituloParceladoEl = document.getElementById('tituloParcelado');
      const valorParcelaCartaoEl = document.getElementById('valorParcelaCartao');
      const numParcelasCartaoDisplayEl = document.getElementById('numParcelasCartaoDisplay');
      const totalCartaoEl = document.getElementById('totalCartao');
      const totalJurosCartaoEl = document.getElementById('totalJurosCartao');
      const tituloCartaoEl = document.getElementById('tituloCartao');

      if (valorAVistaEl) valorAVistaEl.textContent = formatarMoeda(valorAVista);
      if (economiaVistaEl) economiaVistaEl.textContent = formatarMoeda(economiaVista);
      if (valorEntradaEl) valorEntradaEl.textContent = formatarMoeda(valorEntrada);
      if (valorParcelaEl) valorParcelaEl.textContent = formatarMoeda(valorParcela);
      if (numParcelasDisplayEl) numParcelasDisplayEl.textContent = numeroParcelas;
      if (totalParceladoEl) totalParceladoEl.textContent = formatarMoeda(totalParcelado);

      // Atualizar tÃ­tulos dos cards dinamicamente
      if (tituloAVistaEl) {
        tituloAVistaEl.textContent = `ðŸ’° Ã€ VISTA (${descontoVista}% desconto)`;
      }
      if (tituloParceladoEl) {
        tituloParceladoEl.textContent = `ðŸ’³ PARCELADO (${percentualEntrada}% entrada + ${numeroParcelas}x)`;
      }

      // Atualizar CartÃ£o de CrÃ©dito
      if (valorParcelaCartaoEl) valorParcelaCartaoEl.textContent = formatarMoeda(valorParcelaCartao);
      if (numParcelasCartaoDisplayEl) numParcelasCartaoDisplayEl.textContent = numeroParcelasCartao;
      if (totalCartaoEl) totalCartaoEl.textContent = formatarMoeda(valorTotalCartao);
      if (totalJurosCartaoEl) totalJurosCartaoEl.textContent = totalJurosCartao.toFixed(2);
      if (tituloCartaoEl) {
        tituloCartaoEl.textContent = `ðŸ’³ CARTÃƒO (${numeroParcelasCartao}x com juros)`;
      }

      console.log('âœ… PAGINA INTEIRA ATUALIZADA!');
      console.log('   STELION:', formatarMoeda(valorTotalStelion), '-', metragemTotalStelion.toFixed(2), 'mÂ²');
      console.log('   LILIT:', formatarMoeda(valorTotalLilit), '-', metragemTotalLilit.toFixed(2), 'mÂ²');
      console.log('   TOTAL (sem RT):', formatarMoeda(valorGeral), '-', metragemComPerdaTotal.toFixed(2), 'mÂ²');
      console.log('   TOTAL (com RT ' + percentualRT + '%):', formatarMoeda(valorGeralComRT));
      console.log('   Ã€ VISTA:', formatarMoeda(valorAVista), '(economia:', formatarMoeda(economiaVista), ')');
      console.log('   PARCELADO:', percentualEntrada + '% entrada +', numeroParcelas + 'x de', formatarMoeda(valorParcela));
      console.log('   CARTÃƒO:', numeroParcelasCartao + 'x de', formatarMoeda(valorParcelaCartao), '(juros:', totalJurosCartao.toFixed(2) + '%)');
    };

    console.log('âœ… HEAD SCRIPT: window.calcularPrecos COMPLETO definido!');

    // ============================================
    // GERAR PROPOSTA EM PDF
    // ============================================
    window.gerarProposta = async function() {
      console.log('ðŸ“„ GERAR PROPOSTA: Iniciando...');

      const btn = document.getElementById('btnGerarProposta');
      const status = document.getElementById('statusProposta');

      try {
        // Desabilitar botÃ£o e mostrar loading
        btn.disabled = true;
        btn.style.opacity = '0.6';
        btn.style.cursor = 'not-allowed';
        status.textContent = 'â³ Gerando proposta...';
        status.style.color = '#c9a962';

        // Coletar valores calculados
        const precoBaseStelion = parseFloat(document.getElementById('precoBaseStelion')?.value) || 910;
        const precoBaseLilit = parseFloat(document.getElementById('precoBaseLilit')?.value) || 590;

        // Valores STELION
        const valorTotalStelionEl = document.getElementById('totalStelion');
        const metragemTotalStelionEl = document.getElementById('metragemTotalStelionDisplay');
        const materiaisStelionEl = document.getElementById('materiaisStelion');
        const maoObraStelionEl = document.getElementById('maoObraStelion');
        const impostosStelionEl = document.getElementById('impostosStelion');

        // Valores LILIT
        const valorTotalLilitEl = document.getElementById('totalLilit');
        const metragemTotalLilitEl = document.getElementById('metragemTotalLilitDisplay');
        const materiaisLilitEl = document.getElementById('materiaisLilit');
        const maoObraLilitEl = document.getElementById('maoObraLilit');
        const impostosLilitEl = document.getElementById('impostosLilit');

        // Valores TOTAIS
        const valorTotalGeralEl = document.getElementById('resumoTotalGeral');
        const metragemTotalGeralEl = document.getElementById('resumoMetragemGeral');

        // Extrair valores numÃ©ricos (remover formataÃ§Ã£o)
        // parseMoeda: Para valores em formato brasileiro (R$ 1.234,56)
        const parseMoeda = (text) => {
          if (!text) return 0;
          return parseFloat(text.replace(/\./g, '').replace(',', '.')) || 0;
        };

        // parseNumero: Para valores que podem estar em formato decimal (123.45) ou brasileiro (123,45)
        const parseNumero = (text) => {
          if (!text) return 0;
          const cleaned = text.trim();
          // Se tem vÃ­rgula, Ã© formato brasileiro (ex: 1.234,56 ou 123,45)
          if (cleaned.includes(',')) {
            return parseFloat(cleaned.replace(/\./g, '').replace(',', '.')) || 0;
          }
          // Se nÃ£o tem vÃ­rgula, Ã© formato decimal padrÃ£o (ex: 123.45 ou 1234.56)
          return parseFloat(cleaned) || 0;
        };

        const metragemTotalStelion = parseNumero(metragemTotalStelionEl?.textContent);
        const materiaisStelion = parseMoeda(materiaisStelionEl?.textContent);
        const maoObraStelion = parseMoeda(maoObraStelionEl?.textContent);
        const impostosStelion = parseMoeda(impostosStelionEl?.textContent);
        const valorTotalStelion = parseMoeda(valorTotalStelionEl?.textContent);

        const metragemTotalLilit = parseNumero(metragemTotalLilitEl?.textContent);
        const materiaisLilit = parseMoeda(materiaisLilitEl?.textContent);
        const maoObraLilit = parseMoeda(maoObraLilitEl?.textContent);
        const impostosLilit = parseMoeda(impostosLilitEl?.textContent);
        const valorTotalLilit = parseMoeda(valorTotalLilitEl?.textContent);

        const metragemTotal = parseNumero(metragemTotalGeralEl?.textContent);
        const valorTotal = parseMoeda(valorTotalGeralEl?.textContent);

        // Calcular totais
        const materiaisTotal = materiaisStelion + materiaisLilit;
        const maoObraTotal = maoObraStelion + maoObraLilit;
        const impostosTotal = impostosStelion + impostosLilit;

        // Coletar dados de superfÃ­cie (piso/parede e demais)
        // IMPORTANTE: Aplicar perda de 10% (dividir por 0.9) em cada superfÃ­cie
        const metrosPiso = (parseFloat(document.getElementById('metrosPiso')?.value) || 0) / 0.9;
        const metrosParede = (parseFloat(document.getElementById('metrosParede')?.value) || 0) / 0.9;
        const metrosTeto = (parseFloat(document.getElementById('metrosTeto')?.value) || 0) / 0.9;
        const metrosBancadas = (parseFloat(document.getElementById('metrosBancadas')?.value) || 0) / 0.9;
        const metrosEscadas = (parseFloat(document.getElementById('metrosEscadas')?.value) || 0) / 0.9;
        const metrosEspeciaisPequenos = (parseFloat(document.getElementById('metrosEspeciaisPequenos')?.value) || 0) / 0.9;
        const metrosEspeciaisGrandes = (parseFloat(document.getElementById('metrosEspeciaisGrandes')?.value) || 0) / 0.9;
        const metrosPiscina = (parseFloat(document.getElementById('metrosPiscina')?.value) || 0) / 0.9;

        // Determinar qual produto recebe cada superfÃ­cie
        // pisoProduto Ã© uma variÃ¡vel global que define se o piso vai para STELION ou LILIT
        const pisoStelion = (pisoProduto === 'stelion') ? metrosPiso : 0;
        const paredeStelion = 0; // Parede nunca vai para STELION
        const pisoLilit = (pisoProduto === 'lilit') ? metrosPiso : 0;
        const paredeLilit = metrosParede; // Parede sempre vai para LILIT

        // Coletar dados do cliente para overlay na pÃ¡gina de informaÃ§Ãµes
        const clienteNome = document.getElementById('nomeCliente')?.value?.trim() || '';
        const clienteLocal = document.getElementById('endereco')?.value?.trim() || '';
        const clienteDetalhes = document.getElementById('detalhes')?.value?.trim() || '';
        // Ãrea total interna Ã© a metragem total calculada (com 10% de perda jÃ¡ incluÃ­da)
        const areaTotalInterna = metragemTotal;

        // Coletar configuraÃ§Ãµes de pagamento
        const percentualRT = parseFloat(document.getElementById('percentualRT')?.value) || 10;
        const percentualEntrada = parseFloat(document.getElementById('percentualEntrada')?.value) || 50;
        const descontoVista = parseFloat(document.getElementById('descontoVista')?.value) || 5;
        const taxaTransacaoCartao = parseFloat(document.getElementById('taxaTransacaoCartao')?.value) || 2.36;
        const taxaPorParcelaCartao = parseFloat(document.getElementById('taxaPorParcelaCartao')?.value) || 1;
        const numeroParcelasCartao = parseInt(document.getElementById('numeroParcelasCartao')?.value) || 6;

        console.log('ðŸ“Š Dados coletados:', {
          stelion: { metragem: metragemTotalStelion, piso: pisoStelion, parede: paredeStelion, materiais: materiaisStelion, maoObra: maoObraStelion, impostos: impostosStelion, total: valorTotalStelion },
          lilit: { metragem: metragemTotalLilit, piso: pisoLilit, parede: paredeLilit, materiais: materiaisLilit, maoObra: maoObraLilit, impostos: impostosLilit, total: valorTotalLilit },
          totais: { metragem: metragemTotal, materiais: materiaisTotal, maoObra: maoObraTotal, impostos: impostosTotal, total: valorTotal }
        });

        console.log('ðŸ” SUPERFÃCIES DETALHADAS:', {
          metrosTeto,
          metrosBancadas,
          metrosEscadas,
          metrosEspeciaisPequenos,
          metrosEspeciaisGrandes,
          metrosPiscina
        });

        // Fazer requisiÃ§Ã£o para API
        const API_BASE_URL = window.location.hostname === 'localhost'
          ? 'http://localhost:3000'
          : '';  // Em produÃ§Ã£o, usa a mesma origem (proxy nginx)
        const API_URL = `${API_BASE_URL}/api/proposals/generate`;

        // Construir body da requisiÃ§Ã£o
        const requestBody = {
            // STELION
            metragemTotalStelion,
            materiaisStelion,
            maoObraStelion,
            impostosStelion,
            valorTotalStelion,

            // LILIT
            metragemTotalLilit,
            materiaisLilit,
            maoObraLilit,
            impostosLilit,
            valorTotalLilit,

            // TOTAIS
            metragemTotal,
            materiaisTotal,
            maoObraTotal,
            impostosTotal,
            valorTotal,

            // PREÃ‡OS BASE
            precoBaseStelion,
            precoBaseLilit,

            // SUPERFÃCIES
            pisoStelion,
            paredeStelion,
            pisoLilit,
            paredeLilit,

            // SUPERFÃCIES DETALHADAS
            teto: metrosTeto,
            bancadas: metrosBancadas,
            escadas: metrosEscadas,
            especiaisPequenos: metrosEspeciaisPequenos,
            especiaisGrandes: metrosEspeciaisGrandes,
            piscina: metrosPiscina,

            // DADOS DO CLIENTE (para overlay na pÃ¡gina de info)
            clienteNome,
            clienteLocal,
            clienteDetalhes,
            areaTotalInterna,

            // CONFIGURAÃ‡Ã•ES DE PAGAMENTO
            percentualRT,
            percentualEntrada,
            descontoVista,
            taxaTransacaoCartao,
            taxaPorParcelaCartao,
            numeroParcelasCartao,
        };

        console.log('ðŸ“¤ REQUEST BODY COMPLETO:', JSON.stringify(requestBody, null, 2));

        const response = await fetch(API_URL, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(requestBody),
        });

        if (!response.ok) {
          const errorData = await response.json();
          throw new Error(errorData.message || 'Erro ao gerar proposta');
        }

        // Receber PDF e fazer download
        const blob = await response.blob();
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;

        // Nome do arquivo com nome do cliente
        const nomeCliente = document.getElementById('nomeCliente')?.value || 'Cliente';
        const nomeClienteLimpo = nomeCliente.trim().replace(/[^a-zA-Z0-9\s]/g, '').replace(/\s+/g, '-');
        const dataHoje = new Date().toISOString().split('T')[0]; // YYYY-MM-DD
        a.download = `Proposta-Monofloor-${nomeClienteLimpo}-${dataHoje}.pdf`;

        document.body.appendChild(a);
        a.click();
        window.URL.revokeObjectURL(url);
        document.body.removeChild(a);

        status.textContent = 'âœ… Proposta gerada com sucesso!';
        status.style.color = '#22c55e';

        console.log('âœ… Proposta baixada com sucesso!');

        // Callback para o CRM se veio de lÃ¡
        if (window.dealIdCRM) {
          await salvarPropostaNoCRM(valorTotal, metragemTotal, {
            stelion: { metragem: metragemTotalStelion, total: valorTotalStelion },
            lilit: { metragem: metragemTotalLilit, total: valorTotalLilit }
          }, blob);
        }

      } catch (error) {
        console.error('âŒ Erro ao gerar proposta:', error);
        status.textContent = 'âŒ Erro: ' + error.message;
        status.style.color = '#ef4444';
      } finally {
        // Reabilitar botÃ£o
        setTimeout(() => {
          btn.disabled = false;
          btn.style.opacity = '1';
          btn.style.cursor = 'pointer';
          setTimeout(() => {
            status.textContent = '';
          }, 5000);
        }, 2000);
      }
    };

    console.log('âœ… HEAD SCRIPT: gerarProposta() definida!');

    // ============================================
    // GERAR LINK DO PDF (COM TRACKING)
    // Fluxo: Gera PDF -> Salva no CRM -> Cria link -> Abre
    // ============================================
    window.gerarPropostaHTML = async function() {
      console.log('ðŸ”— GERAR LINK: Iniciando...');

      const btn = document.getElementById('btnGerarHTML');
      const status = document.getElementById('statusProposta');
      const htmlLinkDiv = document.getElementById('htmlLink');

      try {
        btn.disabled = true;
        btn.style.opacity = '0.6';
        btn.style.cursor = 'wait';
        htmlLinkDiv.style.display = 'none';

        // Ler query params da URL
        const urlParams = new URLSearchParams(window.location.search);
        const dealId = urlParams.get('dealId');
        const clienteFromUrl = urlParams.get('cliente');

        if (!dealId) {
          throw new Error('Este recurso sÃ³ funciona quando aberto pelo CRM (precisa do dealId)');
        }

        const API_BASE = window.location.hostname === 'localhost'
          ? 'http://localhost:3000'
          : '';  // Em produÃ§Ã£o, usa a mesma origem (proxy nginx)

        // ====== PASSO 1: Verificar se jÃ¡ tem proposta com PDF ======
        status.textContent = 'ðŸ” Verificando proposta...';
        status.style.color = '#3b82f6';

        let propostaId = null;
        const propostaRes = await fetch(`${API_BASE}/api/admin/comercial/${dealId}/ultima-proposta`);

        if (propostaRes.ok) {
          const propostaData = await propostaRes.json();
          if (propostaData.proposta?.pdfBase64) {
            propostaId = propostaData.proposta.id;
            console.log('âœ… Proposta com PDF encontrada:', propostaId);
          }
        }

        // Se nÃ£o tem proposta com PDF, gerar primeiro
        if (!propostaId) {
          status.textContent = 'ðŸ“„ Gerando PDF primeiro...';

          // Chamar a funÃ§Ã£o de gerar proposta PDF e esperar
          await window.gerarProposta();

          // Aguardar um pouco e buscar novamente
          await new Promise(r => setTimeout(r, 2000));

          const propostaRes2 = await fetch(`${API_BASE}/api/admin/comercial/${dealId}/ultima-proposta`);
          if (propostaRes2.ok) {
            const propostaData2 = await propostaRes2.json();
            if (propostaData2.proposta?.pdfBase64) {
              propostaId = propostaData2.proposta.id;
            }
          }
        }

        if (!propostaId) {
          throw new Error('NÃ£o foi possÃ­vel gerar a proposta. Tente gerar o PDF primeiro.');
        }

        // ====== PASSO 2: Gerar link pÃºblico ======
        status.textContent = 'ðŸ”— Gerando link pÃºblico...';

        const linkResponse = await fetch(`${API_BASE}/api/proposals/generate-html`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ propostaId }),
        });

        if (!linkResponse.ok) {
          const error = await linkResponse.json();
          throw new Error(error.error || 'Erro ao gerar link');
        }

        const result = await linkResponse.json();

        // ====== PASSO 3: Mostrar e abrir ======
        status.textContent = 'âœ… Link gerado!';
        status.style.color = '#22c55e';

        const linkUrl = document.getElementById('htmlLinkUrl');
        linkUrl.href = result.url;
        linkUrl.textContent = result.url;
        htmlLinkDiv.style.display = 'block';

        // Abrir o PDF em nova aba
        window.open(result.url, '_blank');

        console.log('âœ… Link do PDF:', result.url);

      } catch (error) {
        console.error('âŒ Erro:', error);
        status.textContent = 'âŒ ' + error.message;
        status.style.color = '#ef4444';
      } finally {
        btn.disabled = false;
        btn.style.opacity = '1';
        btn.style.cursor = 'pointer';
      }
    };

    // Copiar link para clipboard
    window.copyHtmlLink = function() {
      const linkUrl = document.getElementById('htmlLinkUrl').href;
      navigator.clipboard.writeText(linkUrl).then(() => {
        const status = document.getElementById('statusProposta');
        status.textContent = 'ðŸ“‹ Link copiado para a Ã¡rea de transferÃªncia!';
        status.style.color = '#22c55e';
        setTimeout(() => {
          status.textContent = '';
        }, 3000);
      });
    };

    console.log('âœ… HEAD SCRIPT: gerarPropostaHTML() definida!');

    // ============================================
    // CALCULADORA DE PRAZOS - DEFINIDA NO HEAD
    // ============================================
    console.log('ðŸ”§ HEAD SCRIPT: Definindo calcularPrazo...');

    const TAB_CALC = [
      { a: 50, p: 2, d: 5, m: 5.0 }, { a: 80, p: 2, d: 5, m: 8.0 },
      { a: 150, p: 3, d: 8, m: 6.25 }, { a: 200, p: 3, d: 8, m: 8.33 },
      { a: 250, p: 4, d: 10, m: 6.25 }, { a: 300, p: 4, d: 12, m: 6.25 },
      { a: 350, p: 4, d: 12, m: 7.29 }, { a: 400, p: 5, d: 11, m: 7.27 },
      { a: 500, p: 5, d: 12, m: 8.33 }, { a: 600, p: 6, d: 12, m: 8.33 },
      { a: 700, p: 6, d: 16, m: 7.29 }, { a: 800, p: 7, d: 17, m: 6.72 },
      { a: 900, p: 8, d: 18, m: 6.25 }, { a: 1000, p: 9, d: 20, m: 5.56 },
      { a: 1200, p: 12, d: 20, m: 5.0 }
    ];

    window.calcularPrazo = function() {
      console.log('ðŸ“Š calcularPrazo() EXECUTANDO!');
      try {
        const m = parseFloat(document.getElementById('calcMetragem')?.value) || 0;
        let pr = parseInt(document.getElementById('calcPrestadores')?.value);
        const t = document.getElementById('calcTipo')?.value || 'piso';

        if (m <= 0) {
          document.getElementById('calcResultadoTotal').textContent = '0';
          document.getElementById('calcTotalLinha').textContent = '0 dias';
          return;
        }

        // Buscar valor EXATO ou mais prÃ³ximo
        let j = TAB_CALC[0];
        let valorExato = false;
        for (let i = 0; i < TAB_CALC.length; i++) {
          if (TAB_CALC[i].a === m) {
            j = TAB_CALC[i];
            valorExato = true;
            break;
          }
          if (Math.abs(m - TAB_CALC[i].a) < Math.abs(m - j.a)) {
            j = TAB_CALC[i];
          }
        }

        // Se usuÃ¡rio nÃ£o especificou prestadores, usar sugestÃ£o da tabela
        if (!pr || pr <= 0) {
          pr = j.p;
          document.getElementById('calcPrestadores').value = pr;
        }

        let dias, diasInst;

        // Se for VALOR EXATO da tabela E tipo piso (nÃ£o misto), usar dias da tabela direto
        if (valorExato && t === 'piso' && pr === j.p) {
          dias = j.d + 2; // dias da tabela + 2 de cura
          diasInst = j.d;
          console.log('âœ… VALOR EXATO DA TABELA:', m + 'mÂ² =', pr, 'prestadores,', j.d, 'dias instalaÃ§Ã£o');
        } else {
          // Caso contrÃ¡rio, calcular baseado na produtividade
          let prod = j.m * pr;
          if (t === 'misto') prod *= 0.7;
          diasInst = Math.ceil(m / prod);
          dias = diasInst + 2;
        }

        const prod = j.m * pr * (t === 'misto' ? 0.7 : 1);
        document.getElementById('calcProducaoDiaria').textContent = prod.toFixed(1) + ' mÂ²/dia';
        document.getElementById('calcDiasInstalacao').textContent = diasInst + ' dias';
        document.getElementById('calcResultadoTotal').textContent = dias;
        document.getElementById('calcTotalLinha').textContent = dias + ' dias';
        console.log('âœ… Resultado:', diasInst, 'dias instalaÃ§Ã£o +', 2, 'cura =', dias, 'dias total');
      } catch(e) {
        console.error('âŒ Erro:', e);
      }
    };

    window.calcularPrestadoresNecessarios = function() {
      try {
        const m = parseFloat(document.getElementById('calcMetragem')?.value) || 0;
        const pz = parseInt(document.getElementById('calcPrazoDesejado')?.value);
        if (!pz || m <= 0) {
          document.getElementById('prestadoresNecessarios').textContent = 'â€”';
          return;
        }
        let j = TAB_CALC[0];
        for (let i = 1; i < TAB_CALC.length; i++) {
          if (Math.abs(m - TAB_CALC[i].a) < Math.abs(m - j.a)) j = TAB_CALC[i];
        }
        const mhd = document.getElementById('calcTipo')?.value === 'misto' ? j.m * 0.7 : j.m;
        const pr = Math.ceil(m / ((pz - 2) * mhd));
        document.getElementById('prestadoresNecessarios').textContent = pr + ' prestador(es)';
      } catch(e) {
        console.error('âŒ Erro:', e);
      }
    };

    console.log('âœ… HEAD SCRIPT: calcularPrazo definida!', typeof window.calcularPrazo);
  </script>

  <style>
    @font-face {
      font-family: 'NITECLUB';
      src: url(data:font/ttf;base64,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ZARoBGwDCAKUAkgEdAI8BHwC4ASQA0QC/AMAAAQAAAAAAAKVQGD9fDzz1AAkD6AAAAAAAAAAAAAAAAAAAAAD/+P/FBBEDWwAAAAUAAQABAAAAAAABAAADtf/FAJYERP/4AAIEAwABAAAAAAAAAAAAAAAAAAABjwFgAAAAAAAAAWAAAAFgAAAAnAAAAfQAAAH0AAABpv/5Ag8ABAIj//8AnAAAAOoAAADqAAABhwAGAREAAACcAAABEQAAAJwAAAE5//gBYAAAAPYAAAFgAAABYP/5AVwAAAFzAAYBZ//4AWD//gFzAAABc//4AJwAAACcAAAB9AAAAREAAAH0AAABUAAAAfQAAAG5//4Bh//+AmUADQIPAAABUAAAAVAAAALaAAYBWAAAAJwAAAERAAABpgAAAUwAAAKsAAABcwAAA7UAAAGWAAADtQAAAaIAAAE5//8BSAAAAXMAAAG5AAACrAAAAZoAAAGWAAABWAAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAATn//gERAAABmgAJAWcAAADqAAAA6gAAAfwABAD+AAAAZgAAALQAAAElAAAA6gAAAdEAAAD+AAABhwACAR0AAAKMAAABMQAAANf//wDqAAAA7gAAATEAAAHgAAABHQAAAR0AAADyAAAB9AAAADUAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAGm//4BngAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAWAAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAABYAAAAfQAAAFgAAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAJwAAAH0AAAB9AAABEQADgH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAInAAQB9AAAAWAAAAFgAAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAFgAAABYAAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAfQAAAFgAAAB9AAAAfQAAAH0AAAB9AAAAWAAAAH0AAABYAAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAH0AAAB9AAAAfQAAAFgAAAB9AAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAR4AAAHIAAACbAAAArIAAALoAAADHAAAA2AAAAOKAAADzgAAA+gAAAQWAAAEOgAABIgAAASsAAAFHgAABeQAAAYaAAAGlAAAB0IAAAdmAAAISAAACQAAAAlOAAAJtAAACbQAAAnaAAAJ2gAACjoAAAo6AAAKdAAACwgAAAtIAAALigAAC7gAAAviAAAMUAAADIAAAAycAAAMyAAADRYAAA02AAANdAAADaIAAA32AAAOTAAAD0IAAA/MAAAQOAAAEFwAABCcAAAQxAAAEQYAABFAAAARbgAAEZYAABGWAAARlgAAEZYAABGWAAARlgAAEZYAABHMAAASWAAAEpgAABLaAAATBgAAEy4AABOgAAATzgAAE+oAABQWAAAUYAAAFIAAABS8AAAU6gAAFTgAABWGAAAWbgAAFugAABdUAAAXeAAAF8AAABfoAAAYKAAAGF4AABiKAAAYsAAAGLAAABjMAAAYzAAAGMwAABjMAAAYzAAAGMwAABjMAAAYzAAAGMwAABjMAAAYzAAAGMwAABjMAAAYzAAAGMwAABjMAAAYzAAAGMwAABjMAAAYzAAAGMwAABjMAAAYzAAAGMwAABjMAAAYzAAAGMwAABjMAAAYzAAAGMwAABjMAAAYzAAAGMwAABjMAAAYzAAAGMwAABjMAAAZSgAAGeQAABnkAAAZ5AAAGeQAABnkAAAZ5AAAGeQAABnkAAAZ5AAAGeQAABnkAAAZ5AAAGeQAABnkAAAZ5AAAGeQAABnkAAAZ5AAAGeQAABnkAAAZ5AAAGeQAABnkAAAZ5AAAGeQAABnkAAAZ5AAAGeQAABnkAAAZ5AAAGeQAABnkAAAZ5AAAGeQAABnkAAAZ5AAAGeQAABnkAAAZ5AAAGeQAABnkAAAZ5AAAGeQAABnkAAAZ5AAAGeQAABnkAAAZ5AAAGeQAABoqAAAaKgAAGioAAB+aAAAfmgAAH5oAAB+aAAAfmgAAH5oAAB+aAAAfmgAAH5oAAB+aAAAfmgAAH5oAAB+aAAAfmgAAH5oAAB+aAAAfmgAAH5oAAB+aAAAfmgAAH5oAAB+aAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAAf6AAAH+gAAB/oAAEAAAGPAfgABQH4AAUAAQAAAAIAAgABB+AAAAABAAEAAAAOAK4AAQAAAAAAAAABAAAAAQAAAAAAAQAIAAEAAQAAAAAAAgAHAAkAAQAAAAAAAwAeABAAAQAAAAAABAAIAC4AAQAAAAAABQApADYAAQAAAAAABgAIAF8AAwABBAkAAAACAGgAAwABBAkAAQAQAGoAAwABBAkAAgAOAHoAAwABBAkAAwA8AIgAAwABBAkABAAQAMQAAwABBAkABQBSANQAAwABBAkABgAQASYgTml0ZUNsdWJSZWd1bGFyVE9NVFlQRTpOaXRlQ2x1YiBSZWd1bGFyOlRPTSdTTml0ZUNsdWJDb3B5cmlnaHQgKGMpIDE5OTIsIFRob21hcyBFLiBIYXJ2ZXkuIEFSUk5pdGVDbHViAAAgAE4AaQB0AGUAQwBsAHUAYgBSAGUAZwB1AGwAYQByAFQATwBNAFQAWQBQAEUAOgBOAGkAdABlAEMAbAB1AGIAIABSAGUAZwB1AGwAYQByADoAVABPAE0AJwBTAE4AaQB0AGUAQwBsAHUAYgBDAG8AcAB5AHIAaQBnAGgAdAAgACgAYwApACAAMQA5ADkAMgAsACAAVABoAG8AbQBhAHMAIABFAC4AIABIAGEAcgB2AGUAeQAuACAAQQBSAFIATgBpAHQAZQBDAGwAdQBiAAIAAAAAAAD/sAAyAAAAAAAAAAAAAAAAAAAAAAAAAAABjwAAAAAAAAECAQMBBAEFAQYBBwEIAQkBCgELAQwBDQEOAQ8BEAERARIBEwEUARUBFgEXARgBGQEaARsBHAEdAR4BHwEgASEBIgEjASQBJQEmAScBKAEpASoBKwEsAS0BLgEvATABMQEyATMBNAE1ATYBNwE4ATkBOgE7ATwBPQE+AT8BQAFBAUIBQwFEAUUBRgFHAUgBSQFKAUsBTAFNAU4BTwFQAVEBUgFTAVQBVQFWAVcBWAFZAVoBWwFcAV0BXgFfAWABYQFiAWMBZAFlAWYBZwFoAWkBagFrAWwBbQFuAW8BcAFxAXIBcwF0AXUBdgF3AXgBeQF6AXsBfAF9AX4BfwGAAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBuAG5AboBuwG8Ab0BvgG/AcABwQHCAcMBxAHFAcYBxwHIAckBygHLAcwBzQHOAc8B0AHRAdIB0wHUAdUB1gHXAdgB2QHaAdsB3AHdAd4B3wHgAeEB4gHjAeQB5QHmAecB6AHpAeoB6wHsAe0B7gHvAfAB8QHyAfMB9AH1AfYB9wH4AfkB+gH7AfwB/QH+Af8CAAIBAgICAwIEAgUCBgIHAggCCQIKAgsCDAINAg4CDwIQAhECEgITAhQCFQIWAhcCGAIZAhoCGwIcAh0CHgIfAiACIQIiAiMCJAIlAiYCJwIoAikCKgIrAiwCLQIuAi8CMAIxAjICMwI0AjUCNgI3AjgCOQI6AjsCPAI9Aj4CPwJAAkECQgJDAkQCRQJGAkcCSAJJAkoCSwJMAk0CTgJPAlACUQJSAlMCVAJVAlYCVwJYAlkCWgJbAlwCXQJeAl8CYAJhAmICYwJkAmUCZgJnAmgCaQJqAmsCbAJtAm4CbwJwAnECcgJzAnQCdQJ2AncCeAJ5AnoCewJ8An0CfgJ/AoACgQKCAoMChAKFAoYChwKIAokCigKLAowCjQVzcGFjZQZleGNsYW0IcXVvdGVkYmwKbnVtYmVyc2lnbgZkb2xsYXIHcGVyY2VudAlhbXBlcnNhbmQLcXVvdGVzaW5nbGUJcGFyZW5sZWZ0CnBhcmVucmlnaHQIYXN0ZXJpc2sEcGx1cwVjb21tYQZoeXBoZW4GcGVyaW9kBXNsYXNoBHplcm8Db25lA3R3bwV0aHJlZQRmb3VyBGZpdmUDc2l4BXNldmVuBWVpZ2h0BG5pbmUFY29sb24Jc2VtaWNvbG9uBGxlc3MFZXF1YWwHZ3JlYXRlcghxdWVzdGlvbgJhdAFBAUIBQwFEAUUBRgFHAUgBSQFKAUsBTAFNAU4BTwFQAVEBUgFTAVQBVQFWAVcBWAFZAVoLYnJhY2tldGxlZnQJYmFja3NsYXNoDGJyYWNrZXRyaWdodAthc2NpaWNpcmN1bQp1bmRlcnNjb3JlBWdyYXZlAWEBYgFjAWQBZQFmAWcBaAFpAWoBawFsAW0BbgFvAXABcQFyAXMBdAF1AXYBdwF4AXkBeglicmFjZWxlZnQDYmFyCmJyYWNlcmlnaHQKYXNjaWl0aWxkZQlBZGllcmVzaXMFQXJpbmcIQ2NlZGlsbGEGRWFjdXRlBk50aWxkZQlPZGllcmVzaXMJVWRpZXJlc2lzBmFhY3V0ZQZhZ3JhdmULYWNpcmN1bWZsZXgJYWRpZXJlc2lzBmF0aWxkZQVhcmluZwhjY2VkaWxsYQZlYWN1dGUGZWdyYXZlC2VjaXJjdW1mbGV4CWVkaWVyZXNpcwZpYWN1dGUGaWdyYXZlC2ljaXJjdW1mbGV4CWlkaWVyZXNpcwZudGlsZGUGb2FjdXRlBm9ncmF2ZQtvY2lyY3VtZmxleAlvZGllcmVzaXMGb3RpbGRlBnVhY3V0ZQZ1Z3JhdmULdWNpcmN1bWZsZXgJdWRpZXJlc2lzBmRhZ2dlcgZkZWdyZWUEY2VudAhzdGVybGluZwdzZWN0aW9uBmJ1bGxldAlwYXJhZ3JhcGgKZ2VybWFuZGJscwpyZWdpc3RlcmVkCWNvcHlyaWdodAl0cmFkZW1hcmsFYWN1dGUIZGllcmVzaXMIbm90ZXF1YWwCQUUGT3NsYXNoCGluZmluaXR5CXBsdXNtaW51cwlsZXNzZXF1YWwMZ3JlYXRlcmVxdWFsA3llbgJtdQtwYXJ0aWFsZGlmZglzdW1tYXRpb24HcHJvZHVjdAJwaQhpbnRlZ3JhbAtvcmRmZW1pbmluZQxvcmRtYXNjdWxpbmUFT21lZ2ECYWUGb3NsYXNoDHF1ZXN0aW9uZG93bgpleGNsYW1kb3duCmxvZ2ljYWxub3QHcmFkaWNhbAZmbG9yaW4LYXBwcm94ZXF1YWwFRGVsdGENZ3VpbGxlbW90bGVmdA5ndWlsbGVtb3RyaWdodAhlbGxpcHNpcwZBZ3JhdmUGQXRpbGRlBk90aWxkZQJPRQJvZQZlbmRhc2gGZW1kYXNoDHF1b3RlZGJsbGVmdA1xdW90ZWRibHJpZ2h0CXF1b3RlbGVmdApxdW90ZXJpZ2h0BmRpdmlkZQdsb3plbmdlCXlkaWVyZXNpcwlZZGllcmVzaXMIZnJhY3Rpb24IY3VycmVuY3kNZ3VpbHNpbmdsbGVmdA5ndWlsc2luZ2xyaWdodAJmaQJmbAlkYWdnZXJkYmwOcGVyaW9kY2VudGVyZWQOcXVvdGVzaW5nbGJhc2UMcXVvdGVkYmxiYXNlC3BlcnRob3VzYW5kC0FjaXJjdW1mbGV4C0VjaXJjdW1mbGV4BkFhY3V0ZQlFZGllcmVzaXMGRWdyYXZlBklhY3V0ZQtJY2lyY3VtZmxleAlJZGllcmVzaXMGSWdyYXZlBk9hY3V0ZQtPY2lyY3VtZmxleAVhcHBsZQZPZ3JhdmUGVWFjdXRlC1VjaXJjdW1mbGV4BlVncmF2ZQhkb3RsZXNzaQpjaXJjdW1mbGV4BXRpbGRlBm1hY3JvbgVicmV2ZQlkb3RhY2NlbnQEcmluZwdjZWRpbGxhDGh1bmdhcnVtbGF1dAZvZ29uZWsFY2Fyb24GTHNsYXNoBmxzbGFzaAZTY2Fyb24Gc2Nhcm9uBlpjYXJvbgZ6Y2Fyb24JYnJva2VuYmFyA0V0aANldGgGWWFjdXRlBnlhY3V0ZQVUaG9ybgV0aG9ybQVtaW51cwhtdWx0aXBseQtvbmVzdXBlcmlvcgt0d29zdXBlcmlvcg10aHJlZXN1cGVyaW9yB29uZWhhbGYKb25lcXVhcnRlcg10aHJlZXF1YXJ0ZXJzBWZyYW5jBkdicmV2ZQZnYnJldmUESWRvdAhTY2VkaWxsYQhzY2VkaWxsYQZDYWN1dGUGY2FjdXRlBkNjYXJvbgZjY2Fyb24GZHNsYXNoCmFycm93cmlnaHQFaG91c2UGZW5kYXNoCXNmdGh5cGhlbglmaWxsZWRib3gGYnVsbGV0CW92ZXJzdG9yZQZkZWdyZWUGbWlkZG90DXVuZGVyc2NvcmVkYmwJZXhjbGFtZGJsCW5zdXBlcmlvcgZwZXNldGEFR2FtbWEFVGhldGEDUGhpBWFscGhhBWRlbHRhB2Vwc2lsb24Fc2lnbWEDdGF1A3BoaQlhcnJvd2xlZnQHYXJyb3d1cAlhcnJvd2Rvd24JYXJyb3dib3RoCWFycm93dXBkbg1hcnJvd3VwZG5iYXNlCm9ydGhvZ29uYWwMaW50ZXJzZWN0aW9uC2VxdWl2YWxlbmNlDXJldmxvZ2ljYWxub3QKaW50ZWdyYWx0cAppbnRlZ3JhbGJ0CmZpbGxlZHJlY3QGY2lyY2xlB3RyaWFndXAHdHJpYWdydAd0cmlhZ2RuB3RyaWFnbGYJaW52YnVsbGV0CWludmNpcmNsZQZSY2Fyb24HdXBibG9jawdkbmJsb2NrBWJsb2NrB2xmYmxvY2sHcnRibG9jawdsdHNoYWRlBXNoYWRlB2Rrc2hhZGUJc21pbGVmYWNlDGludnNtaWxlZmFjZQNzdW4GZmVtYWxlBG1hbGUFc3BhZGUEY2x1YgVoZWFydAdkaWFtb25kC211c2ljYWxub3RlDm11c2ljYWxub3RlZGJsBkFicmV2ZQZhYnJldmUHQW9nb25lawdhb2dvbmVrBkRjYXJvbgZkY2Fyb24GRHNsYXNoB0VvZ29uZWsHZW9nb25lawZFY2Fyb24GZWNhcm9uBkxhY3V0ZQZsYWN1dGUGTGNhcm9uBmxjYXJvbgZOYWN1dGUGbmFjdXRlBk5jYXJvbgZuY2Fyb24JT2RibGFjdXRlCW9kYmxhY3V0ZQZSYWN1dGUGcmFjdXRlBnJjYXJvbgZTYWN1dGUGc2FjdXRlCFRjZWRpbGxhCHRjZWRpbGxhBlRjYXJvbgZ0Y2Fyb24FVXJpbmcFdXJpbmcJVWRibGFjdXRlCXVkYmxhY3V0ZQZaYWN1dGUGemFjdXRlBFpkb3QEemRvdARMZG90BGxkb3QEMjUwMAQyNTAyBDI1MGMEMjUxMAQyNTE0BDI1MTgEMjUxYwQyNTI0BDI1MmMEMjUzNAQyNTNjBDI1NTAEMjU1MQQyNTUyBDI1NTMEMjU1NAQyNTU1BDI1NTYEMjU1NwQyNTU4BDI1NTkEMjU1YQQyNTViBDI1NWMEMjU1ZAQyNTVlBDI1NWYEMjU2MAQyNTYxBDI1NjIEMjU2MwQyNTY0BDI1NjUEMjU2NgQyNTY3BDI1NjgEMjU2OQQyNTZhBDI1NmIEMjU2YwAAuAH/hQAAASIBkAAFAAQC7gLuAAAAyALuAu4AAAEsADIBPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABUT01TAEAAIPACAzj/6ACWA7UAOwAA) format('truetype');
      font-weight: normal;
      font-style: normal;
      font-display: swap;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #000000;
      min-height: 100vh;
      padding: 24px;
      color: #ffffff;
    }

    .product-name {
      font-family: 'NITECLUB', 'Inter', sans-serif !important;
      letter-spacing: 1px;
      font-size: 21px;
      font-weight: normal;
      text-transform: uppercase;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      margin-bottom: 40px;
    }

    .logo {
      font-size: 32px;
      font-weight: 700;
      color: #ffffff;
      margin-bottom: 8px;
    }

    .subtitle {
      font-size: 16px;
      color: #999999;
    }

    .form-card {
      background: transparent;
      padding: 32px;
    }

    .form-section {
      margin-bottom: 40px;
      padding-bottom: 32px;
      border-bottom: 1px solid #333333;
    }

    .form-section:last-of-type {
      border-bottom: none;
      margin-bottom: 24px;
    }

    .section-title {
      font-size: 18px;
      font-weight: 600;
      color: #ffffff;
      margin-bottom: 24px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .section-icon {
      width: 24px;
      height: 24px;
      color: #ffffff;
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .form-row:last-child {
      margin-bottom: 0;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    .form-group label {
      font-size: 14px;
      font-weight: 500;
      color: #cccccc;
      margin-bottom: 8px;
    }

    .form-group input,
    .form-group textarea,
    .form-group select {
      padding: 12px 16px;
      background: #1a1a1a;
      border: 1px solid #333333;
      border-radius: 4px;
      font-size: 14px;
      color: #ffffff;
      font-family: inherit;
      transition: all 0.2s;
    }

    .form-group select {
      cursor: pointer;
    }

    .form-group select option {
      background: #1a1a1a;
      color: #ffffff;
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: #ffffff;
      background: #1a1a1a;
    }

    .form-group input::placeholder,
    .form-group textarea::placeholder {
      color: #666666;
    }

    .form-group textarea {
      resize: vertical;
      min-height: 80px;
    }

    .distance-info {
      display: block;
      margin-top: 6px;
      font-size: 12px;
      color: #999999;
    }

    /* BotÃµes de escolha de produto (Piso) */
    .produto-toggle {
      display: inline-flex;
      gap: 15px;
      margin-left: 15px;
      font-size: 11px;
      font-weight: normal;
    }

    .produto-option {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      padding: 4px 10px;
      border-radius: 12px;
      transition: all 0.2s ease;
      background: transparent;
      color: #666;
    }

    .produto-option:hover {
      background: rgba(255, 255, 255, 0.05);
      color: #999;
    }

    .produto-option.active {
      color: #c9a962;
      font-weight: 500;
    }

    .produto-bolinha {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      border: 2px solid #666;
      background: transparent;
      transition: all 0.2s ease;
    }

    .produto-option.active .produto-bolinha {
      background: #c9a962;
      border-color: #c9a962;
      box-shadow: 0 0 8px rgba(201, 169, 98, 0.5);
    }

    .metragem-summary {
      background: #1a1a1a;
      border: 1px solid #333333;
      border-radius: 4px;
      padding: 20px;
      margin-top: 24px;
    }

    .summary-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
    }

    .summary-item.highlight {
      border-top: 2px solid #ffffff;
      padding-top: 16px;
      margin-top: 8px;
    }

    .summary-label {
      font-size: 14px;
      color: #cccccc;
      font-weight: 500;
    }

    .summary-item.highlight .summary-label {
      color: #ffffff;
      font-weight: 600;
    }

    .summary-value {
      font-size: 16px;
      font-weight: 700;
      color: #ffffff;
    }

    .summary-item.highlight .summary-value {
      font-size: 20px;
      color: #ffffff;
    }

    .form-actions {
      display: flex;
      gap: 16px;
      justify-content: flex-end;
      padding-top: 24px;
    }

    .btn {
      padding: 14px 32px;
      border-radius: 4px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      border: none;
      font-family: inherit;
    }

    .btn-primary {
      background: #ffffff;
      color: #000000;
      border: 2px solid #ffffff;
    }

    .btn-primary:hover {
      background: #000000;
      color: #ffffff;
      border: 2px solid #ffffff;
    }

    .btn-primary:active {
      transform: scale(0.98);
    }

    .btn-secondary {
      background: transparent;
      color: #ffffff;
      border: 2px solid #ffffff;
    }

    .btn-secondary:hover {
      background: #ffffff;
      color: #000000;
    }

    /* Responsive */
    @media (max-width: 768px) {
      body {
        padding: 16px;

      .form-card {
        padding: 20px;

      .form-row {
        grid-template-columns: 1fr;

      .form-actions {
        flex-direction: column;

      .btn {
        width: 100%;
    }

    /* Toast notification */
    .toast {
      position: fixed;
      bottom: 24px;
      right: 24px;
      background: #ffffff;
      color: #000000;
      padding: 16px 24px;
      border-radius: 4px;
      border: 2px solid #000000;
      display: none;
      align-items: center;
      gap: 12px;
      z-index: 1000;
      animation: slideIn 0.3s ease;
    }

    .toast.show {
      display: flex;
    }

    .toast.success {
      border-left: 4px solid #ffffff;
    }

    .toast.error {
      border-left: 4px solid #ffffff;
    }

    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      to {
        transform: translateX(0);
        opacity: 1;
    }

    /* Google Places Autocomplete Customization */
    .pac-container {
      background-color: #1a1a1a !important;
      border: 1px solid #333333 !important;
      border-radius: 4px !important;
      margin-top: 4px !important;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3) !important;
    }

    .pac-container:after {
      display: none !important;
    }

    .pac-item {
      background-color: #1a1a1a !important;
      border-top: 1px solid #333333 !important;
      color: #ffffff !important;
      padding: 12px 16px !important;
      cursor: pointer !important;
      font-size: 14px !important;
    }

    .pac-item:first-child {
      border-top: none !important;
    }

    .pac-item:hover,
    .pac-item-selected {
      background-color: #2a2a2a !important;
    }

    .pac-item-query {
      color: #ffffff !important;
      font-size: 14px !important;
    }

    .pac-matched {
      color: #ffffff !important;
      font-weight: 600 !important;
    }

    .pac-icon {
      background-image: none !important;
      width: 0 !important;
      display: none !important;
    }

    .pac-item span {
      color: #cccccc !important;
    }

    /* Google Maps Autocomplete - Estilo Dark */
    .pac-container {
      background-color: #1a1a1a !important;
      border: 1px solid #333333 !important;
      border-radius: 4px !important;
      margin-top: 4px !important;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3) !important;
      z-index: 10000 !important;
    }

    .pac-item {
      background-color: #1a1a1a !important;
      border-top: 1px solid #333333 !important;
      color: #ffffff !important;
      padding: 12px 16px !important;
      cursor: pointer !important;
      font-size: 14px !important;
    }

    .pac-item:hover,
    .pac-item-selected {
      background-color: #2a2a2a !important;
    }

    .pac-item-query {
      color: #ffffff !important;
      font-weight: 500 !important;
    }

    .pac-matched {
      color: #667eea !important;
      font-weight: 700 !important;
    }

    .pac-icon {
      display: none !important;
    }

    .pac-item span {
      color: #cccccc !important;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <img src="/artboard 1.png" alt="Monofloor Logo" style="max-width: 338px; margin-bottom: 16px;" />
      <div class="subtitle">Gerador AutomÃ¡tico de Propostas Comerciais</div>
    </div>

    <!-- Form Card -->
    <div class="form-card">
      <form id="proposalForm">
        <!-- Client Information -->
        <div class="form-section">
          <h2 class="section-title">
            <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
            InformaÃ§Ãµes do Cliente
          </h2>

          <div class="form-row">
            <div class="form-group full-width">
              <label for="nomeCliente">Nome do Cliente *</label>
              <input
                id="nomeCliente"
                type="text"
                required
                placeholder="Digite o nome do cliente"
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group full-width">
              <label for="endereco">
                Obra em (EndereÃ§o) *
                <span id="distanciaLabel" style="color: #ef4444; font-size: 12px; font-weight: normal; display: none; margin-left: 10px;"></span>
              </label>
              <input
                id="endereco"
                type="text"
                required
                placeholder="Digite o endereÃ§o da obra"
                autocomplete="off"
              />
              <small id="distanciaInfo" class="distance-info" style="display: none;">
                ðŸ“ DistÃ¢ncia calculada: <span id="distanciaValor">0</span> km
              </small>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group full-width">
              <label for="detalhes">Detalhes</label>
              <textarea
                id="detalhes"
                rows="3"
                placeholder="InformaÃ§Ãµes adicionais sobre a obra"
              ></textarea>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="previsaoData">PrevisÃ£o de Data da Obra *</label>
              <input
                id="previsaoData"
                type="date"
                required
              />
            </div>
          </div>
        </div>

        <!-- Metragem -->
        <div class="form-section">
          <h2 class="section-title">
            <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
            </svg>
            Metragem
          </h2>

          <div class="form-row">
            <div class="form-group">
              <label for="metrosPiso">
                Piso (mÂ²)
                <span class="produto-toggle">
                  <span class="produto-option active" id="pisoProdutoStelion" onclick="togglePisoProduto('stelion')">
                    <span class="produto-bolinha"></span>
                    <span class="product-name" style="font-size: 11px;">STELION</span>
                  </span>
                  <span class="produto-option" id="pisoProdutoLilit" onclick="togglePisoProduto('lilit')">
                    <span class="produto-bolinha"></span>
                    <span class="product-name" style="font-size: 11px;">LILIT</span>
                  </span>
                </span>
              </label>
              <input id="metrosPiso" type="number" min="0" step="0.01" placeholder="0.00" value="0" oninput="calcularPrecos()" />
            </div>
            <div class="form-group">
              <label for="metrosParede">Parede (mÂ²)</label>
              <input id="metrosParede" type="number" min="0" step="0.01" placeholder="0.00" value="0" oninput="calcularPrecos()" />
            </div>
            <div class="form-group">
              <label for="metrosTeto">Teto (mÂ²)</label>
              <input id="metrosTeto" type="number" min="0" step="0.01" placeholder="0.00" value="0" oninput="calcularPrecos()" />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="metrosBancadas">Bancadas (mÂ²)</label>
              <input id="metrosBancadas" type="number" min="0" step="0.01" placeholder="0.00" value="0" oninput="calcularPrecos()" />
            </div>
            <div class="form-group">
              <label for="metrosEscadas">Escadas (mÂ²)</label>
              <input id="metrosEscadas" type="number" min="0" step="0.01" placeholder="0.00" value="0" oninput="calcularPrecos()" />
            </div>
            <div class="form-group">
              <label for="metrosEspeciaisPequenos">Especiais Pequenos (mÂ²)</label>
              <input id="metrosEspeciaisPequenos" type="number" min="0" step="0.01" placeholder="0.00" value="0" oninput="calcularPrecos()" />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="metrosEspeciaisGrandes">Especiais Grandes (mÂ²)</label>
              <input id="metrosEspeciaisGrandes" type="number" min="0" step="0.01" placeholder="0.00" value="0" oninput="calcularPrecos()" />
            </div>
            <div class="form-group">
              <label for="metrosPiscina">Piscina (mÂ²)</label>
              <input id="metrosPiscina" type="number" min="0" step="0.01" placeholder="0.00" value="0" oninput="calcularPrecos()" />
            </div>
          </div>

          <!-- Calculated Metragem -->
          <div class="metragem-summary">
            <div class="summary-item">
              <span class="summary-label">Metragem Original (soma):</span>
              <span class="summary-value" id="metragemOriginal">0.00 mÂ²</span>
            </div>
            <div class="summary-item highlight">
              <span class="summary-label">Metragem Total (com 10% perda):</span>
              <span class="summary-value" id="metragemTotal">0.00 mÂ²</span>
            </div>
          </div>
        </div>

        <!-- Pricing Table -->
        <div class="form-section">
          <h2 class="section-title">
            <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
            </svg>
            ComposiÃ§Ã£o de PreÃ§os
          </h2>

          <!-- STELION -->
          <div style="margin-bottom: 30px;">
            <h3 style="color: #ffffff; font-size: 16px; margin-bottom: 12px; font-weight: 600;">
              <span class="product-name">STELION</span>
            </h3>

            <div class="form-row">
              <div class="form-group">
                <label for="precoBaseStelion">Valor Base (R$/mÂ²)</label>
                <input id="precoBaseStelion" type="number" min="0" step="0.01" value="910" oninput="calcularPrecos()" />
              </div>
              <div class="form-group">
                <label>Metragem Total com Multiplicadores</label>
                <div style="background: #1a1a1a; border: 1px solid #333333; border-radius: 4px; padding: 12px 16px; color: #ffffff; font-size: 14px; font-weight: 600;">
                  <span id="metragemTotalStelionDisplay">0,00</span> mÂ²
                </div>
              </div>
              <div class="form-group">
                <label>Valor Total</label>
                <div style="background: #1a1a1a; border: 1px solid #333333; border-radius: 4px; padding: 12px 16px; color: #ffffff; font-size: 14px; font-weight: 600;">
                  R$ <span id="totalStelion">0,00</span>
                </div>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label>Materiais</label>
                <div style="background: #1a1a1a; border: 1px solid #333333; border-radius: 4px; padding: 12px 16px; color: #ffffff; font-size: 14px;">
                  R$ <span id="materiaisStelion">0,00</span>
                </div>
              </div>
              <div class="form-group">
                <label>MÃ£o de Obra (R$ 120/mÂ²)</label>
                <div style="background: #1a1a1a; border: 1px solid #333333; border-radius: 4px; padding: 12px 16px; color: #ffffff; font-size: 14px;">
                  R$ <span id="maoObraStelion">0,00</span>
                </div>
              </div>
              <div class="form-group">
                <label>Impostos (17%)</label>
                <div style="background: #1a1a1a; border: 1px solid #333333; border-radius: 4px; padding: 12px 16px; color: #ffffff; font-size: 14px;">
                  R$ <span id="impostosStelion">0,00</span>
                </div>
              </div>
            </div>
          </div>

          <!-- LILIT -->
          <div>
            <h3 style="color: #ffffff; font-size: 16px; margin-bottom: 12px; font-weight: 600;">
              <span class="product-name">LILIT</span>
            </h3>

            <div class="form-row">
              <div class="form-group">
                <label for="precoBaseLilit">Valor Base (R$/mÂ²)</label>
                <input id="precoBaseLilit" type="number" min="0" step="0.01" value="590" oninput="calcularPrecos()" />
              </div>
              <div class="form-group">
                <label>Metragem Total com Multiplicadores</label>
                <div style="background: #1a1a1a; border: 1px solid #333333; border-radius: 4px; padding: 12px 16px; color: #ffffff; font-size: 14px; font-weight: 600;">
                  <span id="metragemTotalLilitDisplay">0,00</span> mÂ²
                </div>
              </div>
              <div class="form-group">
                <label>Valor Total</label>
                <div style="background: #1a1a1a; border: 1px solid #333333; border-radius: 4px; padding: 12px; color: #ffffff; font-size: 14px; font-weight: 600;">
                  R$ <span id="totalLilit">0,00</span>
                </div>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label>Materiais</label>
                <div style="background: #1a1a1a; border: 1px solid #333333; border-radius: 4px; padding: 12px 16px; color: #ffffff; font-size: 14px;">
                  R$ <span id="materiaisLilit">0,00</span>
                </div>
              </div>
              <div class="form-group">
                <label>MÃ£o de Obra (R$ 120/mÂ²)</label>
                <div style="background: #1a1a1a; border: 1px solid #333333; border-radius: 4px; padding: 12px 16px; color: #ffffff; font-size: 14px;">
                  R$ <span id="maoObraLilit">0,00</span>
                </div>
              </div>
              <div class="form-group">
                <label>Impostos (17%)</label>
                <div style="background: #1a1a1a; border: 1px solid #333333; border-radius: 4px; padding: 12px 16px; color: #ffffff; font-size: 14px;">
                  R$ <span id="impostosLilit">0,00</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Resumo Geral -->
        <div class="form-section">
          <h2 class="section-title">
            <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
              <path d="M3 9h18"/>
              <path d="M9 21V9"/>
            </svg>
            Resumo Geral
          </h2>

          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 20px;">
            <!-- STELION -->
            <div style="background: #1a1a1a; border: 2px solid #333333; border-radius: 8px; padding: 20px; text-align: center;">
              <div style="color: #cccccc; font-size: 12px; text-transform: uppercase; margin-bottom: 8px;">
                <span class="product-name" style="font-size: 14px;">STELION</span>
              </div>
              <div style="color: #ffffff; font-size: 28px; font-weight: 700; margin-bottom: 4px;">
                R$ <span id="resumoTotalStelion">0,00</span>
              </div>
              <div style="color: #888888; font-size: 12px;">
                <span id="resumoMetragemStelion">0,00</span> mÂ²
              </div>
            </div>

            <!-- LILIT -->
            <div style="background: #1a1a1a; border: 2px solid #333333; border-radius: 8px; padding: 20px; text-align: center;">
              <div style="color: #cccccc; font-size: 12px; text-transform: uppercase; margin-bottom: 8px;">
                <span class="product-name" style="font-size: 14px;">LILIT</span>
              </div>
              <div style="color: #ffffff; font-size: 28px; font-weight: 700; margin-bottom: 4px;">
                R$ <span id="resumoTotalLilit">0,00</span>
              </div>
              <div style="color: #888888; font-size: 12px;">
                <span id="resumoMetragemLilit">0,00</span> mÂ²
              </div>
            </div>

            <!-- TOTAL GERAL -->
            <div style="background: #ffffff; border: 2px solid #ffffff; border-radius: 8px; padding: 20px; text-align: center;">
              <div style="color: #666666; font-size: 12px; text-transform: uppercase; margin-bottom: 8px; font-weight: 600;">
                TOTAL GERAL
              </div>
              <div style="color: #000000; font-size: 32px; font-weight: 700; margin-bottom: 4px;">
                R$ <span id="resumoTotalGeral">0,00</span>
              </div>
              <div style="color: #666666; font-size: 12px;">
                <span id="resumoMetragemGeral">0,00</span> mÂ²
              </div>
            </div>
          </div>

          <!-- Valor MÃ©dio por mÂ² (Separado por Produto) -->
          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-top: 20px;">
            <!-- STELION - Valor MÃ©dio -->
            <div style="background: #1a1a1a; border: 2px solid #333333; border-radius: 8px; padding: 20px; text-align: center;">
              <div style="color: #cccccc; font-size: 12px; text-transform: uppercase; margin-bottom: 8px;">
                <span class="product-name" style="font-size: 14px;">STELION</span>
              </div>
              <div style="color: #999999; font-size: 11px; margin-bottom: 8px;">
                Valor mÃ©dio do mÂ²
              </div>
              <div style="color: #ffffff; font-size: 28px; font-weight: 700;">
                R$ <span id="valorMedioM2Stelion">0,00</span>
              </div>
            </div>

            <!-- LILIT - Valor MÃ©dio -->
            <div style="background: #1a1a1a; border: 2px solid #333333; border-radius: 8px; padding: 20px; text-align: center;">
              <div style="color: #cccccc; font-size: 12px; text-transform: uppercase; margin-bottom: 8px;">
                <span class="product-name" style="font-size: 14px;">LILIT</span>
              </div>
              <div style="color: #999999; font-size: 11px; margin-bottom: 8px;">
                Valor mÃ©dio do mÂ²
              </div>
              <div style="color: #ffffff; font-size: 28px; font-weight: 700;">
                R$ <span id="valorMedioM2Lilit">0,00</span>
              </div>
            </div>
          </div>

          <!-- BOTÃ•ES GERAR PROPOSTA -->
          <div style="margin-top: 30px; text-align: center;">
            <div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;">
              <button id="btnGerarProposta" onclick="gerarProposta()" style="
                background: linear-gradient(135deg, #c9a962 0%, #a88b4a 100%);
                color: #000000;
                border: none;
                padding: 18px 48px;
                font-size: 18px;
                font-weight: 700;
                border-radius: 12px;
                cursor: pointer;
                text-transform: uppercase;
                letter-spacing: 1px;
                box-shadow: 0 4px 12px rgba(201, 169, 98, 0.3);
                transition: all 0.3s ease;
              " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 16px rgba(201, 169, 98, 0.4)'"
                 onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(201, 169, 98, 0.3)'">
                ðŸ“„ Gerar Proposta em PDF
              </button>

              <button id="btnGerarHTML" onclick="gerarPropostaHTML()" style="
                background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
                color: #ffffff;
                border: none;
                padding: 18px 48px;
                font-size: 18px;
                font-weight: 700;
                border-radius: 12px;
                cursor: pointer;
                text-transform: uppercase;
                letter-spacing: 1px;
                box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
                transition: all 0.3s ease;
              " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 16px rgba(59, 130, 246, 0.4)'"
                 onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(59, 130, 246, 0.3)'">
                ðŸŒ Gerar em HTML (com tracking)
              </button>
            </div>
            <div id="statusProposta" style="margin-top: 15px; font-size: 14px; color: #999999;"></div>
            <div id="htmlLink" style="margin-top: 15px; display: none;">
              <div style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 8px; padding: 16px;">
                <p style="color: #3b82f6; font-weight: 600; margin-bottom: 8px;">ðŸ”— Link da proposta gerado:</p>
                <a id="htmlLinkUrl" href="#" target="_blank" style="color: #60a5fa; word-break: break-all;"></a>
                <button onclick="copyHtmlLink()" style="
                  margin-top: 12px;
                  background: #3b82f6;
                  color: white;
                  border: none;
                  padding: 8px 16px;
                  border-radius: 6px;
                  cursor: pointer;
                  font-size: 14px;
                ">ðŸ“‹ Copiar Link</button>
              </div>
            </div>
          </div>
        </div>

        <!-- CondiÃ§Ãµes de Pagamento -->
        <div class="form-section">
          <h2 class="section-title">
            <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
              <line x1="1" y1="10" x2="23" y2="10"/>
            </svg>
            CondiÃ§Ãµes de Pagamento
          </h2>

          <!-- ConfiguraÃ§Ãµes de Pagamento -->
          <div class="form-row">
            <div class="form-group">
              <label for="percentualRT">% RT (RetenÃ§Ã£o TÃ©cnica)</label>
              <input id="percentualRT" type="number" min="0" max="100" step="1" value="10" oninput="calcularPrecos()" />
            </div>
            <div class="form-group">
              <label for="descontoVista">Desconto Ã  Vista (%)</label>
              <input id="descontoVista" type="number" min="0" max="100" step="0.01" value="5" oninput="calcularPrecos()" />
            </div>
            <div class="form-group">
              <label for="percentualEntrada">Entrada (%)</label>
              <input id="percentualEntrada" type="number" min="0" max="100" step="1" value="50" oninput="calcularPrecos()" />
            </div>
            <div class="form-group">
              <label for="numeroParcelas">Parcelas (sem juros)</label>
              <input id="numeroParcelas" type="number" min="1" max="24" step="1" value="2" oninput="calcularPrecos()" />
            </div>
          </div>

          <!-- ConfiguraÃ§Ãµes de CartÃ£o de CrÃ©dito -->
          <div class="form-row">
            <div class="form-group">
              <label for="taxaTransacaoCartao">Taxa de TransaÃ§Ã£o (%)</label>
              <input id="taxaTransacaoCartao" type="number" min="0" max="100" step="0.01" value="2.36" oninput="calcularPrecos()" />
            </div>
            <div class="form-group">
              <label for="taxaPorParcelaCartao">Taxa por Parcela (%)</label>
              <input id="taxaPorParcelaCartao" type="number" min="0" max="100" step="0.01" value="1" oninput="calcularPrecos()" />
            </div>
            <div class="form-group">
              <label for="numeroParcelasCartao">Parcelas no CartÃ£o</label>
              <input id="numeroParcelasCartao" type="number" min="1" max="24" step="1" value="6" oninput="calcularPrecos()" />
            </div>
          </div>

          <!-- Resultados de Pagamento -->
          <div class="form-row" style="margin-top: 20px;">
            <!-- Ã€ Vista -->
            <div class="form-group">
              <label id="tituloAVista" style="color: #22c55e; font-weight: 600;">ðŸ’° Ã€ VISTA (5% desconto)</label>
              <div style="background: #1a1a1a; border: 1px solid #333333; border-radius: 4px; padding: 16px;">
                <div style="color: #ffffff; font-size: 24px; font-weight: 700; margin-bottom: 8px;">
                  R$ <span id="valorAVista">0,00</span>
                </div>
                <div style="color: #888888; font-size: 12px;">
                  Economia: R$ <span id="economiaVista">0,00</span>
                </div>
              </div>
            </div>

            <!-- Parcelado -->
            <div class="form-group">
              <label id="tituloParcelado" style="color: #3b82f6; font-weight: 600;">ðŸ’³ PARCELADO (50% entrada + 2x)</label>
              <div style="background: #1a1a1a; border: 1px solid #333333; border-radius: 4px; padding: 16px;">
                <div style="color: #ffffff; font-size: 16px; font-weight: 600; margin-bottom: 8px;">
                  Entrada: R$ <span id="valorEntrada">0,00</span>
                </div>
                <div style="color: #ffffff; font-size: 16px; font-weight: 600; margin-bottom: 8px;">
                  <span id="numParcelasDisplay">2</span>x de R$ <span id="valorParcela">0,00</span>
                </div>
                <div style="color: #888888; font-size: 12px;">
                  Total: R$ <span id="totalParcelado">0,00</span> (sem juros)
                </div>
              </div>
            </div>

            <!-- CartÃ£o de CrÃ©dito -->
            <div class="form-group">
              <label id="tituloCartao" style="color: #f97316; font-weight: 600;">ðŸ’³ CARTÃƒO (6x com juros)</label>
              <div style="background: #1a1a1a; border: 1px solid #333333; border-radius: 4px; padding: 16px;">
                <div style="color: #ffffff; font-size: 16px; font-weight: 600; margin-bottom: 8px;">
                  <span id="numParcelasCartaoDisplay">6</span>x de R$ <span id="valorParcelaCartao">0,00</span>
                </div>
                <div style="color: #888888; font-size: 12px;">
                  Total: R$ <span id="totalCartao">0,00</span> (juros: <span id="totalJurosCartao">0,00</span>%)
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Calculadora de Prazos -->
        <div class="form-section">
          <h2 class="section-title">
            <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
              <line x1="16" y1="2" x2="16" y2="6"/>
              <line x1="8" y1="2" x2="8" y2="6"/>
              <line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
            Calculadora de Prazos
          </h2>

          <div class="form-row">
            <div class="form-group">
              <label for="calcMetragem">Metragem (mÂ²)</label>
              <input id="calcMetragem" type="number" min="1" value="100" oninput="calcularPrazo(); calcularPrestadoresNecessarios()" />
            </div>
            <div class="form-group">
              <label for="calcPrestadores">NÃºmero de Prestadores (sugerido automaticamente)</label>
              <input id="calcPrestadores" type="number" min="1" max="50" value="" placeholder="Auto" oninput="calcularPrazo()" />
            </div>
            <div class="form-group">
              <label for="calcTipo">Tipo de Obra</label>
              <select id="calcTipo" onchange="calcularPrazo(); calcularPrestadoresNecessarios()">
                <option value="piso">ðŸª¨ Apenas Piso</option>
                <option value="misto">ðŸ§± Piso + Paredes (30% menos produtivo)</option>
              </select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="calcPrazoDesejado">Prazo Desejado (dias Ãºteis)</label>
              <input id="calcPrazoDesejado" type="number" min="3" placeholder="Ex: 10 dias" oninput="calcularPrestadoresNecessarios()" />
            </div>
            <div class="form-group">
              <label>Prestadores NecessÃ¡rios</label>
              <div style="background: #1a1a1a; border: 1px solid #333333; border-radius: 4px; padding: 12px 16px; color: #ffffff; font-size: 14px; min-height: 44px; display: flex; align-items: center;">
                <span id="prestadoresNecessarios">â€”</span>
              </div>
            </div>
          </div>

          <!-- Resultado -->
          <div style="background: #ffffff; color: #000000; border-radius: 4px; padding: 25px; margin-top: 20px; text-align: center;">
            <div style="color: #666666; font-size: 14px; margin-bottom: 5px;">Prazo Total Estimado</div>
            <div style="font-size: 48px; font-weight: bold;" id="calcResultadoTotal">14</div>
            <div style="color: #666666; font-size: 14px;">dias Ãºteis</div>
          </div>

          <!-- Aviso de Etapas (quando aplicÃ¡vel) -->
          <div id="avisoEtapas" style="display: none; background: rgba(251, 191, 36, 0.1); border: 1px solid #f59e0b; border-radius: 4px; padding: 15px; margin-top: 20px;">
            <div style="display: flex; align-items: start; gap: 12px;">
              <span style="font-size: 24px;">âš ï¸</span>
              <div>
                <div style="color: #fbbf24; font-weight: 600; margin-bottom: 5px;">Limitado pelas etapas sequenciais</div>
                <div style="color: #fcd34d; font-size: 13px; line-height: 1.5;">
                  Mesmo com mais prestadores, o prazo mÃ­nimo Ã© de <strong id="diasMinimosText">5</strong> dias devido Ã s etapas de cura, secagem e preparaÃ§Ã£o que nÃ£o podem ser aceleradas.
                </div>
              </div>
            </div>
          </div>

          <!-- Detalhes -->
          <div style="background: #1a1a1a; border-radius: 4px; padding: 20px; margin-top: 20px; border: 1px solid #333333;">
            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #333333; color: #cccccc; font-size: 14px;">
              <span>ProduÃ§Ã£o diÃ¡ria da equipe</span>
              <span style="color: #ffffff; font-weight: 500;" id="calcProducaoDiaria">9 mÂ²/dia</span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #333333; color: #cccccc; font-size: 14px;">
              <span>Dias de instalaÃ§Ã£o</span>
              <span style="color: #ffffff; font-weight: 500;" id="calcDiasInstalacao">12 dias</span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #333333; color: #cccccc; font-size: 14px;">
              <span>Dias de cura</span>
              <span style="color: #ffffff; font-weight: 500;">2 dias</span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 8px 0; color: #ffffff; font-size: 14px; font-weight: bold;">
              <span>Total</span>
              <span id="calcTotalLinha">14 dias</span>
            </div>
          </div>

          <div style="background: #0a0a0a; border-radius: 4px; padding: 15px; margin-top: 20px; font-family: monospace; color: #888888; font-size: 12px; text-align: center; border: 1px solid #333333;">
            <div style="margin-bottom: 8px;">
              <strong style="color: #ffffff;">CÃ¡lculo baseado em:</strong> Tabela Real de Produtividade (15 janelas executadas)
            </div>
            <div style="color: #666666; font-size: 11px;">
              Janelas fixas de 50mÂ² a 1200mÂ² (usa valor mais prÃ³ximo, SEM interpolaÃ§Ã£o)
            </div>
            <div style="color: #666666; font-size: 11px; margin-top: 4px;">
              âš ï¸ Parede: -30% de produtividade | Time sugerido automaticamente | Logs no console (F12)
            </div>
          </div>
        </div>

        <!-- Actions -->
        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="resetForm()">
            Limpar FormulÃ¡rio
          </button>
          <button type="submit" class="btn btn-primary">
            ðŸš€ RODAR PROPOSTA
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="toast">
    <span id="toastMessage"></span>
  </div>

  <script>
    // ============================================
    // VERSION & DEBUG INFO
    // ============================================
    const APP_VERSION = '2024-12-16-CALCULADORA-V2'; // Calculadora de prazos atualizada + bloqueio de Enter
    console.log('ðŸš€ ========================================');
    console.log('   MONOFLOOR PROPOSTAS - VERSÃƒO:', APP_VERSION);
    console.log('   ========================================');

    // ============================================
    // CALCULADORA - DEFINIR LOGO NO INÃCIO
    // ============================================
    console.log('ðŸ”§ Definindo calcularPrazo...');

    const TABELA_CALC = [
      { area: 50, prestadores: 2, dias: 5, m2: 5.0 },
      { area: 80, prestadores: 2, dias: 5, m2: 8.0 },
      { area: 150, prestadores: 3, dias: 8, m2: 6.25 },
      { area: 200, prestadores: 3, dias: 8, m2: 8.33 },
      { area: 250, prestadores: 4, dias: 10, m2: 6.25 },
      { area: 300, prestadores: 4, dias: 12, m2: 6.25 },
      { area: 350, prestadores: 4, dias: 12, m2: 7.29 },
      { area: 400, prestadores: 5, dias: 11, m2: 7.27 },
      { area: 500, prestadores: 5, dias: 12, m2: 8.33 },
      { area: 600, prestadores: 6, dias: 12, m2: 8.33 },
      { area: 700, prestadores: 6, dias: 16, m2: 7.29 },
      { area: 800, prestadores: 7, dias: 17, m2: 6.72 },
      { area: 900, prestadores: 8, dias: 18, m2: 6.25 },
      { area: 1000, prestadores: 9, dias: 20, m2: 5.56 },
      { area: 1200, prestadores: 12, dias: 20, m2: 5.0 },
    ];

    window.calcularPrazo = function() {
      console.log('ðŸ“Š calcularPrazo EXECUTANDO!');
      try {
        const metros = parseFloat(document.getElementById('calcMetragem').value) || 0;
        let prest = parseInt(document.getElementById('calcPrestadores').value);
        const tipo = document.getElementById('calcTipo').value;

        if (metros <= 0) {
          document.getElementById('calcResultadoTotal').textContent = '0';
          return;
        }

        let janela = TABELA_CALC[0];
        for (let i = 0; i < TABELA_CALC.length; i++) {
          if (Math.abs(metros - TABELA_CALC[i].area) < Math.abs(metros - janela.area)) {
            janela = TABELA_CALC[i];
          }
        }

        if (!prest) {
          prest = janela.prestadores;
          document.getElementById('calcPrestadores').value = prest;
        }

        let prod = janela.m2 * prest;
        if (tipo === 'misto') prod *= 0.7;

        const dias = Math.ceil(metros / prod) + 2;

        document.getElementById('calcProducaoDiaria').textContent = prod.toFixed(1) + ' mÂ²/dia';
        document.getElementById('calcDiasInstalacao').textContent = (dias - 2) + ' dias';
        document.getElementById('calcResultadoTotal').textContent = dias;
        document.getElementById('calcTotalLinha').textContent = dias + ' dias';
        console.log('âœ… Atualizado:', dias, 'dias');
      } catch(e) {
        console.error('âŒ Erro em calcularPrazo:', e);
      }
    };

    window.calcularPrestadoresNecessarios = function() {
      try {
        const metros = parseFloat(document.getElementById('calcMetragem').value) || 0;
        const prazo = parseInt(document.getElementById('calcPrazoDesejado').value);
        if (!prazo || metros <= 0) {
          document.getElementById('prestadoresNecessarios').textContent = 'â€”';
          return;
        }
        let janela = TABELA_CALC[0];
        for (let i = 0; i < TABELA_CALC.length; i++) {
          if (Math.abs(metros - TABELA_CALC[i].area) < Math.abs(metros - janela.area)) {
            janela = TABELA_CALC[i];
          }
        }
        const m2hd = document.getElementById('calcTipo').value === 'misto' ? janela.m2 * 0.7 : janela.m2;
        const prest = Math.ceil(metros / ((prazo - 2) * m2hd));
        document.getElementById('prestadoresNecessarios').textContent = prest + ' prestador(es)';
      } catch(e) {
        console.error('âŒ Erro em calcularPrestadoresNecessarios:', e);
      }
    };

    console.log('âœ… calcularPrazo definida!', typeof window.calcularPrazo);

    // ============================================
    // CONFIGURAÃ‡ÃƒO DO WEBHOOK
    // ============================================
    // Configure a URL do webhook abaixo para onde os dados serÃ£o enviados
    const WEBHOOK_URL = 'https://seu-webhook-aqui.com/endpoint';

    // ============================================
    // GOOGLE PLACES AUTOCOMPLETE
    // ============================================
    // Autocomplete configurado no final do HTML (apÃ³s o body)

    // ============================================
    // CÃLCULO DE PREÃ‡OS
    // ============================================
    // Nota: MAO_OBRA_M2 e IMPOSTOS_PERCENT jÃ¡ definidos no inÃ­cio do script (linhas ~15-16)

    // Nota: formatarMoeda jÃ¡ definida no HEAD
    // Nota: window.calcularPrecos jÃ¡ definida no HEAD com cÃ¡lculos de pagamento

    function calcularProdutoPorValor(produto, valorTotal, metragem) {
      console.log(`  ðŸ“¦ Calculando ${produto}...`);

      // Impostos = Valor Total Ã— 17%
      const impostos = valorTotal * IMPOSTOS_PERCENT;

      // MÃ£o de Obra = 120 Ã— Metragem
      const maoObra = MAO_OBRA_M2 * metragem;

      // Materiais = Valor Total - Impostos - MÃ£o de Obra
      const materiais = valorTotal - impostos - maoObra;

      console.log(`    Total: R$ ${formatarMoeda(valorTotal)}`);
      console.log(`    Materiais: R$ ${formatarMoeda(materiais)}`);
      console.log(`    MÃ£o de Obra: R$ ${formatarMoeda(maoObra)}`);
      console.log(`    Impostos: R$ ${formatarMoeda(impostos)}`);

      // Atualizar interface
      try {
        document.getElementById(`total${produto}`).textContent = formatarMoeda(valorTotal);
        document.getElementById(`impostos${produto}`).textContent = formatarMoeda(impostos);
        document.getElementById(`maoObra${produto}`).textContent = formatarMoeda(maoObra);
        document.getElementById(`materiais${produto}`).textContent = formatarMoeda(materiais);
        console.log(`    âœ… ${produto} atualizado no DOM`);
      } catch (error) {
        console.error(`    âŒ Erro ao atualizar ${produto}:`, error);
      }
    }

    // Calculate metragem in real-time
    const metragemFields = [
      'metrosPiso',
      'metrosParede',
      'metrosTeto',
      'metrosBancadas',
      'metrosEscadas',
      'metrosEspeciaisPequenos',
      'metrosEspeciaisGrandes',
      'metrosPiscina'
    ];

    // ============================================
    // NOTA: Usando oninput="calcularPrecos()" diretamente nos campos HTML
    // NÃ£o Ã© necessÃ¡rio addEventListener nem calculateMetragem separado
    // A funÃ§Ã£o calcularPrecos() jÃ¡ calcula e atualiza TUDO
    // ============================================

    // Reset form
    function resetForm() {
      document.getElementById('proposalForm').reset();
      document.getElementById('percentualEntrada').value = '50';
      document.getElementById('numeroParcelas').value = '2';
      document.getElementById('numeroParcelasCartao').value = '6';
      metragemFields.forEach(id => {
        document.getElementById(id).value = '0';
      });
      document.getElementById('valorTotal').value = '0';
      document.getElementById('percentualRT').value = '10';
      document.getElementById('descontoVista').value = '5';
      document.getElementById('taxaTransacaoCartao').value = '2.36';
      document.getElementById('taxaPorParcelaCartao').value = '1';
      document.getElementById('precoStelion').value = '0';
      document.getElementById('precoLilit').value = '0';
      calcularPrecos();
      showToast('FormulÃ¡rio limpo com sucesso', 'success');
    }

    // Show toast notification
    function showToast(message, type = 'success') {
      const toast = document.getElementById('toast');
      const toastMessage = document.getElementById('toastMessage');

      toastMessage.textContent = message;
      toast.className = `toast ${type} show`;

      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // Form submission
    document.getElementById('proposalForm').addEventListener('submit', async function(e) {
      e.preventDefault();

      if (!WEBHOOK_URL || WEBHOOK_URL === 'https://seu-webhook-aqui.com/endpoint') {
        showToast('âš ï¸ Webhook nÃ£o configurado. Configure o WEBHOOK_URL no cÃ³digo.', 'error');
        return;
      }

      // Collect form data
      // Ler valores de metragem diretamente dos campos que calcularPrecos() atualiza
      const metragemOriginalText = document.getElementById('metragemOriginal')?.textContent || '0.00 mÂ²';
      const metragemTotalText = document.getElementById('metragemTotal')?.textContent || '0.00 mÂ²';
      const metragemOriginal = parseFloat(metragemOriginalText.replace(' mÂ²', '')) || 0;
      const metragemTotal = parseFloat(metragemTotalText.replace(' mÂ²', '')) || 0;

      const proposalData = {
        cliente: {
          nome: document.getElementById('nomeCliente').value,
          endereco: document.getElementById('endereco').value,
          detalhes: document.getElementById('detalhes').value,
        },
        obra: {
          previsaoData: document.getElementById('previsaoData').value,
        },
        metragem: {
          piso: parseFloat(document.getElementById('metrosPiso').value) || 0,
          parede: parseFloat(document.getElementById('metrosParede').value) || 0,
          teto: parseFloat(document.getElementById('metrosTeto').value) || 0,
          bancadas: parseFloat(document.getElementById('metrosBancadas').value) || 0,
          escadas: parseFloat(document.getElementById('metrosEscadas').value) || 0,
          especiaisPequenos: parseFloat(document.getElementById('metrosEspeciaisPequenos').value) || 0,
          especiaisGrandes: parseFloat(document.getElementById('metrosEspeciaisGrandes').value) || 0,
          piscina: parseFloat(document.getElementById('metrosPiscina').value) || 0,
          original: metragemOriginal,
          total: metragemTotal,
        },
        valores: {
          valorTotal: parseFloat(document.getElementById('valorTotal').value) || 0,
          percentualRT: parseFloat(document.getElementById('percentualRT').value) || 10,
          percentualEntrada: parseFloat(document.getElementById('percentualEntrada').value) || 50,
          numeroParcelas: parseInt(document.getElementById('numeroParcelas').value) || 1,
          descontoVista: parseFloat(document.getElementById('descontoVista').value) || 0,
          taxaTransacaoCartao: parseFloat(document.getElementById('taxaTransacaoCartao').value) || 2.36,
          taxaPorParcelaCartao: parseFloat(document.getElementById('taxaPorParcelaCartao').value) || 1,
          numeroParcelasCartao: parseInt(document.getElementById('numeroParcelasCartao').value) || 1,
        },
        tabela: {
          precoStelion: parseFloat(document.getElementById('precoStelion').value) || 0,
          precoLilit: parseFloat(document.getElementById('precoLilit').value) || 0,
        },
        timestamp: new Date().toISOString(),
      };

      try {
        const response = await fetch(WEBHOOK_URL, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(proposalData),
        });

        if (response.ok) {
          showToast('âœ… Proposta enviada com sucesso!', 'success');
          console.log('Proposta enviada:', proposalData);
        } else {
          throw new Error('Erro ao enviar proposta');
        }
      } catch (error) {
        console.error('Erro:', error);
        showToast('âŒ Erro ao enviar proposta. Verifique o webhook.', 'error');
      }
    });

    // ============================================
    // INICIALIZAÃ‡ÃƒO
    // ============================================

    // FunÃ§Ã£o para preencher campos a partir de query params (integraÃ§Ã£o CRM)
    function preencherDadosDoCRM() {
      const urlParams = new URLSearchParams(window.location.search);

      // Verificar se hÃ¡ parÃ¢metros do CRM (qualquer um deles)
      const hasCRMParams = urlParams.has('dealId') || urlParams.has('cliente') || urlParams.has('cidade') || urlParams.has('consultor') || urlParams.has('arquiteto');
      if (hasCRMParams) {
        console.log('ðŸ“‹ Dados do CRM detectados, preenchendo campos...');

        // Armazenar dealId para uso posterior (callback para o CRM)
        if (urlParams.has('dealId')) {
          window.dealIdCRM = urlParams.get('dealId');
        }

        // Nome do cliente
        if (urlParams.has('cliente')) {
          const nomeClienteInput = document.getElementById('nomeCliente');
          if (nomeClienteInput) nomeClienteInput.value = urlParams.get('cliente');
        }

        // EndereÃ§o
        if (urlParams.has('endereco')) {
          const enderecoInput = document.getElementById('endereco');
          if (enderecoInput) enderecoInput.value = urlParams.get('endereco');
        }

        // Cidade - Converter cÃ³digo para nome legÃ­vel
        if (urlParams.has('cidade')) {
          const cidadeCodigo = urlParams.get('cidade');
          const cidadeMap = {
            // CÃ³digos de texto
            'SP_CAPITAL': 'SÃ£o Paulo (Capital)',
            'SP_INTERIOR': 'SÃ£o Paulo (Interior)',
            'SP_LITORAL': 'SÃ£o Paulo (Litoral)',
            'RJ_CAPITAL': 'Rio de Janeiro (Capital)',
            'RJ_INTERIOR': 'Rio de Janeiro (Interior)',
            'RJ_LITORAL': 'Rio de Janeiro (Litoral)',
            'MG': 'Minas Gerais',
            'PR': 'ParanÃ¡',
            'SC': 'Santa Catarina',
            'RS': 'Rio Grande do Sul',
            'BA': 'Bahia',
            'ES': 'EspÃ­rito Santo',
            'DF': 'Distrito Federal',
            'GO': 'GoiÃ¡s',
            'PE': 'Pernambuco',
            'CE': 'CearÃ¡',
            'CURITIBA': 'Curitiba',
            'PR_LITORAL': 'Litoral Paranaense',
            'OUTROS': null, // SerÃ¡ tratado abaixo
            // IDs numÃ©ricos do Pipedrive
            '179': 'SÃ£o Paulo (Capital)',
            '180': 'Rio de Janeiro (Capital)',
            '181': 'Curitiba',
            '182': 'Interior ou Litoral Paulista',
            '183': 'Interior ou Litoral Carioca',
            '184': 'Santa Catarina',
            '185': 'Litoral Paranaense',
            '186': 'Outro'
          };

          const enderecoInput = document.getElementById('endereco');
          if (enderecoInput && !enderecoInput.value) {
            // Se for OUTROS, usar o endereÃ§o que o cliente informou
            if (cidadeCodigo === 'OUTROS' && urlParams.has('endereco')) {
              enderecoInput.value = urlParams.get('endereco');
            } else if (cidadeMap[cidadeCodigo]) {
              enderecoInput.value = cidadeMap[cidadeCodigo];
            } else if (cidadeCodigo !== 'OUTROS') {
              // Se nÃ£o encontrar no mapa e nÃ£o for OUTROS, usar o cÃ³digo original
              enderecoInput.value = cidadeCodigo;
            }
          }
        }

        // Processar parÃ¢metro 'detalhes' ou 'area' da URL para extrair Ã¡reas (se existir)
        // O CRM pode enviar como 'detalhes' (campo resumo) ou 'area' (campo descritivoArea)
        const detalhesTexto = urlParams.get('detalhes') || urlParams.get('area');
        if (detalhesTexto) {
          console.log('ðŸ“ [CRM] Detalhes/Area recebidos:', detalhesTexto);

          // Tentar extrair Ã¡reas do texto
          const areasExtraidas = parseAreasFromDetails(detalhesTexto);
          if (areasExtraidas) {
            console.log('ðŸŽ¯ [CRM] Ãreas extraÃ­das:', areasExtraidas);
            distribuirAreas(areasExtraidas);
          }
        }

        // Metragem - preencher no campo de piso por padrÃ£o (fallback se nÃ£o veio nos detalhes)
        if (urlParams.has('metragem')) {
          const metragem = parseFloat(urlParams.get('metragem'));
          if (metragem > 0) {
            const metrosPisoInput = document.getElementById('metrosPiso');
            if (metrosPisoInput) {
              metrosPisoInput.value = metragem;
              console.log('ðŸ“ Metragem preenchida:', metragem, 'mÂ²');
            }
          }
        }

        // Data prevista de execuÃ§Ã£o
        if (urlParams.has('dataPrevistaExec')) {
          const previsaoDataInput = document.getElementById('previsaoData');
          if (previsaoDataInput) {
            previsaoDataInput.value = urlParams.get('dataPrevistaExec');
            console.log('ðŸ“… Data prevista preenchida:', urlParams.get('dataPrevistaExec'));
          }
        }

        // Mostrar toast informando que campos foram preenchidos
        setTimeout(() => {
          showToast('ðŸ“‹ Dados do CRM carregados! Confira e ajuste se necessÃ¡rio.', 'info');
        }, 500);

        console.log('âœ… Campos preenchidos a partir do CRM');
      }
    }

    // FunÃ§Ã£o para salvar proposta gerada de volta no CRM
    async function salvarPropostaNoCRM(valorTotal, metragem, dadosCalculo, pdfBlob) {
      try {
        console.log('ðŸ’¾ Salvando proposta no CRM...');

        // Usar a API do admin panel
        const API_BASE = window.location.origin;
        const dealId = window.dealIdCRM;

        // 1. Criar registro da proposta
        const response = await fetch(`${API_BASE}/api/admin/comercial/${dealId}/proposta/gerar`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${localStorage.getItem('admin_token') || ''}`
          },
          body: JSON.stringify({
            valorTotal,
            metragem,
            dadosCalculo
          })
        });

        if (response.ok) {
          const result = await response.json();
          console.log('âœ… Proposta criada no CRM:', result);

          // 2. Se temos o PDF blob, converter para base64 e salvar
          if (pdfBlob && result.proposta && result.proposta.id) {
            try {
              console.log('ðŸ“„ Convertendo PDF para base64...');
              const pdfBase64 = await blobToBase64(pdfBlob);

              // Salvar PDF no banco
              const pdfResponse = await fetch(`${API_BASE}/api/admin/comercial/${dealId}/proposta/${result.proposta.id}/pdf`, {
                method: 'PUT',
                headers: {
                  'Content-Type': 'application/json',
                  'Authorization': `Bearer ${localStorage.getItem('admin_token') || ''}`
                },
                body: JSON.stringify({
                  pdfBase64,
                  valorTotal,
                  metragem
                })
              });

              if (pdfResponse.ok) {
                const pdfResult = await pdfResponse.json();
                console.log('âœ… PDF salvo no CRM!', pdfResult);
                showToast('âœ… Proposta v' + result.proposta.versao + ' salva e anexada ao lead!', 'success');
              } else {
                console.error('âŒ Erro ao salvar PDF');
                showToast('âš ï¸ Proposta criada, mas PDF nÃ£o foi salvo', 'warning');
              }
            } catch (pdfError) {
              console.error('âŒ Erro ao processar PDF:', pdfError);
              showToast('âš ï¸ Proposta criada, mas PDF nÃ£o foi salvo', 'warning');
            }
          } else {
            showToast('âœ… Proposta v' + (result.proposta?.versao || '?') + ' salva no CRM!', 'success');
          }
        } else {
          const error = await response.json();
          console.error('âŒ Erro ao salvar no CRM:', error);
          showToast('âš ï¸ Proposta gerada, mas nÃ£o foi salva no CRM', 'warning');
        }
      } catch (error) {
        console.error('âŒ Erro ao conectar com CRM:', error);
        showToast('âš ï¸ Proposta gerada localmente. CRM indisponÃ­vel.', 'warning');
      }
    }

    // Helper para converter Blob para Base64
    function blobToBase64(blob) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onloadend = () => {
          // Retornar apenas a parte base64 (sem o prefixo data:...)
          const base64 = reader.result.split(',')[1];
          resolve(base64);
        };
        reader.onerror = reject;
        reader.readAsDataURL(blob);
      });
    }

    function initializeApp() {
      console.log('ðŸš€ Inicializando aplicaÃ§Ã£o...');

      // Preencher dados do CRM se vieram via query params
      preencherDadosDoCRM();

      // Prevenir Enter de dar submit no formulÃ¡rio - VERSÃƒO ROBUSTA
      const form = document.getElementById('proposalForm'); // ID correto!

      // Listener no formulÃ¡rio
      if (form) {
        form.addEventListener('submit', function(event) {
          event.preventDefault();
          console.log('â›” Submit bloqueado via form.addEventListener!');
          return false;
        });

        form.addEventListener('keydown', function(event) {
          if (event.key === 'Enter') {
            // Bloquear Enter em todos os elementos EXCETO textarea e button type=submit
            if (event.target.tagName !== 'TEXTAREA' &&
                !(event.target.tagName === 'BUTTON' && event.target.type === 'submit')) {
              event.preventDefault();
              console.log('â›” Enter bloqueado - sem refresh!');
              return false;
            }
          }
        });

        console.log('âœ… PrevenÃ§Ã£o de Enter configurada no formulÃ¡rio!');
      }

      // Listener global adicional (fallback)
      document.addEventListener('keydown', function(event) {
        if (event.key === 'Enter' &&
            (event.target.tagName === 'INPUT' && event.target.type !== 'submit')) {
          event.preventDefault();
          console.log('â›” Enter bloqueado globalmente!');
          return false;
        }
      });
      console.log('âœ… PrevenÃ§Ã£o de Enter configurada globalmente!');

      // Calcular valores iniciais
      calcularPrecos();

      // Calcular prazo inicial da calculadora
      calcularPrazo();

      console.log('âœ… AplicaÃ§Ã£o inicializada com sucesso!');
    }

    // Executar quando DOM estiver pronto
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeApp);
    } else {
      // DOM jÃ¡ estÃ¡ pronto
      initializeApp();
    }

    // ============================================
    // CALCULADORA DE PRAZOS - TABELA REAL
    // ============================================

    // Tabela de produtividade REAL (baseada em projetos executados)
    const tabelaProdutividade = [
      { area: 50, prestadores: 2, dias: 5, m2PorHomemDia: 5.0 },
      { area: 80, prestadores: 2, dias: 5, m2PorHomemDia: 8.0 },
      { area: 150, prestadores: 3, dias: 8, m2PorHomemDia: 6.25 },
      { area: 200, prestadores: 3, dias: 8, m2PorHomemDia: 8.33 },
      { area: 250, prestadores: 4, dias: 10, m2PorHomemDia: 6.25 },
      { area: 300, prestadores: 4, dias: 12, m2PorHomemDia: 6.25 },
      { area: 350, prestadores: 4, dias: 12, m2PorHomemDia: 7.29 },
      { area: 400, prestadores: 5, dias: 11, m2PorHomemDia: 7.27 },
      { area: 500, prestadores: 5, dias: 12, m2PorHomemDia: 8.33 },
      { area: 600, prestadores: 6, dias: 12, m2PorHomemDia: 8.33 },
      { area: 700, prestadores: 6, dias: 16, m2PorHomemDia: 7.29 },
      { area: 800, prestadores: 7, dias: 17, m2PorHomemDia: 6.72 },
      { area: 900, prestadores: 8, dias: 18, m2PorHomemDia: 6.25 },
      { area: 1000, prestadores: 9, dias: 20, m2PorHomemDia: 5.56 },
      { area: 1200, prestadores: 12, dias: 20, m2PorHomemDia: 5.0 },
    ];

    const DIAS_CURA = 2;
    const REDUCAO_PAREDE = 0.70; // 30% menos produtivo em paredes

    // Buscar janela de produtividade (VALORES FIXOS, SEM INTERPOLAÃ‡ÃƒO)
    function buscarJanela(area) {
      console.log('ðŸ” Buscando janela para:', area, 'mÂ²');

      // Buscar valor exato primeiro
      const exato = tabelaProdutividade.find(d => d.area === area);
      if (exato) {
        console.log('âœ… Valor EXATO encontrado:', exato);
        return exato;
      }

      // Menor que 50mÂ²
      if (area < 50) {
        console.log('âš ï¸ Menor que 50mÂ² - usando janela de 50mÂ²');
        return tabelaProdutividade[0]; // 50mÂ²
      }

      // Maior que 1200mÂ²
      if (area > 1200) {
        console.log('âš ï¸ Maior que 1200mÂ² - usando janela de 1200mÂ²');
        return tabelaProdutividade[tabelaProdutividade.length - 1]; // 1200mÂ²
      }

      // Encontrar a janela (usar o valor MAIS PRÃ“XIMO da janela)
      let maisProximo = tabelaProdutividade[0];
      let menorDiferenca = Math.abs(area - tabelaProdutividade[0].area);

      for (let i = 1; i < tabelaProdutividade.length; i++) {
        const diferenca = Math.abs(area - tabelaProdutividade[i].area);
        if (diferenca < menorDiferenca) {
          menorDiferenca = diferenca;
          maisProximo = tabelaProdutividade[i];
        }
      }

      console.log('âœ… Janela encontrada (mais prÃ³ximo):', maisProximo.area + 'mÂ²', 'â†’', maisProximo);
      return maisProximo;
    }

    window.calcularPrazo = function() {
      console.log('ðŸ“Š === CALCULANDO PRAZO ===');
      console.log('ðŸ”§ calcularPrazo() foi chamada!');

      const m2 = parseFloat(document.getElementById('calcMetragem').value) || 0;
      let prestadores = parseInt(document.getElementById('calcPrestadores').value);
      const tipo = document.getElementById('calcTipo').value;
      const ehParede = (tipo === 'misto');

      console.log('ðŸ“ Metragem:', m2, 'mÂ²');
      console.log('ðŸ‘· Prestadores (input):', prestadores || 'Auto');
      console.log('ðŸ—ï¸ Tipo:', tipo, 'â†’', ehParede ? 'COM REDUÃ‡ÃƒO (-30%)' : 'SEM REDUÃ‡ÃƒO');

      if (m2 <= 0) {
        console.log('âš ï¸ Metragem invÃ¡lida - zerando campos');
        document.getElementById('calcProducaoDiaria').textContent = '0 mÂ²/dia';
        document.getElementById('calcDiasInstalacao').textContent = '0 dias';
        document.getElementById('calcResultadoTotal').textContent = '0';
        document.getElementById('calcTotalLinha').textContent = '0 dias';
        return;
      }

      // Buscar janela de produtividade (VALORES FIXOS)
      const janela = buscarJanela(m2);

      // Sugerir tamanho do time se campo vazio
      if (!prestadores || prestadores <= 0) {
        prestadores = janela.prestadores;
        document.getElementById('calcPrestadores').value = prestadores;
        console.log('ðŸ’¡ SugestÃ£o automÃ¡tica de time:', prestadores, 'prestadores');
      }

      // Calcular produtividade e dias
      let producaoM2PorDia = janela.m2PorHomemDia * prestadores;
      console.log('ðŸ“ˆ ProduÃ§Ã£o base:', janela.m2PorHomemDia, 'mÂ²/H-D Ã—', prestadores, '=', producaoM2PorDia.toFixed(1), 'mÂ²/dia');

      // Aplicar reduÃ§Ã£o de 30% se for parede
      if (ehParede) {
        producaoM2PorDia = producaoM2PorDia * REDUCAO_PAREDE;
        console.log('ðŸ“‰ Com reduÃ§Ã£o de parede (70%):', producaoM2PorDia.toFixed(1), 'mÂ²/dia');
      }

      let diasInstalacao = Math.ceil(m2 / producaoM2PorDia);
      console.log('â±ï¸ Dias de instalaÃ§Ã£o:', diasInstalacao, 'dias');

      // Total = instalaÃ§Ã£o + cura
      const total = diasInstalacao + DIAS_CURA;
      console.log('ðŸŽ¯ TOTAL:', diasInstalacao, '+', DIAS_CURA, '(cura) =', total, 'dias');

      // Atualizar interface
      document.getElementById('calcProducaoDiaria').textContent = producaoM2PorDia.toFixed(1) + ' mÂ²/dia';
      document.getElementById('calcDiasInstalacao').textContent = diasInstalacao + ' dias';
      document.getElementById('calcResultadoTotal').textContent = total;
      document.getElementById('calcTotalLinha').textContent = total + ' dias';

      console.log('âœ… Interface atualizada!');
      console.log('========================\n');
    }

    window.calcularPrestadoresNecessarios = function() {
      console.log('ðŸ‘· calcularPrestadoresNecessarios() foi chamada!');

      const m2 = parseFloat(document.getElementById('calcMetragem').value) || 0;
      const prazoDesejado = parseInt(document.getElementById('calcPrazoDesejado').value);
      const tipo = document.getElementById('calcTipo').value;
      const ehParede = (tipo === 'misto');

      if (!prazoDesejado || prazoDesejado < 3 || m2 <= 0) {
        document.getElementById('prestadoresNecessarios').textContent = 'â€”';
        return;
      }

      // Dias disponÃ­veis para instalaÃ§Ã£o (prazo total - dias de cura)
      const diasInstalacao = prazoDesejado - DIAS_CURA;

      if (diasInstalacao <= 0) {
        document.getElementById('prestadoresNecessarios').textContent = 'Prazo muito curto (mÃ­nimo 3 dias)';
        return;
      }

      // Buscar produtividade da janela (VALORES FIXOS)
      const janela = buscarJanela(m2);
      let m2PorHomemDia = janela.m2PorHomemDia;

      // Aplicar reduÃ§Ã£o para parede
      if (ehParede) {
        m2PorHomemDia = m2PorHomemDia * REDUCAO_PAREDE;
      }

      // Calcular prestadores necessÃ¡rios
      const prestadoresNecessarios = Math.ceil(m2 / (diasInstalacao * m2PorHomemDia));

      document.getElementById('prestadoresNecessarios').textContent = prestadoresNecessarios + ' prestador(es)';
    }

    // Debug: Check if NITECLUB font is loaded
    document.fonts.ready.then(function() {
      const fonts = Array.from(document.fonts.values());
      const niteclubFont = fonts.find(f => f.family === 'NITECLUB');
      if (niteclubFont) {
        console.log('âœ… Fonte NITECLUB carregada com sucesso!');
      } else {
        console.warn('âš ï¸ Fonte NITECLUB nÃ£o foi encontrada. Carregando manualmente...');
        const font = new FontFace('NITECLUB', 'url(/NITECLUB.TTF)');
        font.load().then(function(loadedFont) {
          document.fonts.add(loadedFont);
          console.log('âœ… Fonte NITECLUB carregada manualmente!');
        }).catch(function(error) {
          console.error('âŒ Erro ao carregar fonte NITECLUB:', error);
        });
      }
    });

    // =====================================================
    // AGENTE DE DISTRIBUIÃ‡ÃƒO DE ÃREAS
    // Analisa o campo "detalhes" e distribui metragens
    // =====================================================

    function parseAreasFromDetails(texto) {
      if (!texto) return null;

      const areas = {
        piso: null,
        parede: null,
        teto: null,
        bancadas: null,
        escadas: null,
        especiaisPequenos: null,
        especiaisGrandes: null,
        piscina: null
      };

      // Normalizar texto: remover acentos e converter para lowercase
      const textoNorm = texto.toLowerCase()
        .normalize('NFD').replace(/[\u0300-\u036f]/g, '');

      // PadrÃµes para detectar Ã¡reas
      // Formatos aceitos: "150m2 de piso", "150 mÂ² piso", "piso: 150", "piso 150m2", etc.
      const patterns = [
        // PadrÃ£o: nÃºmero + unidade + tipo
        { regex: /(\d+(?:[.,]\d+)?)\s*(?:m2|mÂ²|metros?\s*(?:quadrados?)?)\s*(?:de\s+)?(?:piso|chao|floor)/gi, field: 'piso' },
        { regex: /(\d+(?:[.,]\d+)?)\s*(?:m2|mÂ²|metros?\s*(?:quadrados?)?)\s*(?:de\s+)?(?:parede|wall|paredes)/gi, field: 'parede' },
        { regex: /(\d+(?:[.,]\d+)?)\s*(?:m2|mÂ²|metros?\s*(?:quadrados?)?)\s*(?:de\s+)?(?:teto|forro|ceiling)/gi, field: 'teto' },
        { regex: /(\d+(?:[.,]\d+)?)\s*(?:m2|mÂ²|metros?\s*(?:quadrados?)?)\s*(?:de\s+)?(?:bancada|bancadas|countertop)/gi, field: 'bancadas' },
        { regex: /(\d+(?:[.,]\d+)?)\s*(?:m2|mÂ²|metros?\s*(?:quadrados?)?)\s*(?:de\s+)?(?:escada|escadas|stairs)/gi, field: 'escadas' },
        { regex: /(\d+(?:[.,]\d+)?)\s*(?:m2|mÂ²|metros?\s*(?:quadrados?)?)\s*(?:de\s+)?(?:piscina|pool)/gi, field: 'piscina' },

        // PadrÃ£o: tipo + nÃºmero
        { regex: /(?:piso|chao|floor)\s*[:\-]?\s*(\d+(?:[.,]\d+)?)\s*(?:m2|mÂ²|metros?)?/gi, field: 'piso' },
        { regex: /(?:parede|wall|paredes)\s*[:\-]?\s*(\d+(?:[.,]\d+)?)\s*(?:m2|mÂ²|metros?)?/gi, field: 'parede' },
        { regex: /(?:teto|forro|ceiling)\s*[:\-]?\s*(\d+(?:[.,]\d+)?)\s*(?:m2|mÂ²|metros?)?/gi, field: 'teto' },
        { regex: /(?:bancada|bancadas|countertop)\s*[:\-]?\s*(\d+(?:[.,]\d+)?)\s*(?:m2|mÂ²|metros?)?/gi, field: 'bancadas' },
        { regex: /(?:escada|escadas|stairs)\s*[:\-]?\s*(\d+(?:[.,]\d+)?)\s*(?:m2|mÂ²|metros?)?/gi, field: 'escadas' },
        { regex: /(?:piscina|pool)\s*[:\-]?\s*(\d+(?:[.,]\d+)?)\s*(?:m2|mÂ²|metros?)?/gi, field: 'piscina' },

        // PadrÃ£o simplificado: nÃºmero + "de" + tipo (sem unidade)
        { regex: /(\d+(?:[.,]\d+)?)\s+(?:de\s+)?piso/gi, field: 'piso' },
        { regex: /(\d+(?:[.,]\d+)?)\s+(?:de\s+)?parede/gi, field: 'parede' },
        { regex: /(\d+(?:[.,]\d+)?)\s+(?:de\s+)?teto/gi, field: 'teto' },
        { regex: /(\d+(?:[.,]\d+)?)\s+(?:de\s+)?bancada/gi, field: 'bancadas' },
        { regex: /(\d+(?:[.,]\d+)?)\s+(?:de\s+)?escada/gi, field: 'escadas' },
        { regex: /(\d+(?:[.,]\d+)?)\s+(?:de\s+)?piscina/gi, field: 'piscina' }
      ];

      let foundAny = false;

      for (const pattern of patterns) {
        let match;
        while ((match = pattern.regex.exec(textoNorm)) !== null) {
          // Converter valor (aceitar vÃ­rgula como decimal)
          const valor = parseFloat(match[1].replace(',', '.'));
          if (valor > 0 && areas[pattern.field] === null) {
            areas[pattern.field] = valor;
            foundAny = true;
            console.log(`ðŸŽ¯ [Agente] Detectado: ${pattern.field} = ${valor}mÂ²`);
          }
        }
        // Reset regex lastIndex
        pattern.regex.lastIndex = 0;
      }

      return foundAny ? areas : null;
    }

    function distribuirAreas(areas) {
      if (!areas) return;

      const fieldMap = {
        piso: 'metrosPiso',
        parede: 'metrosParede',
        teto: 'metrosTeto',
        bancadas: 'metrosBancadas',
        escadas: 'metrosEscadas',
        especiaisPequenos: 'metrosEspeciaisPequenos',
        especiaisGrandes: 'metrosEspeciaisGrandes',
        piscina: 'metrosPiscina'
      };

      let preenchidos = [];

      for (const [tipo, valor] of Object.entries(areas)) {
        if (valor !== null && valor > 0) {
          const input = document.getElementById(fieldMap[tipo]);
          if (input) {
            // SÃ³ preencher se o campo estiver vazio ou zerado
            const valorAtual = parseFloat(input.value) || 0;
            if (valorAtual === 0) {
              input.value = valor;
              preenchidos.push(`${tipo}: ${valor}mÂ²`);

              // Trigger input event para recalcular
              input.dispatchEvent(new Event('input', { bubbles: true }));
            }
          }
        }
      }

      if (preenchidos.length > 0) {
        console.log('âœ… [Agente] Ãreas distribuÃ­das:', preenchidos.join(', '));
        showToast(`ðŸŽ¯ Ãreas detectadas e preenchidas: ${preenchidos.join(', ')}`, 'success');

        // Recalcular valores
        setTimeout(calcularValores, 100);
      }
    }

    // Debounce para nÃ£o processar a cada tecla
    let detalhesDebounceTimer = null;

    function processarDetalhes() {
      const detalhesInput = document.getElementById('detalhes');
      if (!detalhesInput) return;

      const texto = detalhesInput.value;
      if (texto.length < 5) return; // Texto muito curto

      const areas = parseAreasFromDetails(texto);
      if (areas) {
        distribuirAreas(areas);
      }
    }

    // Adicionar listener no campo detalhes
    document.addEventListener('DOMContentLoaded', function() {
      const detalhesInput = document.getElementById('detalhes');
      if (detalhesInput) {
        // Processar quando o usuÃ¡rio para de digitar (debounce de 1 segundo)
        detalhesInput.addEventListener('input', function() {
          clearTimeout(detalhesDebounceTimer);
          detalhesDebounceTimer = setTimeout(processarDetalhes, 1000);
        });

        // TambÃ©m processar ao sair do campo
        detalhesInput.addEventListener('blur', function() {
          clearTimeout(detalhesDebounceTimer);
          processarDetalhes();
        });

        console.log('ðŸ¤– [Agente] DistribuiÃ§Ã£o de Ã¡reas ativado no campo Detalhes');

        // Preencher Especialista/Arquiteto nos detalhes apÃ³s 500ms
        setTimeout(function() {
          const urlParams = new URLSearchParams(window.location.search);
          const consultor = urlParams.get('consultor');
          const arquiteto = urlParams.get('arquiteto');

          if (consultor || arquiteto) {
            const detalhesInput = document.getElementById('detalhes');
            if (detalhesInput && !detalhesInput.value.trim()) {
              let linhas = [];
              if (consultor) linhas.push('Especialista: ' + consultor);
              if (arquiteto) linhas.push('Arquiteto: ' + arquiteto);
              detalhesInput.value = linhas.join('\n');
              console.log('ðŸ‘¤ [Agente] Detalhes preenchidos:', linhas.join(', '));
            }
          }
        }, 500);
      }
    });
  </script>

  <!-- Google Maps Places API - Com GeolocalizaÃ§Ã£o e CÃ¡lculo de DistÃ¢ncia -->
  <script>
    console.log('ðŸ—ºï¸ [Google Maps] Iniciando configuraÃ§Ã£o...');

    // VariÃ¡veis globais
    var autocomplete;
    var autocompleteInitialized = false;
    var userLocation = null; // LocalizaÃ§Ã£o atual do usuÃ¡rio

    // FunÃ§Ã£o para calcular distÃ¢ncia usando Haversine formula
    function calcularDistancia(lat1, lon1, lat2, lon2) {
      var R = 6371; // Raio da Terra em km
      var dLat = (lat2 - lat1) * Math.PI / 180;
      var dLon = (lon2 - lon1) * Math.PI / 180;
      var a =
        Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
        Math.sin(dLon/2) * Math.sin(dLon/2);
      var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
      var d = R * c;
      return d.toFixed(1);
    }

    // FunÃ§Ã£o para atualizar a distÃ¢ncia no label
    function atualizarDistancia(distanciaKm) {
      var distanciaLabel = document.getElementById('distanciaLabel');
      if (distanciaLabel) {
        distanciaLabel.textContent = '(' + distanciaKm + ' km de distÃ¢ncia)';
        distanciaLabel.style.display = 'inline';
        console.log('âœ… [DistÃ¢ncia] Atualizada no label:', distanciaKm, 'km');
      }
    }

    // Obter localizaÃ§Ã£o do usuÃ¡rio
    function obterLocalizacao() {
      if (navigator.geolocation) {
        console.log('ðŸŒ [GeolocalizaÃ§Ã£o] Solicitando localizaÃ§Ã£o do usuÃ¡rio...');

        navigator.geolocation.getCurrentPosition(
          function(position) {
            userLocation = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };
            console.log('âœ… [GeolocalizaÃ§Ã£o] LocalizaÃ§Ã£o obtida:', userLocation);

            // Se o autocomplete jÃ¡ foi criado, atualizar o bias
            if (autocomplete) {
              var circle = new google.maps.Circle({
                center: userLocation,
                radius: 50000 // 50km de raio
              });
              autocomplete.setBounds(circle.getBounds());
              console.log('âœ… [GeolocalizaÃ§Ã£o] Bias atualizado para priorizar endereÃ§os prÃ³ximos');
            }
          },
          function(error) {
            console.warn('âš ï¸ [GeolocalizaÃ§Ã£o] Erro ao obter localizaÃ§Ã£o:', error.message);
            console.warn('   Autocomplete funcionarÃ¡ sem bias de localizaÃ§Ã£o');
          },
          {
            enableHighAccuracy: true,
            timeout: 5000,
            maximumAge: 0
          }
        );
      } else {
        console.warn('âš ï¸ [GeolocalizaÃ§Ã£o] NÃ£o suportada pelo navegador');
      }
    }

    // IMPORTANTE: Definir a funÃ§Ã£o ANTES de carregar o script do Google Maps
    window.initGoogleMaps = function() {
      console.log('ðŸ“ž [Autocomplete] Callback initGoogleMaps() chamada');

      if (autocompleteInitialized) {
        console.warn('âš ï¸ [Autocomplete] JÃ¡ inicializado, ignorando');
        return;
      }

      try {
        // Verificar se Google Maps estÃ¡ disponÃ­vel
        console.log('ðŸ” [Autocomplete] Verificando disponibilidade do Google Maps...');

        if (typeof google === 'undefined' || !google.maps || !google.maps.places) {
          console.error('âŒ [Autocomplete] google.maps.places nÃ£o estÃ¡ disponÃ­vel');
          return;
        }

        console.log('âœ… [Autocomplete] Google Maps disponÃ­vel');

        var enderecoInput = document.getElementById('endereco');

        if (!enderecoInput) {
          console.error('âŒ [Autocomplete] Campo de endereÃ§o nÃ£o encontrado');
          return;
        }

        console.log('âœ… [Autocomplete] Campo de endereÃ§o encontrado');

        // OpÃ§Ãµes do autocomplete - restrito ao Brasil
        var options = {
          types: ['address'],
          componentRestrictions: { country: 'br' },
          fields: ['formatted_address', 'address_components', 'geometry']
        };

        // Se jÃ¡ temos a localizaÃ§Ã£o do usuÃ¡rio, adicionar como bias
        if (userLocation) {
          options.location = new google.maps.LatLng(userLocation.lat, userLocation.lng);
          options.radius = 50000; // 50km de raio
          console.log('âœ… [Autocomplete] LocalizaÃ§Ã£o do usuÃ¡rio adicionada como bias');
        }

        console.log('âš™ï¸ [Autocomplete] Criando Autocomplete com opÃ§Ãµes:', options);

        // Inicializar autocomplete
        autocomplete = new google.maps.places.Autocomplete(enderecoInput, options);

        console.log('âœ… [Autocomplete] Objeto Autocomplete criado');

        // Listener para quando um endereÃ§o for selecionado
        autocomplete.addListener('place_changed', function() {
          console.log('ðŸ“ [Autocomplete] Evento place_changed disparado');
          var place = autocomplete.getPlace();

          if (!place.geometry) {
            console.log('âš ï¸ [Autocomplete] Sem geometria para:', place.name);
            return;
          }

          // Preencher o campo com o endereÃ§o formatado
          enderecoInput.value = place.formatted_address;
          console.log('âœ… [Autocomplete] EndereÃ§o preenchido:', place.formatted_address);

          // Calcular e mostrar distÃ¢ncia se tivermos a localizaÃ§Ã£o do usuÃ¡rio
          if (userLocation) {
            var destinoLat = place.geometry.location.lat();
            var destinoLng = place.geometry.location.lng();
            var distancia = calcularDistancia(
              userLocation.lat,
              userLocation.lng,
              destinoLat,
              destinoLng
            );

            console.log('ðŸ“ [DistÃ¢ncia] Calculada:', distancia, 'km');
            atualizarDistancia(distancia);
          } else {
            console.log('âš ï¸ [DistÃ¢ncia] LocalizaÃ§Ã£o do usuÃ¡rio nÃ£o disponÃ­vel');
          }
        });

        console.log('âœ… [Autocomplete] Listener place_changed adicionado');

        autocompleteInitialized = true;
        console.log('ðŸŽ‰ [Autocomplete] InicializaÃ§Ã£o completa!');
        console.log('ðŸ’¡ [Autocomplete] Digite no campo de endereÃ§o para testar');

        // Obter localizaÃ§Ã£o do usuÃ¡rio apÃ³s inicializar o autocomplete
        obterLocalizacao();

      } catch (error) {
        console.error('âŒ [Autocomplete] Erro:', error);
        console.error('   Stack:', error.stack);
      }
    };

    console.log('âœ… [Google Maps] FunÃ§Ã£o initGoogleMaps definida');

    // Agora carregar o script do Google Maps
    (function() {
      console.log('ðŸ—ºï¸ [Google Maps] Carregando script...');

      var apiKey = 'AIzaSyAGl3uuilMmSmSiGWdiV9ySwKq70nNEX-E';
      var script = document.createElement('script');

      script.src = 'https://maps.googleapis.com/maps/api/js?key=' + apiKey + '&libraries=places&callback=initGoogleMaps';
      script.async = true;
      script.defer = true;

      script.onload = function() {
        console.log('âœ… [Google Maps] Script carregado com sucesso');
      };

      script.onerror = function(error) {
        console.error('âŒ [Google Maps] Erro ao carregar script:', error);
        console.error('   URL:', script.src);
      };

      document.body.appendChild(script);
      console.log('ðŸ”„ [Google Maps] Script adicionado ao DOM');

      // Timeout de seguranÃ§a - avisar se nÃ£o carregar em 10 segundos
      setTimeout(function() {
        if (!autocompleteInitialized) {
          console.warn('â±ï¸ [Google Maps] Timeout - Autocomplete nÃ£o inicializou em 10 segundos');
          console.warn('   Campo de endereÃ§o funcionarÃ¡ sem autocomplete.');
        }
      }, 10000);
    })();
  </script>
</body>
</html>
